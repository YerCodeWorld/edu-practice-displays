{
  "version": 3,
  "sources": ["../src/utils/utils.ts", "../src/quizzes/matching/utils/parser.ts", "../src/quizzes/matching/utils/index.ts", "../src/services/sound-player.ts", "../src/quizzes/matching/original/index.html", "../src/quizzes/matching/original/styles.css", "../src/quizzes/matching/original/script.ts", "../src/quizzes/matching/wheels/index.html", "../src/quizzes/matching/wheels/styles.css", "../src/quizzes/matching/wheels/script.ts", "../src/quizzes/matching/trueFalse/index.html", "../src/quizzes/matching/trueFalse/styles.css", "../src/quizzes/matching/trueFalse/script.ts", "../src/quizzes/matching/single/index.html", "../src/quizzes/matching/single/styles.css", "../src/quizzes/matching/single/script.ts", "../src/quizzes/matching/concepts/index.html", "../src/quizzes/matching/concepts/styles.css", "../src/quizzes/matching/concepts/script.ts", "../src/quizzes/manual/index.html", "../src/quizzes/manual/style.css", "../src/quizzes/manual/script.ts", "../src/quizzes/blanks/single/index.html", "../src/quizzes/blanks/single/styles.css", "../src/quizzes/blanks/single/script.ts", "../src/quizzes/blanks/parser.ts", "../src/quizzes/blanks/reading/index.html", "../src/quizzes/blanks/reading/styles.css", "../src/quizzes/blanks/reading/script.ts", "../src/quizzes/blanks/multiple/index.html", "../src/quizzes/blanks/multiple/styles.css", "../src/quizzes/blanks/multiple/script.ts", "../src/quizzes/categorize/utils.ts", "../src/quizzes/categorize/colors/index.html", "../src/quizzes/categorize/colors/styles.css", "../src/quizzes/categorize/colors/script.ts", "../src/quizzes/categorize/single/index.html", "../src/quizzes/categorize/single/styles.css", "../src/quizzes/categorize/single/script.ts", "../src/quizzes/mcq/index.html", "../src/quizzes/mcq/styles.css", "../src/quizzes/mcq/script.ts", "../src/elements/html/letter-picker.html", "../src/elements/letter-picker.ts", "../src/elements/html/edu-mcq.html", "../src/elements/edu-mcq.ts", "../src/elements/html/color-picker.html", "../src/elements/color-picker.ts"],
  "sourcesContent": ["export interface EduMCQData {\n  img?: string; \n  question: string;\n  hint?: string;\n  options: string[];\n  correctOptions: string[];\n}\n\nexport const $ = <T extends Element>(sel: string, r: HTMLElement): T | null => \n  r.querySelector<T>(sel);\n\n/**\n * Different than applying a theme, this one creates a style element directly into the\n * target element\n */\nexport function injectStyle(id: string, css: string): void {\n    if (typeof document === \"undefined\") return;\n    if (!document.getElementById(id)) {\n        const element = document.createElement(\"style\");\n        element.id = id;\n        element.textContent = css;\n        document.head.appendChild(element);\n    }\n}\n\n/**\n * Take an array of whatever and randomize its order. This is needed by most exercises\n * since always rendering in the same ordern makes it easier to pass by just memorizing order.\n */\nexport function shuffle<T>(arr: T[]): T[] {\n    const shuffled = [...arr];\n    for (let i = shuffled.length - 1; i > 0; i--) {\n        const j = (Math.random() * (i + 1)) | 0;\n        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\n    }\n    return shuffled;\n}\n\n/**\n * This section element is expected to be the root element to all components no matter\n * their type.\n */\nexport function createSection(cn: string, ariaLabel: string): HTMLElement {\n    const root = document.createElement(\"section\");\n    root.className = cn;\n    root.setAttribute(\"role\", \"region\");\n    root.setAttribute(\"aria-label\", ariaLabel);\n\n    return root;\n}\n\n/**\n * Example expected string:\n * ...\n * @EXTRA = [I | am | you];\n */\nexport function removeDistractors(s: string): {\n    ok: boolean,\n    distractors?: string[],\n    resultString?: string,\n    errors?: string\n} {\n    const reSingle: RegExp = /@EXTRA\\s*(?:=|::)\\s*\\[(.*?)\\]/;\n    const reGlobal: RegExp = /@EXTRA\\s*(?:=|::)\\s*\\[(.*?)\\]/g;\n\n    let distractors: string[] = [];\n    let replaced: string = \"\";\n\n    const m = Array.from(s.matchAll(reGlobal), m => m[1]);\n\n    if (m.length === 0) return { ok: true, resultString: s, errors: \"no matches for @EXTRA distractors in the provided string\" };\n    if (m.length > 1) return { ok: false, resultString: s, errors: \"More than one @EXTRA distractors identifier found.\" };\n\n    console.log(m);\n\n    distractors = m[0]\n        .split(\"|\")\n        .map(x => x.trim())\n        .filter(x => x.length > 0);\n\n    const resultString = s.replace(reSingle, \"\");\n\n    return { ok: true, distractors: distractors, resultString: resultString };\n}\n\n// Takes the grammar of an exercise and extracts the title metadata \n// Looks for a @TITLE = ... ; pattern to return. Returns cleaned string\nexport function extractTitleAndStrip(source: string): { title?: string; rest: string } {  \n  const re = /@TITLE\\s*=\\s*([^;]+);?/i;\n  const m = source.match(re);\n  if (!m) return { rest: source };\n  const title = m[1].trim();\n  const rest = source.replace(m[0], \"\").trim();\n  return { title, rest };\n}\n\n// Takes a block (usually parts of an exercise after splitting by ';') and \n// looks for a # or -> label, which indicate either instruction or hint. \n// Returns it alongside the cleaned string. \nexport function takeOptionalLabel(block: string): { label: string; cleaned: string } {\n  const firstLine = block.split(/\\r?\\n/, 1)[0]?.trim() ?? \"\";\n  // formats supported: \"-> Label\" or \"# Label\"\n  const arrow = /^->\\s*(.+)$/;\n  const hash = /^#\\s*(.+)$/;\n\n  if (arrow.test(firstLine)) {\n    const label = firstLine.replace(arrow, \"$1\").trim();\n    const cleaned = block.replace(/^[^\\n]*\\n?/, \"\"); // drop first line\n    return { label, cleaned: cleaned.trim() };\n  }\n  if (hash.test(firstLine)) {\n    const label = firstLine.replace(hash, \"$1\").trim();\n    const cleaned = block.replace(/^[^\\n]*\\n?/, \"\");\n    return { label, cleaned: cleaned.trim() };\n  }\n  return { label: \"\", cleaned: block.trim() };\n}\n\nexport function splitBlocksOutsideParens(source: string): string[] {\n  const out: string[] = [];\n  let buf = \"\";\n  let depth = 0;\n\n  for (let i = 0; i < source.length; i++) {\n    const ch = source[i];\n\n    if (ch === \"(\") depth++;\n    if (ch === \")\") depth = Math.max(0, depth - 1);\n\n    if (ch === \";\" && depth === 0) {\n      const piece = buf.trim();\n      if (piece) out.push(piece);\n      buf = \"\";\n    } else {\n      buf += ch;\n    }\n  }\n\n  const tail = buf.trim();\n  if (tail) out.push(tail);\n\n  return out;\n}\n\nexport function extractImage(block: string): { img?: string; cleaned: string } {\n  // Matches: <data:...> or <http(s)://...>\n  const m = block.match(/<\\s*(data:[^>\\s]+|https?:\\/\\/[^>\\s]+)\\s*>/i);\n  if (!m) return { cleaned: block.trim() };\n\n  const cleaned = block.replace(m[0], \"\").trim();\n  return { img: m[1], cleaned };\n}\n\nexport function splitPipes(s: string): string[] {\n  return s.split(\"|\").map(t => t.trim()).filter(Boolean);\n}\nexport function dedupe<T>(arr: T[]): T[] {\n  return [...new Set(arr)];\n}\n\n// function createLiFromList() {}\n\n/**\nfunction createElFromRecord(obj: Record<string, string[]>): HTMLDivElement {\n  const container = document.createElement(\"div\");\n  Object.entries(obj).forEach([k, v] => {\n    const q = document.createElement(\"small\");\n    q.textContent = k;\n\n    const ul = document.createElement(\"ul\");\n    v.forEach(val => {\n      const li = document.createElement(\"li\");\n      li.textContent = val; \n      ul.appendChild(li);\n    });\n    \n    container.append(q, ul);\n  });\n\n  return container; \n}\n*/\n\n// ...\nexport function getResultEl(\n\n  score: number, \n  correct: number, \n  total: number, \n  timestamp: string,\n  wrong: string[],\n  // feedbackEl: 'obj' | 'ul' = 'ul';\n  \n): HTMLDivElement {\n\n    const ul = document.createElement(\"ul\");\n    wrong.forEach(upload => {\n      const li = document.createElement(\"li\");\n      li.textContent = upload;\n      ul.appendChild(li);\n    });\n\n    const winningContainer = document.createElement(\"div\");      \n    winningContainer.innerHTML = `            \n      <header>\n        <h4>${correct} of ${total} correct! ${String(score).slice(0, 4)}/100</h4>\n        <small>${String(timestamp).slice(0, 4)} seconds</small>\n        <p>${correct !== total ? \"Better luck next time\" : \"Very nice job!\"}</p>          \n      </header>        \n      <p>Wrong Answers: </p>    \n    `;\n    if (correct < total) winningContainer.appendChild(ul);\n    else winningContainer.innerHTML += '<p>0 wrong answers \uD83E\uDD73</p>';\n\n    return winningContainer;\n    \n}\n", "import {\n  Pair,\n  GeneralContent,\n  ParseResult\n} from \"../types\";\n\n/**\n * General parser, works for most variations\n */\nexport function parseMatching(exs: string): ParseResult {\n\n    const r = removeDistractors(exs);\n    if (!r.ok) return { ok: false, errors: r.errors };\n    const distractors = r.distractors ?? [];\n    const exercise = r.resultString ?? exs;\n\n    let pairs: Pair[] = [];\n\n    const chunks = [...exercise.trim().split(\";\")];\n\n    for (const c of chunks) {\n\n        if (c.trim() === \"\") continue;\n\n        const hasEq = c.includes(\"=\");\n        const hasColon = c.includes(\"::\");\n\n        if (hasEq && hasColon) return { ok: false, errors: `Ambiguous separators in ${c}`};\n\n        let eqCount = c.split(\"=\").length - 1;\n        let colonCount = c.split(\"::\").length - 1;\n        if ((eqCount || colonCount) > 1) {\n            return {\n                ok: false,\n                errors: `More than one separator found in a single sentence: ${c}`\n            };\n        }\n\n        if (!hasEq && !hasColon) return { ok: false, errors: `No separators found in ${c}` };\n\n        let sep: string = \"\";\n        if (hasEq) sep = \"=\"; else sep = \"::\";\n\n        const [left, right] = c.split(sep, 2).map(p => p.trim());\n        if (!(left && right)) return { ok: false, errors: `Incomplete pair at: ${c}` };\n\n        pairs.push({left, right});\n\n    }\n\n    return { ok: true, content: { content: pairs, distractors: distractors }};\n}\n\n/**\n * Example expected string:\n * ...\n * @EXTRA = [I | am | you];\n */\nfunction removeDistractors(s: string): {\n    ok: boolean,\n    distractors?: string[],\n    resultString?: string,\n    errors?: string\n} {\n    const reSingle: RegExp = /@EXTRA\\s*(?:=|::)\\s*\\[(.*?)\\]/;\n    const reGlobal: RegExp = /@EXTRA\\s*(?:=|::)\\s*\\[(.*?)\\]/g;\n\n    let distractors: string[] = [];\n    let replaced: string = \"\";\n\n    const m = Array.from(s.matchAll(reGlobal), m => m[1]);\n\n    if (m.length === 0) return { ok: true, resultString: s, errors: \"no matches for @EXTRA distractors in the provided string\" };\n    if (m.length > 1) return { ok: false, resultString: s, errors: \"More than one @EXTRA distractors identifier found.\" };\n\n    console.log(m);\n\n    distractors = m[0]\n        .split(\"|\")\n        .map(x => x.trim())\n        .filter(x => x.length > 0);\n\n    const resultString = s.replace(reSingle, \"\");\n\n    return { ok: true, distractors: distractors, resultString: resultString };\n}\n\n", "import {\n    Pair,\n    MatchData\n} from \"../types\";\n\n// Build data helpers\nexport const items = (data: MatchData, column: 'right' | 'left') => data.content.map(i => column === 'right' ? i.right : i.left);\n\nexport const distractors = (data: MatchData) => data.distractors;\n\nexport const answerKey = (data: MatchData) =>\nObject.fromEntries(data.content.map(i => [i.left, i.right]) as [string, string][]);\n\nexport { parseMatching } from \"./parser\";\n", "// sound-player.ts\ntype SoundName = 'victory' | 'failure' | 'click';\n\nconst SOUND_FILES: Record<SoundName, string> = {\n  victory: 'victory.mp3',\n  failure: 'failure.mp3',\n  click: 'click.mp3'\n};\n\n// --- singleton AudioContext --------------------------------------------------\nlet ctx: AudioContext | null = null;\nconst getCtx = async () => {\n  if (!ctx) ctx = new (window.AudioContext || (window as any).webkitAudioContext)();\n  if (ctx.state === 'suspended') await ctx.resume();\n  return ctx;\n};\n\n// --- buffer cache (lazy, deduplicated) ---------------------------------------\nconst bufferCache = new Map<SoundName, Promise<AudioBuffer>>();\n\nfunction fileUrl(file: string): string {\n  // Works in Next/Vite and plain web: /audio/<file>\n  // If you deploy under a subpath (Vite), BASE_URL keeps it correct.\n  const base = (import.meta as any)?.env?.BASE_URL ?? '/';\n  return `${base.replace(/\\/$/, '')}/audio/${file}`;\n}\n\nasync function loadBuffer(name: SoundName): Promise<AudioBuffer> {\n  if (!bufferCache.has(name)) {\n    bufferCache.set(name, (async () => {\n      const [ac, resp] = await Promise.all([getCtx(), fetch(fileUrl(SOUND_FILES[name]))]);\n      const data = await resp.arrayBuffer();\n      return ac.decodeAudioData(data);\n    })());\n  }\n  return bufferCache.get(name)!;\n}\n\n// --- public API --------------------------------------------------------------\nexport async function playSound(\n\n  name: SoundName,\n  opts: { volume?: number; rate?: number; loop?: boolean } = {}\n  \n): Promise<void> {\n  const ac = await getCtx();\n  const buf = await loadBuffer(name);\n\n  const src = ac.createBufferSource();\n  src.buffer = buf;\n  if (opts.rate) src.playbackRate.value = opts.rate;\n\n  const gain = ac.createGain();\n  gain.gain.value = opts.volume ?? 1;\n\n  src.connect(gain).connect(ac.destination);\n  src.loop = !!opts.loop;\n  src.start();\n}\n\nexport async function preloadSounds(names?: SoundName[]): Promise<void> {\n  const all = names ?? (Object.keys(SOUND_FILES) as SoundName[]);\n  await Promise.all(all.map(loadBuffer));\n}\n\n/** Call this once on a user gesture (click/tap) to satisfy iOS autoplay rules. */\nexport async function unlockAudio(): Promise<void> {\n  const ac = await getCtx();\n  if (ac.state === 'suspended') await ac.resume();\n}\n\n", "<div class=\"matching-wrap\">\n\n    <div class='matching-card'>\n        <div class=\"edu-match__indicators\">\n            <h3 >{{leftColumnName}}</h3>\n            <h3>{{rightColumnName}}</h3>\n        </div>\n\n        <div class=\"edu-matching__game\">\n            <div class=\"edu-matching__column\">\n                <div id=\"left-items\"></div>\n            </div>\n\n            <div class=\"edu-matching__column\">\n                <div id=\"right-items\"></div>\n            </div>\n        </div>\n\n        <div class=\"edu-matching__actions\">\n            <button id=\"check-btn\" style=\"\n                    min-with: 100%;\n                    padding: 0.75rem 20%;\n                    border: none;\n                    border-radius: var(--edu-radius);\n                    font-weight: 600;\n                    cursor: pointer;\n                    transition: all 0.2s ease;\n                    font-family: inherit;\n                    background: rgb(var(--edu-bg));\n                    color: rgb(var(--edu-ink));\n            \" disabled>\n                Check Matches\n            </button>\n        </div>\n    </div>\n    \n</div>\n", "/* ROOT SECTION NOT STYLED, UNNECESSARY */\n\n.matching-wrap {\n  background: linear-gradient(to right, rgb(var(--edu-first-accent) / 0.50) 50%, rgb(var(--edu-ink) / 0.50) 50%);\n}\n\n.matching-card {\n\n  display: flex;\n\n  padding:24px; \n\n  flex-direction: column;\n  \n  font-family: var(--font-family, system-ui);\n  background-color: rgb(var(--edu-first-accent) / 0.20);\n  color: rgb(var(--edu-ink));    \n  \n  border-radius: var(--edu-radius);\n  padding: 2rem;\n  \n  box-shadow: var(--shadow, 0 1px 3px 0 rgba(0, 0, 0, 0.1));\n  \n  border: 3px solid rgb(var(--edu-first-accent));\n  border-top: 15px solid rgb(var(--edu-first-accent)); \n  border-bottom: 15px solid rgb(var(--edu-first-accent));   \n}\n\n.edu-match__indicators {    \n    margin-top: 2%;\n    display: flex;\n    gap: 0.7rem;\n}\n\n.edu-match__indicators h3 {\n    font-weight: 600;\n    padding-bottom: 0.5rem;\n    border-bottom: 2px solid rgb(var(--edu-border));\n    color: rgb(var(--edu-inverted-ink));\n    width: 100%;\n    text-align: center;\n}\n\n.edu-matching__game {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    margin-bottom: 2rem;\n    align-items: center;\n}\n\n.edu-matching__column {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: 0.75rem;\n} \n\n.edu-matching__item {\n    padding: 0.75rem 1rem;\n    background: rgb(var(--edu-card));\n    border: 2px solid rgb(var(--edu-border));\n    border-radius: var(--edu-radius);\n    transition: all 0.2s ease;\n    font-weight: 500;\n    text-align: center;\n    max-width: 280px;\n    word-wrap: break-word;\n    hyphens: auto;\n    overflow-wrap: anywhere;\n    margin: 0.75rem auto;\n    color: rgb(var(--edu-ink));\n} \n\n.edu-matching__item:hover {\n    border-color: rgb(var(--edu-first-accent));\n    transform: translateY(-2px);\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n} \n\n.edu-matching__item--selected {\n    border-color: rgb(var(--edu-first-accent));\n    background: rgb(var(--edu-first-accent));\n    color: white;\n    transform: scale(1.05);\n}\n.edu-matching__item--matched {\n    border-color: rgb(var(--edu-success));\n    background: rgb(var(--edu-success));\n    color: white;\n    cursor: not-allowed;\n    transform: scale(0.95);\n}\n\n/* Confirmed matches turn green and scale down */\n.edu-matching__item--confirmed {\n    border-color: rgb(var(--edu-success)) !important;\n    background: rgb(var(--edu-success)) !important;\n    color: white !important;\n    transform: scale(0.95) !important;\n    opacity: 0.9;\n    cursor: not-allowed;\n}\n\n.edu-matching__actions {\n    display: flex;\n    justify-content: center;\n}\n\n\n/* Mobile optimizations - keep columns side by side */\n@media (max-width: 768px) {\n\n    .edu-matching {        \n        padding: 1rem;\n        max-width: 100%;\n    }\n    .edu-matching__game {\n        gap: 1rem;\n        grid-template-columns: 1fr 1fr; /* Keep two columns */\n    }\n    .edu-matching__item {\n        min-width: 80px;\n        max-width: 140px;\n        padding: 0.5rem 0.75rem;\n        font-size: 0.9rem;\n    }\n    .edu-matching__items-container {\n        min-height: 150px;\n        gap: 0.5rem;\n    }\n}\n\n@media (max-width: 480px) {\n    .edu-matching {\n        padding: 0.75rem;\n    }\n    .edu-matching__game {\n        gap: 0.75rem;\n    }\n    .edu-matching__item {\n        min-width: 70px;\n        max-width: 120px;\n        padding: 0.4rem 0.6rem;\n        font-size: 0.85rem;\n    }\n    .edu-matching__actions {\n        gap: 0.5rem;\n    }\n    .edu-matching__button {\n        padding: 0.6rem 1rem;\n        font-size: 0.9rem;\n    }\n}\n\n@keyframes shake {\n    0%, 100% { transform: translateX(0); }\n    25% { transform: translateX(-5px); }\n    75% { transform: translateX(5px); }\n}\n", "import { MatchData } from '../types';\nimport { injectStyle, shuffle, createSection, getResultEl } from \"../../../utils\";\nimport { RendererOptions, RendererHandle, Result, ContractType } from '../../types';\nimport { items, distractors, answerKey, parseMatching } from \"../utils\";\nimport { playSound } from \"../../../services\";\n\nimport baseHTML from \"./index.html\";\nimport baseCSS from \"./styles.css\";\n\nexport function matchingPageRenderer(\n    mount: HTMLElement,\n    data: MatchData,\n    options: RendererOptions = {}    \n): RendererHandle {\n\n    // BASE COMPONENT DATA \n    // ---------------------\n    const {        \n        shuffle: doShuffle = true,\n        allowRetry = true,\n        resultHandler,\n        ariaLabel = \"Matching Exercise\",\n        checkBtn = true\n    } = options;\n\n    const root = createSection(\"edu-matching\", ariaLabel)    \n    injectStyle('edu-matching-style', baseCSS);    \n\n    // BUNDLED DATA CONSTANTS \n    // ---------------------\n    const answers = answerKey(data);\n    const right = shuffle(items(data, \"right\"));\n    const left = shuffle(items(data, \"left\"));\n    const rightWithDistractors = shuffle([...items(data, \"right\"), ...(data.distractors || [])]);    \n\n    // State tracker \n    let state = {\n        matches: {},\n        pendingMatches: {},\n        selectedLeft: null,\n        selectedRight: null,\n        score: 0\n    };\n\n    // CONSTANTS \n    // ---------\n    const colors = [\"#8b5cf6\", \"#d946ef\", \"#9333ea\", \"#facc15\", \"#c084fc\", \"#a855f7\", \"#eab308\", \"#f97316\", \"#14b8a6\", \"#f59e0b\"];\n    const total = data.content.length;\n    const startTime = Date.now();    \n    \n    // VARIABLES  \n    // ---------\n    let pairColors: Record<string, string> = {};\n    let wrong: string[] = [];\n\n    function createMatchItem(text: string, type: 'left' | 'right', id: string): HTMLElement {\n        const item = document.createElement('div');\n\n        item.className = \"edu-matching__item\";\n        item.id = id;\n        item.setAttribute(\"data-id\", id);\n        item.setAttribute(\"data-type\", type);\n        item.setAttribute('role', 'button');\n\n        item.textContent = text;\n\n        item.addEventListener(\"click\", () => { handleItemClick(id, type); playSound('click'); });\n        item.addEventListener(\"keydown\", (e) => {            \n            if (e.key === \"Enter\" || e.key === \" \") {\n                e.preventDefault();\n                handleItemClick(id, type);                                \n            }\n        });\n\n        return item;\n    }\n\n    // boxes elements in the actual rendered exercise\n    function handleItemClick(id: string, type: 'left' | 'right'): void {\n\n        let left = undefined;\n        let right = undefined;\n\n        if (type === \"left\") {\n\n            if (state.pendingMatches[id]) {\n\n                left = document.getElementById(id);\n                right = document.getElementById(state.pendingMatches[id]);\n\n                delete state.pendingMatches[id];\n\n                right.style.backgroundColor = \"\";\n                left.style.backgroundColor = \"\";\n\n                state.selectedLeft = null;\n            } else {\n                state.selectedLeft = state.selectedLeft === id ? null : id;\n            }\n\n            state.selectedRight = null;\n\n        } else {\n            state.selectedRight = state.selectedRight === id ? null : id;\n        }\n\n        if (state.selectedLeft && state.selectedRight) {\n\n            // unselects matches pointed to a same right item\n            for (const [leftId, rightId] of Object.entries(state.pendingMatches)) {\n                if (rightId === state.selectedRight) {\n                    delete state.pendingMatches[leftId];\n\n                    const oldLeft = document.getElementById(leftId);\n                    const oldRight = document.getElementById(String(rightId));\n                    if (oldLeft) oldLeft.style.backgroundColor = \"\";\n                    if (oldRight) oldRight.style.backgroundColor = \"\";\n                }\n            }\n\n            state.pendingMatches[state.selectedLeft] = state.selectedRight;\n\n            const left = document.getElementById(state.selectedLeft);\n            const right = document.getElementById(state.selectedRight);\n\n            left.style.backgroundColor = pairColors[state.selectedLeft];\n            right.style.backgroundColor = pairColors[state.selectedLeft];\n\n            state.selectedLeft = null;\n            state.selectedRight = null;\n        }\n\n        updateDisplay();\n    }\n\n    function replayAnim(el) {\n        el.style.animation = \"\";\n        void el.offsetWidth;\n        el.style.animation = \"shake 0.3s ease\";\n    }\n\n    function disableAll() {\n        const left  = root.querySelector(\"#left-items\");\n        const right = root.querySelector(\"#right-items\");\n        left?.setAttribute(\"inert\", \"\");\n        right?.setAttribute(\"inert\", \"\");\n    }\n\n    function check(): void {\n        if (Object.keys(state.pendingMatches).length === 0) return;\n\n        const correctMatches: Array<{leftId: string, rightId: string}> = [];        \n\n        // Check each pending match\n        Object.entries(state.pendingMatches).forEach(([leftId, rightId]) => {\n            if (answers[leftId] === rightId) {\n                correctMatches.push({leftId, rightId});\n            } else {\n                wrong.push(leftId);\n            }\n        });\n\n        correctMatches.forEach(({leftId, rightId}) => {\n            state.matches[leftId] = rightId;\n            state.score++;\n        });\n\n        if (wrong.length > 0) {\n            wrong.forEach(leftId => {\n                const rightId = state.pendingMatches[leftId];\n\n                const leftEl = document.getElementById(leftId);\n                const rightEl = document.getElementById(rightId);\n\n                replayAnim(leftEl);\n                replayAnim(rightEl);\n\n                leftEl.style.backgroundColor = \"red\";\n                rightEl.style.backgroundColor = \"red\";\n            });\n        }\n\n        // Clear correct pending matches\n        correctMatches.forEach(({leftId}) => {\n            delete state.pendingMatches[leftId];\n        });\n\n        updateDisplay();\n        finish();\n    }\n\n    function updateDisplay(): void {\n        const leftItems = root.querySelectorAll('[data-type=\"left\"]');\n        const rightItems = root.querySelectorAll('[data-type=\"right\"]');\n\n        // this\n        leftItems.forEach(item => {\n            const id = item.getAttribute('data-id')!;\n            item.className = 'edu-matching__item';\n\n            if (state.matches[id]) {\n\n                // Confirmed match - show green\n                item.classList.add('edu-matching__item--confirmed');\n            } else if (state.pendingMatches[id]) {\n                item.classList.add('edu-matching__item--selected');\n            } else if (state.selectedLeft === id) {\n                item.classList.add('edu-matching__item--selected');\n            }\n        });\n\n        // and this\n        rightItems.forEach(item => {\n            const id = item.getAttribute('data-id')!;\n            item.className = 'edu-matching__item';\n\n            // Check if this item is in confirmed matches\n            const matchedEntry = Object.entries(state.matches).find(([, rightId]) => rightId === id);\n            if (matchedEntry) {\n                item.classList.add('edu-matching__item--confirmed');\n            } else {\n                // Check if this item is in pending matches\n                const pendingEntry = Object.entries(state.pendingMatches).find(([, rightId]) => rightId === id);\n                if (pendingEntry) {\n                    item.classList.add('edu-matching__item--selected');\n                } else if (state.selectedRight === id) {\n                    item.classList.add('edu-matching__item--selected');\n                }\n            }\n        });\n\n        // IS THE SAME\n\n        // Update buttons\n        const checkBtn = root.querySelector('#check-btn') as HTMLButtonElement;\n        if (checkBtn) {\n            checkBtn.disabled = !(Object.keys(state.pendingMatches).length === left.length);\n        }\n\n        // Update score\n        const scoreEl = root.querySelector('#score');\n        if (scoreEl) scoreEl.textContent = state.score.toString();\n    }\n\n    /**\n     * Replaces the base html data with the data from the metadata,\n     * and appends the proper elements to the right/left columns.\n     * This function also adds event listeners to the reset and finish buttons.\n     */\n    function init(): void  {\n\n        root.innerHTML = baseHTML\n        .replace(\"{{leftColumnName}}\", data.leftColumnName ?? \"Match These\")\n        .replace(\"{{rightColumnName}}\", data.rightColumnName ?? \"With These\");\n\n        const $checkBtn = root.querySelector(\"#check-btn\") as HTMLButtonElement;\n        if ($checkBtn) {\n            $checkBtn.addEventListener(\"click\", check);            \n            if (!options.checkBtn) $checkBtn.style.display = \"none\";\n        }\n\n        const leftContainer = root.querySelector(\"#left-items\");\n        if (leftContainer) {\n            left.forEach(item => {\n                pairColors[item] = colors.length > 0 ? colors.pop() : \"#1a1a\";  // here\n                leftContainer.appendChild(createMatchItem(item, 'left', item));\n            });\n        }\n\n        const rightContainer = root.querySelector(\"#right-items\");\n        if (rightContainer) {\n            rightWithDistractors.forEach(item => {\n                rightContainer.appendChild(createMatchItem(item, 'right', item));\n            });\n        }\n\n        updateDisplay();\n    }\n\n\n    /**\n     * We pass the result type (which also makes use of our global state object variable)\n     * to whichever resultHanlder the user wants to add to the component.\n     * Result is also shown in the component itself, which user should be able to disable (to-do)\n     */\n    function finish(): void {\n\n        disableAll();\n\n        const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n        const score = (state.score / total) * 100;\n\n        const result: Result = {\n            detail: {\n                correct: state.score,\n                total: total,\n                score: score                \n            },\n            timestamp: timestamp,\n            // well, at this point each component should have a custom winning screen honestly \n            winningEl: getResultEl(score, state.score, total, timestamp, wrong)\n        };\n\n        if (resultHandler) {\n            resultHandler(result);\n        }\n\n        const event = new CustomEvent('matching-complete', {\n            detail: result.detail,\n            bubbles: true\n        });\n        root.dispatchEvent(event);\n\n    }\n\n    // initialize and append component to passed parent element\n    init();\n    mount.appendChild(root);\n\n    return {\n        destroy(): void {\n            mount.removeChild(root);\n        },\n\n        check\n    };\n\n}\n\n// ===================================================================// \n//                           PARSER                         \n// ===================================================================//\n\n// parser -> parseMatching (imported)\n\nfunction matchingValidator(data: MatchData): boolean { return true; }\n\n\n// ===================================================================// \n//                           CONTRACT                         \n// ===================================================================//\n\nconst exs = `\napple = red;\npear = green;\ngrapes = purple;\nbanana = yellow;\n@EXTRA = [white | black]\n`;\n\nexport const MatchingContract: ContractType = {\n    name: \"Matching\",\n    description: \"...\",       \n    version: 1.1,\n    parserVersion: 1.0,\n\n    category: \"open\",\n    tags: [\"relation-mapping\", \"...\", \"binary-choice\"],\n\n    usage: [\"...\", \"...\"],\n    wrong: [\"...\", \"...\"],\n\n    // reminder to support naming the columns\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Matching Exercise\"},\n    implementation: { renderer: matchingPageRenderer, parser: parseMatching, validator: matchingValidator},\n\n    styleTag: 'edu-matching-style',\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "<section class=\"mtc-wheels-card\">\n    <div class=\"wheels\" id=\"wheelsWrap\">\n\n        <header>\n            <label class=\"lives\" id=\"mtc-wheels-lives\">\u2764\uFE0F\u2764\uFE0F\u2764\uFE0F</label>\n        </header>\n        \n        <!-- WHEEL OBJECT -->\n        <div class=\"mtc-wheels-obj\" id=\"wheelTop\">\n            <div class=\"mtc-wheels-controls\">\n            <button class=\"mtc-wheels-btn ghost\" id=\"prevTop\">\u2190 Prev</button>\n            </div>\n            <label id=\"topLabel\"></label>\n            <div class=\"mtc-wheels-controls\">\n            <button class=\"mtc-wheels-btn ghost\" id=\"nextTop\">Next \u2192</button>\n            </div>\n        </div>\n\n        <!-- CENTER BUTTON -->\n        <div class=\"mtc-wheels-center\">\n            <button id=\"wheelsCheckBtn\" class=\"mtc-wheels-btn\">Check</button>\n        </div>\n\n        <!-- WHEEL OBJECT -->\n        <div class=\"mtc-wheels-obj\" id=\"wheelBottom\">\n            <div class=\"mtc-wheels-controls\">\n            <button class=\"mtc-wheels-btn ghost\" id=\"prevBottom\">\u2190 Prev</button>\n            </div>\n            <label id=\"bottomLabel\"></label>\n            <div class=\"mtc-wheels-controls\">\n            <button class=\"mtc-wheels-btn ghost\" id=\"nextBottom\">Next \u2192</button>\n            </div>\n        </div>\n\n    </div>\n\n    <!-- PROGRESS BAR -->\n    <div class=\"mtc-wheels-progress\">\n        <div class=\"mtc-wheels-bar\" style=\"flex:1\"><i id=\"barFill\"></i></div>\n    </div>\n    \n    <div class=\"mtc-wheels-sep\"></div>\n\n    <!-- CORRECT  MATCHES INDICATOR -->\n    <ul id=\"solvedList\" class=\"mtc-wheels-list\"></ul>\n    \n</section>\n\n", ".mtc-wheels-wrap {    \n    background-image: url('https://media.licdn.com/dms/image/v2/D5612AQFZcZCOD6olCw/article-cover_image-shrink_720_1280/article-cover_image-shrink_720_1280/0/1700549159934?e=2147483647&v=beta&t=F30JEd72k-HOGg4ryPedv7FKad-gZSK5fXYWF5imL5A');  \n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-attachment: fixed;           \n}\n\n.mtc-wheels-card {\n    background-color: rgb(var(--edu-bg) / 0.95);    \n    box-shadow: 0 10px 30px rgba(0,0,0,.18);\n    color: rgb(var(--edu-ink));\n    padding:min(4.5vw,28px);    \n}\n\n/** ================== CUSTOM BUTTON ============================ **/\n\n.mtc-wheels-btn {\n    --b: 2px; --s: .5em; --c: rgb(var(--edu-first-accent));\n    \n    padding: calc(.55em + var(--s)) calc(1em + var(--s));\n    color: var(--c); \n    \n    background: conic-gradient(from 90deg at var(--b) var(--b), #0000 90deg, var(--c) 0)\n    var(--s) var(--s)/calc(100% - var(--b) - 2*var(--s)) calc(100% - var(--b) - 2*var(--s));\n    \n    border:0; \n    outline: var(--b) solid #0000; \n    outline-offset:.6em; \n    border-radius:12px;\n    transition:.25s linear, color 0s, background-color 0s;\n    font-weight:600; \n    cursor:pointer;\n    user-select:none; \n    -webkit-user-select:none;\n    touch-action:manipulation;\n    background-color: transparent;\n}\n.mtc-wheels-btn:hover, .mtc-wheels-btn:focus-visible{\n    --s:0px;\n    outline-color: var(--c);\n    outline-offset:.08em\n}\n.mtc-wheels-btn:active {\n    background: var(--c);\n    color:rgb(var(--edu-ink));\n}\n.mtc-wheels-btn.ghost{\n    color:rgb(var(--edu-ink));\n    --c: rgb(var(--edu-first-accent));\n    font-weight:500\n}\n.mtc-wheels-btn.ok {\n    --c: rgb(var(--edu-first-accent))\n}\n\n/** ============================================== **/\n\n.wheels{\n    display:grid; gap:16px;\n}\n\n.wheels header {\n    display: flex;\n    justify-content: right;\n    padding-right: 20px;\n    font-size: 1.6rem;\n    letter-spacing: 0.4rem;\n}\n\n.mtc-wheels-obj {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 12px;\n    padding: 14px;\n    border: 1px dashed rgb(var(--edu-first-accent));\n    background-color: rgb(var(--edu-card) / 0.90);\n    margin: 20px;\n}\n\n.mtc-wheels-obj label {\n    font-size:clamp(24px, 5vw, 46px);\n    font-weight:800;\n    letter-spacing:.2px;\n    line-height:1.1;\n    text-align:center;\n    min-width: 40%;\n    translate:0 0;\n    transition: transform .18s cubic-bezier(.2,.8,.2,1), opacity .18s cubic-bezier(.2,.8,.2,1);\n    will-change: transform, opacity;\n}\n\n.mtc-wheels-obj.spin label {\n    translate:0 .5rem;\n    opacity:.7;\n}\n.mtc-wheels-controls {\n    display:flex;\n    gap:10px;\n    align-items:center;\n}\n.mtc-wheels-center {\n    flex: 0 0 auto;\n    display: flex;\n    justify-content: center;\n    padding: 60px 0;\n}\n\n.mtc-wheels-center button {\n    font-size: 1.2rem;\n    padding: 1em 2em;\n}\n\n.mtc-wheels-progress{\n    display:flex;\n    align-items:center;\n    justify-content:space-between; \n    gap:10px;\n    margin-left:6px;\n    color: rgb(var(--edu-first-accent));\n}\n.mtc-wheels-bar{\n    height:8px;\n    background:color-mix(in oklch, rgb(var(--edu-ink)) 8%, transparent);\n    border-radius:999px;\n    overflow:hidden;\n    margin: 20px;\n}\n.mtc-wheels-bar > i {\n  display:block;\n  height:100%;\n  width:0%;\n  transition: width 300ms ease;\n  background: linear-gradient(\n    90deg,\n    rgb(var(--edu-first-accent)),\n    rgb(var(--edu-second-accent))\n  );\n}\n.mtc-wheels-list{\n    display:flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n    margin:10px;\n    padding:0;\n    list-style:none;    \n    gap:8px;    \n    /* justify-content:space-between; */\n}\n\n.mtc-wheels-chip {\n    border: 3px solid rgb(var(--edu-border));\n    padding: 10px;\n    flex: 0 0 auto;\n}\n\n.mtc-wheels-sep {\n  height: 1px;\n  margin: 16px 10px;\n  background: rgb(var(--edu-ink));\n  opacity: .7;\n}\n\n\n", "// WHEELS\n\nimport { injectStyle, shuffle, createSection } from \"../../../utils\";\nimport { Pair, MatchData } from '../types';\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\nimport { items, distractors, answerKey, parseMatching } from '../utils';\n\nimport baseHTML from \"./index.html\";\nimport baseCSS from \"./styles.css\";\n\n// ===================================================================// \n//                           RENDERER                       \n// ===================================================================//\nexport function matchingWheelsRenderer(\n\n    mount: HTMLElement,\n    data: MatchData,\n    options: RendererOptions = {}\n    \n): RendererHandle {\n\n    // BASE COMPONENT UTILITIES \n    // ---------------------\n    \n    const {        \n        shuffle: doShuffle = true,\n        allowRetry = true,\n        resultHandler,\n        ariaLabel = \"Matching Wheels\"\n    } = options;\n\n    const root = createSection(\"mtc-wheels-wrap\", ariaLabel);    \n    injectStyle(\"matching-wheels-style\", baseCSS);    \n\n    const $ = sel => root.querySelector(sel);\n\n    // CONSTANTS \n    // --------- \n    const answers = answerKey(data);\n    const startTime = Date.now();\n\n    // HTML ELEMENTS \n    // -------------    \n    let $topLabel: HTMLElement;\n    let $bottomLabel: HTMLElement;\n    let $lives: HTMLLabelElement;\n    let $solvedList: HTMLUListElement;\n    let $barFill: HTMLElement;\n\n    // VARIABLES  \n    // ---------    \n    let topPool = shuffle(items(data, \"left\"));\n    let bottomPool = shuffle([...items(data, \"right\"), ...(data.distractors || [])]);\n    let iT = 0;\n    let iB = 0;\n    let solved = [];        \n\n    function update() {\n        // disable them when finished instead\n        $topLabel.textContent = topPool[iT] ?? '-';\n        $bottomLabel.textContent = $topLabel.textContent === '-' ? '-' : bottomPool[iB];\n    }\n\n    function pushSolved(top, bottom) {\n        const li = document.createElement('li');\n        li.className = 'mtc-wheels-chip';\n        li.textContent = `${top} = ${bottom}`;\n        $solvedList.appendChild(li);\n    }\n\n    function correctState(isCorrect: boolean) {\n        const btn = $('#wheelsCheckBtn');\n        btn.classList.remove('ok');\n        if(isCorrect){\n            btn.classList.add('ok'); btn.textContent = '\u2713 Correct';\n            $barFill.style.width = (100 * (solved.length + 1) / data.content.length) + '%';\n        }\n        else   { btn.textContent = '\u2717 Try again'; }\n\n        if (topPool.length - 1 !== 0) {\n            setTimeout(()=>{ btn.textContent = 'Check'; btn.classList.remove('ok'); }, 900);\n        } else {\n            $barFill.style.background = \"#66ff00\";\n        }\n        // remove $lives\n    }\n\n    function disableAll() {\n        const container = $(\"#wheelsWrap\");\n        container?.setAttribute(\"inert\", \"\");\n    }\n\n    function check() {\n\n        const top = topPool[iT];\n        const bottom = bottomPool[iB];\n\n        const isCorrect: boolean = answers[topPool[iT]] === bottomPool[iB];\n\n        correctState(isCorrect);\n\n        if (isCorrect) {\n\n            solved.push(top);\n            pushSolved(topPool[iT], bottomPool[iB]);\n\n            // remove - no dealing with infinite matching lol\n            topPool = topPool.filter(x => x !== top);         \n\n            if (topPool.length === 0) {\n                finish();\n                return;\n            }\n            \n            iT = (iT) % topPool.length;\n            update();   \n\n        } else {            \n\n            $lives.textContent = $lives.textContent.replace(\"\u2764\uFE0F\", \"\uD83E\uDD0D\");            \n\n            root.classList.remove(\"shake-animation\");\n            void root.offsetWidth;\n            root.classList.add(\"shake-animation\");\n\n            if (!$lives.textContent.includes(\"\u2764\uFE0F\")) {\n                finish();\n            }\n\n        }\n    }\n\n    function init() {\n        const tpl = document.createElement('template');\n        tpl.innerHTML = baseHTML.trim();\n\n        root.replaceChildren(tpl.content);\n\n        $topLabel = $('#topLabel');\n        $topLabel.textContent = topPool[iT];        \n\n        $bottomLabel = $('#bottomLabel');\n        $bottomLabel.textContent = bottomPool[iB];\n\n        $lives = root.querySelector(\"#mtc-wheels-lives\") as HTMLLabelElement;        \n\n        $solvedList = $(\"#solvedList\");\n        $barFill = $('#barFill');\n\n        $('#prevTop').onclick = () => {\n            iT = (iT - 1 + topPool.length) % topPool.length; update();\n        };\n        $('#nextTop').onclick = () => {\n            iT = (iT + 1) % topPool.length; update();\n        };\n        $('#prevBottom').onclick = () => {\n            iB = (iB - 1 + bottomPool.length) % bottomPool.length; update();\n        };\n        $('#nextBottom').onclick = () =>{\n            iB = (iB + 1) % bottomPool.length; update();\n        };\n        $('#wheelsCheckBtn').onclick = check;\n    }\n\n    function finish() {\n\n        if (!$lives.textContent.includes(\"\u2764\uFE0F\")) {\n            disableAll();\n        } else root.classList.add(\"success-jump\");        \n\n        const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);        \n        const el = document.createElement('div');\n        el.textContent = 'You have finished!';\n                    \n        const result: Result = { \n        detail: { \n            correct: 0, \n            total: 0, \n            score: 0          \n        }, \n        timestamp: timestamp,\n        winningEl: el\n        };\n        \n        if (resultHandler) {\n            resultHandler(result);\n        }  \n\n    }\n\n    init();\n    mount.appendChild(root);\n    \n    return {\n        destroy(): void { mount.removeChild(root); },\n        check\n    }\n}\n\n// ===================================================================// \n//                           PARSER                        \n// ===================================================================//\n\n// parser -> parseMatching (imported)\n\nfunction matchingWheelsValidator(data: any): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT \n// ===================================================================//\n// This is just some random thing so git recognizes changes\nconst exs = `\napple \uD83C\uDF4E = red \uD83D\uDD34;\npear \uD83C\uDF50 = green \uD83D\uDFE2;\ngrapes \uD83C\uDF47 = purple \uD83D\uDFE3;  \nbanana \uD83C\uDF4C = yellow \uD83D\uDFE1;\n@EXTRA = [white \u26AA | black \u26AB]\n`;\n\nexport const MatchingWheelsContract: ContractType = {\n    name: \"Matching Wheels\",\n    description: \"Move objects in a rotating still in a top and bottom container to match them.\",        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"relational\",\n    tags: [\"relation\", \"binary-choice\", \"concept-tying\"],\n\n    usage: [\"...\", \"...\"],\n    wrong: [\"...\", \"...\"],\n\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Matching Wheels Exercise\" },\n    implementation: { renderer: matchingWheelsRenderer, parser: parseMatching, validator: matchingWheelsValidator },\n\n    styleTag: 'matching-wheels-style',\n    html: baseHTML,\n    css: baseCSS\n}\n\n", "\n<div class=\"tnf-wrap\">\n    <header>\n        <h2>True, False or Neutral?</h2>\n    </header>\n\n    <!--Append dynamically here\n\n    <div class=\"item\">\n        <span class=\"chip\">...</span>\n        <p class=\"prompt\">...</p>\n        <button class=\"choose\">Select</button>\n    </div>\n    -->\n    <main id=\"list\"></main>    \n\n    <footer>\n        <button id=\"checkAll\" class=\"tnf-check\">Check</button>\n    </footer>\n</tnf>\n\n<!-- Chooser -->\n<dialog id=\"picker\">\n    <form method=\"dialog\">\n        <label id=\"dialog-text\">Hello</label>\n        <hr>\n        <button value=\"T\">True</button>\n        <button value=\"N\">Neutral</button>\n        <button value=\"F\">False</button>\n    </form>\n</dialog>\n\n", ".tnf-root {\n  display: flex;\n  align-items: center;\n  justify-content: center;  \n  padding: 20px;\n}\n\n.tnf-wrap {\n    width: 100%;\n    max-width: 900px;\n    padding: 20px;    \n    background-color: rgb(var(--edu-card) / 0.95);    \n    box-shadow: 0 6px 20px rgba(0,0,0,.2);\n    transition: background 0.3s, border-color 0.3s;\n    border-radius: 12px;\n}\n\n.tnf-root header h2 {\n    color: rgb(var(--edu-ink));\n    margin: 0;\n    padding: 16px;\n    text-align: center;\n}\n\n.tnf-root main {\n    margin: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    gap: 16px;\n    padding: 14px;    \n    cursor: pointer;\n    background: rgb(var(--edu-card));\n    transition: transform .2s, background .3s, border-color .3s;\n    border-radius: 8px;\n    border: 2px solid transparent;\n}\n\n.item:nth-child(even){\n    background: rgb(var(--edu-muted));\n}\n\n.item:hover{\n    transform: scale(1.02);\n    border-color: rgb(var(--edu-first-accent) / 0.50);\n}\n\n.prompt{\n    font-size: 1.05rem;\n    letter-spacing: .03em;\n    flex: 1;\n    color: rgb(var(--edu-ink));\n}\n\n.choose, .check {\n    background: none;\n    color: rgb(var(--edu-ink));\n    cursor: pointer;\n    padding: 8px 12px;\n    border-radius: 10px;\n    border: 2px solid rgb(var(--edu-ink));\n    font-weight: 600;\n    transition: background .3s, transform .2s;\n}\n\n.choose:hover{\n    background: rgb(var(--edu-first-accent) / 0.50);\n    color: #fff;\n    transform: scale(1.05);\n}\n\n.tnf-check {\n    border: 1px dashed rgb(var(--edu-ink));\n    padding: 0.7rem;\n    font-size: 1.1rem;\n    background: none;\n    width: 90%;\n    color: rgb(var(--edu-ink));\n    border-radius: 8px;\n    cursor: pointer;\n}\n\n.tnf-check:hover {\n    background: rgb(var(--edu-first-accent) / 0.50);\n    color: rgb(var(--edu-ink));\n}\n\n.tnf-root footer {\n    display: flex;    \n    justify-content: center;    \n    padding: 10px;\n}\n\n.chip {\n    font-size: .9rem;\n    padding: .35rem .8rem;\n    border: 1px dashed rgb(var(--edu-ink));\n    background: rgb(var(--edu-card)); \n    min-width: 70px;\n    text-align: center;\n    transition: background .3s, color .3s;\n    color: rgb(var(--edu-ink));\n    border-radius: 6px;\n}\n\n.chip.t { background: rgb(var(--edu-success)); color: rgb(var(--edu-ink)); }\n.chip.n { background: var(--neutral); color: rgb(var(--edu-ink)); }\n.chip.f { background: rgb(var(--edu-error)); color: rgb(var(--edu-ink)); }\n\n.item.correct { \n    outline: 3px solid rgb(var(--edu-success)); \n    animation: pop 0.4s; \n    border: 2px solid rgb(var(--edu-success));\n}\n\n.item.wrong { \n    outline: 3px solid rgb(var(--edu-error)); \n    animation: shake 0.4s; \n    border: 2px solid rgb(var(--edu-error));\n}\n\n.tnf-root dialog {\n    padding: 24px;\n    background: rgb(var(--edu-card));\n    box-shadow: 0 10px 30px rgba(0,0,0,0.4);\n    animation: scaleIn .25s ease;\n    max-width: 360px;\n    margin: auto;\n    border: 1px solid rgb(var(--edu-first-accent) / 0.50);\n    color: rgb(var(--edu-ink));\n    border-radius: 12px;\n}\n\n.tnf-root dialog form button {\n    padding: 14px;\n    border: 2px solid rgb(var(--edu-ink));\n    border-radius: 12px;\n    font-weight: 600;\n    font-size: 1.1rem;\n    transition: background .3s, transform .2s;\n    background: rgb(var(--edu-muted));\n    color: rgb(var(--edu-ink));\n    cursor: pointer;\n}\n\n.tnf-root dialog form button:hover {\n    background: rgb(var(--edu-first-accent) / 0.50);\n    color: rgb(var(--edu-ink));\n    transform: scale(1.05);\n}\n\n.tnf-root dialog::backdrop {\n    background: rgb(var(--edu-bg) / 0.50);\n    backdrop-filter: blur(4px);\n}\n\n.tnf-root dialog form{\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.tnf-root dialog hr {\n    border: 1px solid rgb(var(--edu-first-accent));\n    width: 100%;\n}\n\n.msg{\n    text-align: center;\n    margin: 8px 0 0;\n    font-weight: 600;\n    animation: fadein .3s;\n}\n\n@media (max-width: 1024px) {\n    .tnf-root {\n        padding: 12px;\n    }\n\n    .tnf-wrap {\n        padding: 12px;\n        border-radius: 8px;\n    }\n\n    .tnf-root .item {\n        flex-direction: column;\n        align-items: stretch;\n        text-align: center;\n        padding: 16px;\n        gap: 10px;\n    }\n\n    .tnf-root .prompt {\n        font-size: 1.1rem;\n        font-weight: 500;\n    }\n\n    .tnf-root .chip {\n        font-size: 1rem;\n        padding: 0.5rem 1rem;\n        min-width: 100%;\n        align-self: center;\n    }\n\n    .tnf-root .choose {\n        width: 100%;\n        font-size: 1rem;\n        padding: 12px;\n    }\n\n    .tnf-root footer {\n        flex-direction: column;\n        gap: 12px;\n        align-items: stretch;\n    }\n\n    .tnf-root .tnf-check {\n        width: 100%;\n        padding: 14px;\n        font-size: 1.1rem;\n    }\n\n    .tnf-root header h2 {\n        font-size: 1.2rem;\n        text-align: center;\n    }\n}\n\n/* Animations */\n@keyframes fadein {\n    from { opacity: 0; transform: translateY(5px); }\n    to { opacity: 1; transform: translateY(0); }\n}\n\n@keyframes pop {\n    0% { transform: scale(0.95); }\n    50% { transform: scale(1.05); }\n    100% { transform: scale(1); }\n}\n\n@keyframes shake {\n    0%, 100% { transform: translateX(0); }\n    25% { transform: translateX(-4px); }\n    75% { transform: translateX(4px); }\n}\n\n@keyframes scaleIn {\n    from { transform: scale(0.9); opacity: 0; }\n    to { transform: scale(1); opacity: 1; }\n}\n\n@keyframes jump {\n    0%   { transform: translateY(0) rotate(0); }\n    25%  { transform: translateY(-50px) rotate(-5deg); }\n    35%  { transform: translateY(-55px) rotate(5deg); }\n    50%  { transform: translateY(0) rotate(0); }\n    65%  { transform: translateY(-25px) rotate(-3deg); }\n    75%  { transform: translateY(0) rotate(0); }\n    85%  { transform: translateY(-10px) rotate(2deg); }\n    100% { transform: translateY(0) rotate(0); }\n}\n\n.success-jump {\n    animation: jump 0.6s ease-out forwards;\n}\n\n.shake-animation {\n    animation: shake 0.6s ease-out forwards;\n}\n", "// TRUE/FALSE \n\nimport { injectStyle, shuffle, createSection, getResultEl } from \"../../../utils/utils\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\n\nimport baseHTML from \"./index.html\";\nimport baseCSS from \"./styles.css\";\n\ntype trueFalseData = Array<{\n    q: string,\n    a: string\n}>;\n\n// ===================================================================// \n//                           RENDERER                        \n// ===================================================================//\nexport function trueFalseRenderer(\n\n    mount: HTMLElement,\n    data: trueFalseData,\n    options: RendererOptions\n\n): RendererHandle {\n\n    // BASE COMPONENT DATA \n    // -------------------\n    const {        \n        shuffle: doShuffle = true,\n        allowRetry = false,\n        resultHandler,\n        ariaLabel = \"True False Exercise\",\n        checkBtn = false\n    } = options;\n\n    const root = createSection(\"tnf-root\", ariaLabel);\n    injectStyle(\"tnf-style\", baseCSS);    \n\n    \n    const questions = shuffle(data);\n\n    // variables     \n    let answerMap: Record<string, string> = {};\n    // prefilled array\n    let picks = Array(data.length).fill(null);    \n    let activeIndex = -1;\n\n    let correct = 0;    \n    let score = 0;\n    let wrong: string[] = [];    \n\n    // constants \n    const total = data.length;\n    const startTime = Date.now();\n\n    // elements   \n    let $list: HTMLElement;\n    let $picker: HTMLDialogElement;\n    let $checkAll: HTMLButtonElement;\n    let $dialogLabel: HTMLElement;             \n\n    // converters \n    const label = v => v === 'T' ? 'True' : v === 'F' ? 'False' : 'Neutral';    \n    const conversion = v =>\n    v === 'True' ? 'T':\n    v === 'False' ? 'F' :\n    v === 'Neutral' ? 'N' :\n    '';\n\n    function disableAll() { root.setAttribute(\"inert\", \"\"); };\n\n    // INITIALIZER FUNCTION \n    // --------------------\n    function init() {\n      root.innerHTML = baseHTML;\n\n      $list = root.querySelector(\"#list\");\n      $picker = root.querySelector(\"#picker\");\n      $checkAll = root.querySelector(\"#checkAll\");\n      if (!options.checkBtn) $checkAll.style.display = \"none\";\n      \n      $dialogLabel = root.querySelector(\"#dialog-text\");\n\n      $picker.addEventListener('close', () => {\n          const val = $picker.returnValue;\n          if (!val || activeIndex < 0) return;\n          picks[activeIndex] = val;\n          const row = $list.querySelector(`.item[data-index=\"${activeIndex}\"]`);\n          const chip = row.querySelector('.chip');\n          chip.className = 'chip ' + val.toLowerCase();\n          chip.textContent = label(val);\n          activeIndex = -1;\n      });\n\n      data.forEach(item => {\n          console.log(item);\n          answerMap[item.q] = item.a;\n      });\n\n      $checkAll.addEventListener(\"click\", () => {\n          check();\n      });\n\n      renderQuestions();\n\n    }\n\n    function renderQuestions() {\n\n        $list.innerHTML = '';\n        questions.forEach((row, i) => {\n\n            const el = document.createElement(\"div\");\n            el.className = \"item\";\n            el.dataset.index = i.toString();\n\n            const chip = document.createElement(\"span\");\n            chip.className = 'chip ' + (picks[i]?.toLowerCase() || '');\n            chip.textContent = picks[i] ?? 'Choose';\n\n            const prompt = document.createElement(\"p\");\n            prompt.className = \"prompt\";\n            prompt.textContent = row.q;\n\n            el.addEventListener('click', e => {\n                e.stopPropagation();\n                activeIndex = i;               \n                $dialogLabel.textContent = row.q; \n                $picker.showModal();\n            })\n\n            el.append(prompt, chip);\n            $list.appendChild(el);\n\n        });\n    }\n    \n    function check() {\n\n      const correctValue = 100 / total;\n\n      Array.from($list.children).forEach(child => {\n\n        const question: string = child.querySelector(\"p\").textContent;\n        const pick: string = conversion(child.querySelector(\"span\").textContent);        \n                \n        if (answerMap[question] === pick) {          \n          correct++;          \n          score += correctValue;\n          child.classList.add(\"correct\");          \n        } else {\n          child.classList.add(\"wrong\");          \n          wrong.push(question);\n        }                        \n      });\n      \n      if (correct === total) {\n          root.classList.add(\"success-jump\");\n      }\n\n      finish();      \n    }\n\n    function finish() {\n\n      const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);      \n\n      const result: Result = { \n        detail: { \n          correct: correct, \n          total: total, \n          score: score          \n        }, \n        timestamp: timestamp,\n        // ...\n        winningEl: getResultEl(score, correct, total, timestamp, wrong)\n      };\n\n      root.setAttribute(\"inert\", \"true\");\n      \n      if (resultHandler) {\n          resultHandler(result);\n      }\n\n    }\n\n    // initialize and mount to parent element \n    init();\n    mount.appendChild(root);\n\n    return { destroy(): void { mount.removeChild(root); }, check }\n}\n\n// ===================================================================// \n//                           PARSER                         \n// ===================================================================//\n\nexport function parseTrueFalse(\n    code: string\n): { ok: boolean, content?: trueFalseData, errors?: string[] } {\n\n    let data: trueFalseData = [];\n    let errors: string[] = [];    \n    \n    if (!code) {\n        errors.push(\"No code provided\");\n        return { ok: false, errors }; \n    }; \n\n    if (!code.includes(\";\")) {\n        errors.push(\"No ';' found in the code (which indicate matches separation)\");\n        return { ok: false, errors }; \n    }\n\n    const matches = code.trim().split(\";\").map(m => m.trim()).filter(Boolean);;\n\n    for (let i = 0; i < matches.length; i++) {\n\n        const match  = matches[i];\n        \n        if (!match.includes(\"=\") || !match.includes(\"::\")) {\n            errors.push(`Match ${i} (${match}) is invalid. No separator provided. `);\n        }\n\n        let sep = match.includes(\"=\") ? '=' : '::'; \n        const [left, rightRaw] = match.split(sep).map(p => p.trim());\n        const right = rightRaw.toUpperCase(); \n \n        // true | false | neutral support \n        const normalize = right[0].toUpperCase() === \"T\" ? 'T' :\n            right[0].toUpperCase() === \"F\" ? 'F' : 'N';          \n\n        data.push({\n            q: left,\n            a: normalize \n        });       \n    }    \n    \n    return { ok: true, content: data }; \n}\n\nexport function validateTrueFalse(data: trueFalseData): boolean {\n\n    let errors = [];\n    const validRightValues = [\"t\", \"f\", \"n\", \"true\", \"false\", \"neutral\"];\n\n    if (data.length < 4) {\n        errors.push(`\n            Exercise needs at least 4 valid matches, found ${data.length}\n        `);\n    }\n\n    for (let i = 0; i < data.length; i++) {\n\n        const match = data[i];\n        \n        // These is not handled in the parser\n        \n        if (match.q.length > 40) {\n            errors.push(`\n                The question for match ${i} is too long. This component is not suitable for \n                questions with a large length of characthers. \n            `); \n        }\n\n        if (match.q.length < 10) {\n            errors.push(`\n                The question for match ${i} is too short. Are you sure your sentence is a proper\n                statement user can determine validity from? \n            `); \n        }\n        \n        if (!validRightValues.includes(match.a)) {\n            errors.push(`Match ${i} (${match}) has not any valid values. \\nValid values: \\n${validRightValues}.`);                         \n        }\n        \n    }\n\n    // should probably be checked like \n    // const isValid = errors.length === 0; \n    return errors.length === 0; \n}\n\n// ===================================================================// \n//                           RENDERER                        \n// ===================================================================//\n\nconst exs = [\n`\nThe sun is really big = t;\nWater is good for humans = t;\nThe earth does not rotate = f;\nLove is good = n;\n`, \n`\nMoney is the most important thing in life :: neutral;\nGraduating from university ensures a good life :: false;\nNot having friends is a good thing :: neutral;\n`]\n\n// Helping others is generally good :: true;\n\nexport const TrueFalseContract: ContractType = {\n\n    name: \"True, False or Neutral\",\n    description: \"A nicer version of a true/false exercise, with cute styling and a neutral option.\",\n        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"logic\",\n    tags: [\"true/false\", \"neutral\", \"binary-choice\"],\n\n    usage: [\n        \"Non-subjective statements students must classify\",\n        \"Feedback collection from reading, audio, or pictures\",\n        \"Survey-style personal opinion questions\"\n    ],\n    wrong: [\n        \"Super long questions (use a reading exercise with TNF plugin instead)\",\n        \"Statements without clear truth value\",\n        \"Ignoring cultural or subjective context\"\n    ],\n\n    grammarExample: exs,\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"True False Exercise\" },\n    implementation: { renderer: trueFalseRenderer, parser: parseTrueFalse, validator: validateTrueFalse },\n    styleTag: 'tnf-style',\n    html: baseHTML,\n    css: baseCSS\n}\n\n", "<!-- We are creating the section in the script instead of\nhardcoding it here (as well as all our components)-->\n<div class='mtc-single-wrap'>\n\n<header class=\"navigation\">\n  <div class=\"mtc-single-dots\" id=\"mtc-single-dots\"></div>\n  <button class=\"hint\" id=\"mtc-single-hint-btn\" title=\"Show hint\">\uD83D\uDCA1</button>\n</header>\n\n<main class=\"layout\">\n  <aside class=\"answer-holder\">\n    <h4>Drop your answer</h4>\n    <div class=\"holder-dropzone\" id=\"dropzone\">\n      <div class=\"holder-content\" id=\"mtc-single-holder\"></div>\n    </div>\n  </aside>\n\n  <div class=\"question-container\">\n    <label class=\"question\" id=\"mtc-single-question\">\u2026</label>\n    <div class=\"hint-text\" id=\"mtc-single-hint\"></div>\n\n    <div class=\"bank\">\n      <h5>Answer bank</h5>\n      <div class=\"bank-grid\" id=\"mtc-single-bank\"></div>\n    </div>\n\n    <div class=\"nav-buttons\">\n      <button id=\"mtc-single-prevBtn\">Previous</button>\n      <button id=\"mtc-single-nextBtn\" class=\"primary\">Next</button>\n    </div>\n  </div>\n</main>\n\n<footer>\n  <button id=\"mtc-single-check\" class=\"mtc-single-check\">Check</button>\n</footer>\n\n</div>\n", ".mtc-single {\n  --border: color-mix(in oklab, rgb(var(--edu-ink)) 28%, transparent);\n\n  background-image: url('https://png.pngtree.com/thumb_back/fh260/background/20230620/pngtree-stacks-of-cardboard-boxes-in-isolation-a-3d-rendering-image_3646804.jpg');  \n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-attachment: fixed;\n\n}\n\n.mtc-single-wrap {    \n    background:rgb(var(--edu-card) / 0.90);\n    border:2px solid rgb(var(--edu-first-accent));\n    padding: 10px;\n}\n\n/* Top nav */\n.navigation{\n    display:flex;\n    align-items:center;\n    gap:14px;\n    padding:10px 4px 14px;\n    border-bottom:1.5px solid rgb(var(--edu-border));\n}\n\n.mtc-single-dots {display:flex;gap:12px}\n\n.circle{\n    width:14px;\n    aspect-ratio:1/1;\n    border: 1px solid rgb(var(--edu-ink));\n    border-radius:999px;\n    background:transparent;\n    cursor:pointer;\n}\n\n.circle:hover{\n    transform:scale(1.5);\n    background: color-mix(in oklab, rgb(var(--edu-ink)) 18%, transparent)\n}\n.circle.is-active{ background:rgb(var(--edu-first-accent)) }\n\n.hint{\n    margin-left:auto;\n    aspect-ratio: 1/1;\n    border-radius:99px;\n    border:1.5px solid rgb(var(--edu-first-accent));\n    background:transparent;\n    display:grid;\n    place-items:center;\n    cursor:pointer;    \n}\n\n/* ==== */\n.layout{\n    display:grid;\n    grid-template-columns:minmax(220px,260px) 1fr;\n    gap:18px;\n    padding-top:16px;\n}\n\n@media (max-width:780px){ .layout{ grid-template-columns:1fr } }\n\n/* Answer holder */\n.answer-holder{\n    padding:12px;\n    box-shadow: inset 0 1px 0 rgba(255,255,255,.04), 0 5px 12px rgba(0,0,0,.35);\n    display:flex;\n    flex-direction:column;\n}\n\n.answer-holder h4 {\n    margin:10px; font-size:13px; color:rgb(var(--edu-ink)); letter-spacing:.3px;\n}\n\n.holder-dropzone {\n    flex:1;\n    border:1.5px dashed rgb(var(--edu-first-accent));\n    border-radius:10px;\n    padding:10px;\n    display: grid;\n    place-items:center;\n}\n\n/* Question & hint */\n.question {\n    display:block;\n    font-weight:700;\n    margin:6px 0 10px;\n    font-size:clamp(1.6rem,3.4vw,2.2rem);\n    color: rgb(var(--edu-ink));\n}\n\n.hint-text {\n    max-height:0;\n    opacity:0;\n    overflow:hidden;\n    color: rgb(var(--edu-ink));\n    border-left: 4px solid rgb(var(--edu-ink));\n    margin:.25rem 0 1rem;\n    font-style:italic;\n    padding-left: 10px;\n    transition: max-height 1s ease, opacity .8s ease;\n}\n.hint-text.is-open{\n    max-height:140px; opacity:1;\n}\n\n/* Answer bank */\n.bank{ margin-top:.5rem; }\n.bank h5 { margin:10px 0 8px; color:rgb(var(--edu-ink)); }\n\n.bank-grid{5\n    display: grid;\n    grid-template-columns:repeat(auto-fit,minmax(140px,1fr));\n    gap:10px;\n}\n\n/* Tiles */\n.tile{\n    background: rgb(var(--edu-first-accent) / 0.50);\n    color:rgb(var(--edu-ink));\n    border:1.6px solid rgb(var(--edu-border));\n    border-radius:16px;\n    padding:10px 12px;\n    cursor:pointer;\n    user-select: none;\n    border-color: rgb(var(--edu-border));\n\n    transition:\n        transform .12s ease,\n        border-color .12s ease,\n        opacity .12s ease;\n    will-change: transform;\n}\n\n.tile.disabled {\n    color: rgb(var(--edu-ink));\n    border:1.6px solid rgb(var(--edu-border));\n    border-radius:16px;\n    padding:10px 12px;\n    cursor:pointer;\n    transform-style: preserve-3d;\n    user-select: none;\n    border-color: rgb(var(--edu-border));\n    transition:\n        transform .12s ease,\n        box-shadow .12s ease,\n        border-color .12s ease,\n        opacity .12s ease;\n    will-change: transform;\n}\n\n.tile:hover{\n    transform:translateY(-2px) scale(.94);\n}\n\n.tile:active{\n    transform:translateY(0) scale(.98)\n}\n\n.correct{\n    border-color: rgb(var(--edu-success));\n    box-shadow:0 0 0 2px color-mix(in oklab, rgb(var(--edu-success)) 35%, transparent)\n}\n.wrong{\n    border-color:rgb(var(--edu-error));\n    box-shadow:0 0 0 2px color-mix(in oklab, rgb(var(--edu-error)) 35%, transparent)\n}\n\n/* Bottom nav */\n.nav-buttons {\n    display:flex;\n    justify-content:space-between;\n    align-items:center;\n    gap:10px;\n    margin:14px;\n    padding-top:14px;\n    border-top:1.5px solid rgb(var(--edu-border))\n}\n.nav-buttons button {\n    padding:10px 14px;\n    border-radius:12px;\n    cursor:pointer;\n    background:transparent;\n    border:1.6px solid rgb(var(--edu-border));\n    color: rgb(var(--edu-ink));\n    transition:transform .12s ease, background .12s ease, border-color .12s ease;\n}\n\n.nav-buttons button:hover {\n    transform:translateY(-1px);\n    background:color-mix(in oklab, rgb(var(--edu-ink)) 10%, transparent)\n}\n.nav-buttons .primary {\n    background:rgb(var(--edu-first-accent));\n    border-color:rgb(var(--edu-first-accent)); \n    color: rgb(var(--edu-ink))\n}\n.nav-buttons .primary:disabled {\n    opacity:.5;\n    cursor:not-allowed\n}\n\nfooter {\n    display: grid;\n    place-items: center;\n    margin: 20px;\n    padding: 10px;\n}\n.mtc-single-check {\n    cursor: pointer;\n    width: 80%;\n    padding: 10px 12px;\n    background: none;\n    border: 1px solid rgb(var(--edu-border));\n    color: rgb(var(--edu-ink));\n}\n\n.mtc-single-check:hover {\n    background-color: rgb(var(--edu-first-accent) / 0.50);\n}\n\n/* Misc */\n@keyframes fadeSlide{\n    from{ opacity:0; transform:translateY(30px) }\n    to{ opacity:1; transform:none }\n}\n\n.animate-fadeSlide {\n    animation:fadeSlide .22s ease both;\n}\n\n/* Stagger-in animation */\n@keyframes tileIn {\n    from{ opacity:0; transform:translateY(6px) scale(.98) }\n    to{ opacity:1; transform:none }\n}\n", "// MATCHING SINGLE \n\nimport { injectStyle, shuffle, createSection, getResultEl } from \"../../../utils/utils\";\nimport { Pair, MatchData } from \"../types\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\nimport { items, distractors, answerKey, parseMatching } from \"../utils\";\n\nimport baseHTML from \"./index.html\";\nimport baseCSS from \"./styles.css\";\n\n// ===================================================================// \n//                           RENDERER                        \n// ===================================================================//\nexport function matchingSingleRenderer(\n\n    mount: HTMLElement,\n    data: MatchData,\n    options: RendererOptions = {}\n\n): RendererHandle {    \n    \n    // BASE COMPONENT DATA \n    // -------------------\n    const {        \n        shuffle: doShuffle = true,\n        allowRetry = true,\n        resultHandler,\n        ariaLabel = \"Matching Single Exercise\",\n        checkBtn = false\n    } = options;\n\n    const root = createSection(\"mtc-single\", ariaLabel);\n    injectStyle(\"mtc-single-style\", baseCSS); \n    \n    // CONSTANTS \n    // ---------------------\n    const resultMap = answerKey(data);\n    const questions = shuffle(items(data, \"left\"));\n    const answers = shuffle([...items(data, \"right\"), ...(data.distractors || [])]);\n    const startTime = Date.now();\n\n    // HTML ELEMENTS\n    // ---------------------\n    let $dots: HTMLDivElement;\n    let $hintBtn: HTMLButtonElement;\n    let $hintText: HTMLDivElement;\n    let $questionText: HTMLLabelElement;\n    let $bank: HTMLDivElement;\n    let $holder: HTMLDivElement;\n    let $dropzone: HTMLDivElement;\n    let $prev: HTMLButtonElement;\n    let $next: HTMLButtonElement;\n    let $checkBtn: HTMLButtonElement;\n\n    const els = {};\n    const picks: Record<string, HTMLButtonElement | null> = {};\n    questions.forEach(q => picks[q] = null);\n\n    let idx = 0;\n\n    let left:  Record<string, string> = {};\n    data.content.forEach(item => {\n        left[item.left] = item.right;\n    });;\n\n    const state = {\n        total: data.content.length,\n        score: 0,\n        incorrect: [],\n        correct: 0,\n        wrong: []                \n    }; \n    \n    // INITIALIZER FUNCTION \n    // ---------------------\n    function init() {        \n        \n        root.innerHTML = '';\n        root.innerHTML = baseHTML;\n\n        const $ = cn => root.querySelector(cn);\n\n        $dots = $(\"#mtc-single-dots\");\n        $hintBtn = $(\"#mtc-single-hint-btn\");\n        $hintText = $(\"#mtc-single-hint\");\n        $questionText = $(\"#mtc-single-question\");\n        $bank = $(\"#mtc-single-bank\");\n        $holder = $(\"#mtc-single-holder\");\n        $prev = $(\"#mtc-single-prevBtn\");;\n        $next = $(\"#mtc-single-nextBtn\");\n        $checkBtn = $(\"#mtc-single-check\");\n        if (!options.checkBtn) $checkBtn.style.display = \"none\";\n\n        $hintText.textContent = 'Yahir was here';\n\n        // click events\n        $checkBtn.addEventListener(\"click\", () => check());\n\n        $hintBtn.addEventListener(\"click\", () => {\n            $hintText.classList.toggle(\"is-open\");\n        })\n\n        $prev.addEventListener(\"click\", () => {\n            staggerAnimation();\n            if (idx > 0) { idx--; updateDisplay(); }\n            updateHolder();\n        });\n\n        $next.addEventListener(\"click\", () => {\n            staggerAnimation();\n            if (idx < questions.length - 1) { idx++; updateDisplay(); }\n            updateHolder();\n        });\n\n        $holder.addEventListener(\"click\", () => {\n            const child = $holder.firstElementChild as HTMLButtonElement | null;\n            if (child === null) return;\n            $bank.appendChild(child);\n            picks[questions[idx]] = null;\n            updateHolder();\n        });\n        \n        updateDisplay();\n    }\n\n    /**\n     * Supposed to pick up these:\n     * @right = countries;\n     * @left = capitals;\n     */\n    function getColumnNames(code: string) {\n        const leftRe: RegExp = /@left\\s*(?:=|::)\\s*\\[a-Z\\]/; \n        const rightRe: RegExp = /@right\\s*(?:=|::)\\s*\\[a-Z\\]/; \n\n        const mLeft = Array.from(code.matchAll(leftRe), m => m[1]);\n        const mRight = Array.from(code.matchAll(rightRe), m => m[1]);\n    }\n\n    function updateHolder() {\n        $holder.innerHTML = '';\n        const el = picks[questions[idx]];\n        if (el === undefined || el === null) return;\n        $holder.appendChild(el);\n    }\n\n    function createAnswer(text: string): HTMLButtonElement {\n    \n        const b = document.createElement(\"button\");\n        b.className = \"tile\";\n        b.type = \"button\";\n        b.textContent = text;\n        b.dataset.value = text;\n\n        b.addEventListener(\"click\", () => {\n            picks[questions[idx]] = b;\n\n            // returnin' back those buttons placed in the holda' if any\n            if ($holder.children.length > 0) {\n                $bank.append($holder.firstElementChild);\n            }\n\n            updateHolder();\n        });\n\n        return b;\n    }\n\n    function renderNavigation(): void {\n        $dots.innerHTML = '';\n        questions.forEach((_, i) => {\n            const el = document.createElement(\"button\");\n            el.className = \"circle\" + (i===idx ? \" is-active\": \"\");\n            el.title = `Go to question ${i+1}`;\n            el.addEventListener(\"click\", () => { idx=i, updateDisplay(); });\n            $dots.appendChild(el);\n        })\n    }\n\n    function updateDisplay() {\n\n        renderNavigation();\n        const isLast =  idx === questions.length-1;\n\n        // current question\n        const q = questions[idx];\n        $questionText.textContent = q;\n\n        $hintText.textContent = left[questions[idx]] || \"No hints :(\";\n        $hintText.classList.remove(\"is-open\");\n\n        $prev.disabled = idx === 0;\n        $next.textContent = isLast ? 'Finish' : 'Next';\n\n        $bank.innerHTML = '';\n        answers.forEach(i => {\n            const picksList = Object.values(picks)\n            .map(btn => btn?.textContent ?? null)\n            .filter((t): t is string => t !== null);\n\n            // nope... not allowing to resent to all possible answers\n            if (picksList.includes(i)) return;\n            const ans = createAnswer(i);\n            $bank.appendChild(ans);\n        });\n\n        // must add this class in the css\n        if (isLast) $next.classList.toggle(\".check\");\n\n    }\n\n    function staggerAnimation() {\n        $questionText.classList.remove(\"animate-fadeSlide\");\n        void $questionText.offsetWidth;\n        $questionText.classList.add(\"animate-fadeSlide\");\n\n        // fade-in one by one animation for tiles\n    }\n    \n    // CHECK FUNCTION \n    // ---------------------\n    function check() {        \n\n        const correctVal = 100 / state.total;\n\n        questions.forEach(i => {\n\n            const q = i;\n            let btn: HTMLButtonElement;\n            let a: string;\n            \n            if (picks[q]) {\n                btn = picks[q];\n                a = btn.textContent;\n            } else return;            \n                    \n            if (resultMap[q] === a) {\n                btn.classList.remove(\"correct\");\n                void btn.offsetWidth;\n                btn.classList.add(\"correct\");\n\n                state.score += correctVal;\n                state.correct++;\n            } else {\n\n                btn.classList.remove(\"wrong\");\n                void btn.offsetWidth;\n                btn.classList.add(\"wrong\");\n                state.wrong.push(a);\n            }\n        });\n\n        finish();\n    }\n\n    // RESULT HANDLER BRIDGE\n    // ---------------------\n    function finish() {\n        \n        const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);        \n                \n        const result: Result = { \n            detail: { \n                correct: state.correct, \n                total: state.total, \n                score: state.score          \n            }, \n            timestamp: timestamp,\n            winningEl: getResultEl(state.score, state.correct, state.total, timestamp, state.wrong)\n        };\n\n        $bank.setAttribute(\"inert\", \"\");\n        $checkBtn.setAttribute(\"inert\", \"\");\n        \n        if (resultHandler) {\n            resultHandler(result);\n        }\n        \n    }\n\n    // Initialize and mount to parent element \n    // --------------------------------------    \n    init();    \n    mount.appendChild(root);\n    return { destroy(): void {  mount.removeChild(root) }, check }\n}\n\n// ===================================================================// \n//                           PARSER                        \n// ===================================================================//\n\nexport function validateMatchingSingle(data: {}): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT                         \n// ===================================================================//\n\nconst exs = `\nIt's the most famous fruit in the world = apple;\n\nA lot of small circles, usually purple = grapes;\n\nA tree + the other red fruit = pineapple;\n\n5 letters. Sweet and kinda small, usually yellow = mango;\n\n@EXTRA = [banana | orange]\n`;\n\nexport const MatchingSingleContract: ContractType = {\n    name: \"Matching Single\",\n    description: \"Exploring questions and assigning answers with a single available pool of options.\",    \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"relational\",\n    tags: [\"relation\", \"binary-choice\", \"concept-tying\"],\n\n    usage: [ \"...\", \"...\" ],\n    wrong: [ \"...\", \"...\"],\n\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"True False Exercise\" },\n    implementation: { renderer: matchingSingleRenderer, parser: parseMatching, validator: validateMatchingSingle },\n\n    styleTag: 'mtc-single-style',\n    html: baseHTML,\n    css: baseCSS\n}\n\n", "<div class='concepts-wrap'>\n  <header>\n    <h4 id=\"conceptsTitle\">Define the Concepts</h4>\n    <span>4/4</span>\n  </header>\n  <hr>\n  <main id=\"conceptsContainer\"></main>\n  <hr>\n  <footer>\n    <button type=\"button\" class=\"concepts-btn\" id=\"conceptsCheck\">Check your Answers</button>\n  </footer>\n</div>\n", ".concepts-root {\n\n    \n}\n\n.concepts-wrap {\n    padding: 20px;\n    border: 4px solid rgb(var(--edu-bg));    \n    background: rgb(var(--edu-bg) / 0.98);\n    box-shadow: 0 6px 18px rgba(0,0,0,.15);      \n}\n\n.concepts-wrap hr {\n    border: 1px solid rgb(var(--edu-border));\n}\n\n.concepts-wrap header {\n    display: flex;\n    justify-content: space-between; \n    color: rgb(var(--edu-ink))\n}\n\n.concepts-wrap footer {\n    display: flex;    \n    margin: 10px 0;\n}\n\n.concepts-wrap h4 {\n    margin-left: 10px;\n    color: rgb(var(--edu-ink));\n    font-size: 0.95rem;\n}\n\n.concepts-btn {\n    width: 100%;\n    background: none;    \n    border: 1px solid rgb(var(--edu-border));\n    cursor: pointer;\n    padding: 8px 16px;\n    font-size: 1rem;\n    font-weight: 300;\n    color: rgb(var(--edu-first-accent));\n    transition: background .2s, transform .2s;\n}\n\n.concepts-btn:hover {\n    background-color: rgb(var(--edu-first-accent));\n    color: rgb(var(--edu-inverted-ink));\n    transform: scale(1.05);\n}\n\n.concepts-container {   \n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin: 10px;    \n    padding: 10px 14px;\n    transition: border .1s ease;\n}\n\n.concepts-container:hover {   \n    background: rgb(var(--edu-first-accent) / 0.50);\n}\n\n.concepts-correct {\n    border: 3px solid rgb(var(--edu-success));\n}\n\n.concepts-incorrect {\n    border: 3px solid rgb(var(--edu-error));\n}\n\n/* Main index span */\n.concepts-container span {\n    margin-right: 10px;\n    width: 34px;\n    height: 34px;\n    border-radius: 50%;\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    background: rgb(var(--edu-first-accent));\n    color: rgb(var(--edu-inverted-ink));\n    font-size: .9rem;\n    font-weight: bold;\n    box-shadow: 0 2px 5px rgba(0,0,0,.2);\n}\n\n.concepts-container label {\n    flex: 1;\n    font-weight: 300;\n    letter-spacing: .08rem;\n    color: rgb(var(--edu-ink));\n}\n\n.concepts-container select {\n    font-size: 0.95rem;\n    font-weight: 300;\n    padding: 4px 8px;\n        \n    margin-left: 10px;\n    background: none;\n    border: 2px solid rgb(var(--edu-border));\n    border-radius: 6px;\n    color: rgb(var(--edu-ink));\n\n    background-color: rgb(var(--edu-card));\n}\n\n@media (max-width: 760px) {\n    .concepts-container {\n        flex-direction: column;\n        align-items: stretch;\n        text-align: center;\n    }\n\n    .concepts-container select {\n        margin: 10px auto 0;\n        width: 100%;\n    }\n}\n\n\n/* Jump animation */\n@keyframes jump {\n    0%   { transform: translateY(0) rotate(0); }\n    25%  { transform: translateY(-50px) rotate(-5deg); }\n    35%  { transform: translateY(-55px) rotate(5deg); }\n    50%  { transform: translateY(0) rotate(0); }\n    65%  { transform: translateY(-25px) rotate(-3deg); }\n    75%  { transform: translateY(0) rotate(0); }\n    85%  { transform: translateY(-10px) rotate(2deg); }\n    100% { transform: translateY(0) rotate(0); }\n}\n\n.concepts-success {\n    animation: jump 1s cubic-bezier(0.25, 0.8, 0.5, 1);\n}\n", "import {\n    injectStyle, shuffle, createSection, getResultEl\n} from \"../../../utils/utils\";\n\nimport {    \n  RendererOptions, RendererHandle, ContractType, Result\n} from '../../types';\n\nimport {\n    items, answerKey, parseMatching\n} from '../utils';\n\ntype Pair = {\n    left: string;\n    right: string;    \n}\n\ntype MatchData = {\n    content: Pair[];\n    distractors?: string[];\n    leftColumnName?: string;\n    rightColumnName?: string;\n}\n\nimport baseHTML from \"./index.html\";\nimport baseCSS from \"./styles.css\";\n\nexport function conceptsExerciseRenderer(\n    mount: HTMLElement,\n    data: MatchData,\n    options: RendererOptions = {}\n): RendererHandle {  \n\n    // base component data \n    const {        \n        shuffle: doShuffle = true,\n        allowRetry = true,\n        resultHandler,\n        ariaLabel = \"concept-definition\",\n        checkBtn = false\n    } = options;\n\n    const root = createSection(\"concepts-root\", ariaLabel);\n    injectStyle(\"edu-concepts-style\", baseCSS);    \n\n    // els \n    let $btn: HTMLButtonElement;\n    let $main: HTMLElement;\n    let $title: HTMLLabelElement;\n\n    // constants  \n    const answers = answerKey(data);\n    const left = shuffle(items(data, \"left\"));\n    const right = shuffle([...items(data, \"right\"), ...(data.distractors || [])]);\n    const total = data.content.length;\n    const startTime = Date.now();\n\n    // variables   \n    let correct = 0;      \n    let score = 0;\n    let wrong: string[] = [];        \n\n    function init() {\n      root.innerHTML = baseHTML;\n      $main = root.querySelector(\"#conceptsContainer\");\n      $btn = root.querySelector(\"#conceptsCheck\");\n\n      if (!options.checkBtn) $btn.style.display = \"none\";\n\n      for (let i = 0; i < left.length; i++) {        \n          $main.appendChild(createConceptSection(i, left[i], createSelect(right)));\n      }\n\n      $btn.addEventListener(\"click\", check);\n    }\n\n    function createSelect(options) {\n        const select = document.createElement(\"select\");\n        const defaultEl = document.createElement(\"option\");\n        defaultEl.textContent = \"\";\n        select.appendChild(defaultEl);\n        \n        for (const opt of options) {\n            const optEl = document.createElement(\"option\");\n            optEl.textContent = opt;\n            select.appendChild(optEl);\n        }\n        return select;\n    }\n\n    function createConceptSection(idx, labText, selectEl) {\n        const container = document.createElement(\"div\");\n        container.className = \"concepts-container\";\n        container.setAttribute(\"aria-label\", `q-${idx}`);\n\n        const conceptIdx = document.createElement(\"span\");\n        conceptIdx.textContent = idx + 1;\n\n        const lab = document.createElement(\"label\");\n        lab.id = `concepts-lab-${idx}`;\n        lab.textContent = labText;\n\n        container.append(conceptIdx, lab, selectEl);\n        return container;\n    }\n\n    function check() {      \n\n      const correctVal = 100 / total; \n\n      for (let i = 0; i < $main.children.length; i++) {\n\n          const child = $main.children[i];\n\n          const q = child.querySelector(\"label\").textContent;\n          const sel = child.querySelector(\"select\").value;\n\n          if (answers[q] === sel) {\n              correct++;\n              score += correctVal;\n              child.classList.add(\"concepts-correct\");\n          } else {\n              child.classList.add(\"concepts-incorrect\");\n              root.classList.add(\"concepts-incorrect\");\n              wrong.push(q);\n          }\n      }\n\n      if (correct === left.length) {\n          root.classList.remove(\"concepts-success\");\n          void root.offsetWidth;\n          root.classList.add(\"concepts-success\");\n      } \n\n      finish();\n    }\n\n    function finish() {        \n        \n        const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);        \n\n        const result: Result = { \n          detail: { \n            correct: correct, \n            total: total, \n            score: score          \n          }, \n          timestamp: timestamp,\n          // create a better showcase that takes an object (string, string[]) to detail\n          // wrong answers for each question instead \n          winningEl: getResultEl(score, correct, total, timestamp, wrong)\n        };\n\n        root.setAttribute(\"inert\", \"\");\n        \n        if (resultHandler) {\n            resultHandler(result);\n        }\n\n        const event = new CustomEvent('concept-exercise-complete', {\n            detail: \"Completed!\",\n            bubbles: true\n        });\n        \n        root.dispatchEvent(event);\n    }\n\n    init();\n    mount.append(root);\n    return {\n        destroy(): void {  mount.removeChild(root) },\n\n        check\n    }\n}\n\nfunction validateConceptsDefinition(data: any): boolean { return true; }\n\nexport const ConceptsDefinitionContract: ContractType = {\n    name: \"Concepts Defintion\",\n    description: \"In a matching-style way, place the right defition to the concepts.\",\n    \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"open\",\n    tags: [\"relation-mapping\", \"...\", \"binary-choice\"],\n\n    usage: [\n        \"...\",\n        \"...\",\n        \"...\"\n    ],\n    wrong: [\n        \"...\",\n        \"...\",\n        \"...\"\n    ],\n\n    grammarExample: [      \n        `\nMisinformation = Telling something that is false as if it was true;\n\nFraternity = The idea of union of man and fellowship of the people;\n\nDestroy = Riping something apart to make it non-functionable;\n\nIntelligence = Concept that represents intelectual capacity;\n\n@EXTRA = [State of deep sadness during long times | Hurting someone deeply];\n        `\n    ],\n\n    defaultOptions: {\n        shuffle: true,\n        allowRtry: false,\n        ariaLabel: \"Concepts Definition Exercise\"\n    },\n\n    implementation: {\n        renderer: conceptsExerciseRenderer,\n        parser: parseMatching,\n        validator: validateConceptsDefinition\n    },\n\n    styleTag: 'edu-concepts-style',\n\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "<div class='manual-wrap'>  \n  <header>    \n    <h2 id='manual-instruction'>None</h2>    \n    <h2 id=\"manual-counter\" aria-live=\"polite\" class='manual-counter'></h2>\n  </header>\n\n  <main id=\"manual-chips\" class=\"chips\" aria-label=\"Your words\">\n    <div id=\"manual-container-message\" style=\"display: flex; justify-content: center; width: 100%\">\n      <p style=\"align-self: center;\">Hey! No words for the moment \uD83D\uDE42</p>\n    </div>\n  </main>  \n  \n  <footer>\n    <div class=\"manual-footer-top\">\n      <input id=\"manual-input\" type=\"text\" placeholder=\"Enter word\u2026\" autocomplete=\"off\" />  \n      <button id=\"manual-add\">+</button>\n    </div>\n\n    <div id=\"manual-check-container\">      \n      <hr>\n      <button id=\"manual-check\">Check</button>\n    </div>\n  </footer>  \n</div>  \n", ".edu-manual {\n  --maxw:min(100%, 720px);\n  \n  background-image: url('https://promova.com/_next/image?url=https%3A%2F%2Fpromova.com%2Fcontent%2Fdays_of_the_week_in_chinese_b0bfc416b0.png&w=1920&q=75&dpl=dpl_9gd2o8tjy6xfifwZT6VFAnGNRiow');  \n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center center;\n  background-attachment: fixed;\n\n  height: 80dvh;\n}\n\n.manual-wrap { \n  display: flex;\n  height: 80dvh;\n  padding:24px;     \n  background-color: rgb(var(--edu-bg) / 0.95);      \n  color:rgb(var(--edu-ink));   \n  font:500 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;     \n  flex-direction: column;\n  gap: 12px;\n}\n\n.manual-wrap header {  \n  display:flex;\n  justify-content: space-between;\n}\n\n.manual-wrap h2 { margin:0; font-size:1.90rem; background: rgb(var(--edu-bg) / 0.40); padding: 5px; border-radius: 10px;}\n.manual-wrap .manual-counter { align-self: center; margin:0; font-size:0.95rem; color: rgb(var(--edu-first-accent)); }\n\n.manual-wrap .chips {\n  min-height:60%;\n  padding:10px;\n  display:flex;\n  flex-wrap:wrap;\n  gap:10px;\n  border:1px solid rgb(var(--edu-border));\n  border-radius:var(--edu-radius);\n  background:rgb(var(--edu-card) / 0.90);\n  box-shadow:rgb(var(--edu-shadow));\n  overflow:auto;\n  scroll-snap-type:x proximity;\n}\n.manual-wrap .chips::-webkit-scrollbar{ height:10px }\n.manual-wrap .chips::-webkit-scrollbar-thumb{ background:#cbd5e1; border-radius:10px }\n\n.manual-wrap .chip {\n  scroll-snap-align:start;\n  display:inline-flex;\n  align-items:center;\n  gap:8px;\n  padding:8px 12px;\n  background: rgb(var(--edu-card));  \n  border:1px solid rgb(var(--edu-border)); \n  border-radius: 15px;\n  /* box-shadow:0 6px 18px rgb(var(--edu-first-accent) / 0.20); */\n  font-size:14px;\n  white-space:nowrap;\n  animation:pop .15s ease;\n  cursor: pointer;\n}\n\n.manual-wrap .chip-span {\n  padding: 5px;\n  background-color: rgb(var(--edu-ink) / 0.10);\n  border-radius: 20px;\n}\n\n.manual-wrap .chip[data-state=\"correct\"] {\n  border:4px solid rgb(var(--edu-success));     \n}\n\n.manual-wrap .chip[data-state=\"wrong\"] {\n  border:4px solid rgb(var(--edu-error)); \n}\n\n.manual-wrap .chip::before {\n  content:\"\";\n  inline-size:8px; block-size:8px; border-radius:999px;\n  background:currentColor; opacity:.9;\n}\n.manual-wrap .chip button {\n  border:0; background:transparent; color:#64748b;\n  font-size:16px; line-height:1; padding:0 2px; cursor:pointer;\n}\n.manual-wrap .chip:hover{ transform:translateY(-1px) }\n\n.manual-wrap input {\n  padding:12px 14px;   \n  width: 100%;\n  align-self: center;\n  border:1px solid rgb(var(--edu-first-accent)); \n  background-color: rgb(var(--edu-card));  \n  color:rgb(var(--edu-ink));\n  margin: 10px;    \n}\n\n.manual-wrap input:focus {\n  outline:none; border-color:rgb(var(--edu-first-accent));\n  box-shadow:0 0 0 4px rgba(99,102,241,.15);\n}\n\n.manual-wrap footer { \n  display: flex; \n  flex-direction: column;  \n  align-items: center;\n}\n\n.manual-wrap .manual-footer-top {\n  display: flex;\n  justify-content: center;\n}\n\n#manual-add {\n  border-radius: 20px;\n  background: rgb(var(--edu-bg) / 0.20);\n}\n\n#manual-check-container {\n  display: grid;\n  justify-items: center;\n  width: 100%;\n}\n\n.manual-wrap footer button {\n  padding:12px 14px;   \n  border:1px solid rgb(var(--edu-first-accent)); \n  background:rgb(var(--edu-card) / 0.40); \n  color:rgb(var(--edu-ink));\n  font-weight: 600;\n  width: 40%;\n  margin: 10px;  \n}\n\n.manual-wrap hr {\n  width: 100%;  \n}\n\n.manual-wrap footer button { cursor:pointer; transition:transform .12s ease,border-color .12s ease }\n.manual-wrap footer button:hover{ transform:translateY(-1px); border-color:rgb(var(--edu-first-accent)) }\n\n@media (max-width:560px){\n  .manual-wrap{ padding:16px }\n  .manual-wrap header { display: block; }\n  .manual-wrap .controls{ grid-template-columns:1fr; }  \n}\n\n@keyframes pop{ from{opacity:0; transform:translateY(6px) scale(.96)} to{opacity:1; transform:none} }\n", "// MANUAL\n\nimport { injectStyle, createSection, getResultEl } from '../../utils/utils';\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../types';\n\nimport baseHTML from './index.html';\nimport baseCSS from './style.css';\n\ninterface ManualData {\n  $instruction: string;\n  words: string[]\n}\n\nconst styleTag = 'edu-manual-style';\n\n// ===================================================================// \n//                           RENDERER                        \n// ===================================================================//\nfunction manualExerciseRenderer(\n\n  mount: HTMLElement,\n  data: ManualData,\n  options: RendererOptions\n  \n): RendererHandle {\n\n  // BASE COMPONENT UTILITIES \n  // ------------------------\n  const {    \n    allowRetry = true, \n    resultHandler,\n    ariaLabel = 'Manual Exercise',\n    checkBtn = true\n  } = options;  \n\n  const root = createSection('edu-manual', ariaLabel);      \n  injectStyle(styleTag, baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n    r.querySelector<T>(sel);\n\n  // HTML ELEMENTS \n  // -------------\n  let $chips: HTMLElement; // section \n  let $input: HTMLInputElement;\n  let $addBtn: HTMLButtonElement;\n  let $checkBtn: HTMLButtonElement;\n  let $counter: HTMLElement; // small \n  let $instruction: HTMLElement;\n  let $containerMessage: HTMLParagraphElement;\n\n  // CONSTANTS \n  // ---------     \n  const total = data.words.length;\n  const startTime = Date.now();\n  \n  const palette: string[] = [\"#8b5cf6\",\"#d946ef\",\"#9333ea\",\"#facc15\",\"#c084fc\",\"#a855f7\",\"#eab308\",\"#f97316\",\"#14b8a6\",\"#f59e0b\"];\n  const answers: string[] = data.words;  \n\n  const escapeHtml = (s: string): string => { return s.replace(/[&<>\"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','\"':'&quot;',\"'\":'&#39;'}[m])); }  \n\n  // VARIABLES \n  // ---------   \n  let correct = 0;\n  let wrong: string[] = [];  \n  let isEmpty = true;\n\n  // INITIALIZER \n  // -----------   \n  function init() {\n    root.innerHTML = baseHTML; \n\n    // assign \n    $input = $('#manual-input');\n    $chips = $('#manual-chips') as HTMLElement;            \n    $addBtn = $('#manual-add');\n    $checkBtn = $('#manual-check');\n    $instruction = $('#manual-instruction');\n    $containerMessage = $(\"#manual-container-message\");    \n    $counter = $('#manual-counter');\n\n    const $btnContainer = $(\"#manual-check-container\") as HTMLElement;\n    if (!options.checkBtn) $btnContainer.style.display = \"none\";        \n\n    $instruction.textContent = data.$instruction ?? 'No Instruction';\n\n    /* event listeners */\n    $input.addEventListener('keydown', e => { if (e.key === 'Enter') addChip(); });    \n    $addBtn.addEventListener('click', addChip);\n    $checkBtn.addEventListener('click', check);    \n    $chips.addEventListener('click', (e) => {\n      const t = e.target;\n      if (!(t instanceof Element)) return;             \n      if (t.matches('button[data-x]')) { t.closest('.chip')?.remove(); updateCounter(); }            \n      // count coded-in p\n      if ($chips.children.length === 1) {        \n        isEmpty = true;\n        $containerMessage.style.display = \"flex\";\n      };\n    });\n    \n    updateCounter();\n  }\n\n  // ---------------------------\n  // RENDERER-SPECIFIC FUNCTIONS \n  // ---------------------------\n  \n  function updateCounter(): void {\n      // reduce coded-in p\n      $counter.textContent = `${$chips.children.length - 1}/${total} added`;\n  }    \n\n  /*\n   *\n   *\n   */\n  function addChip(): void {\n      \n    const raw = $input.value.trim();\n    if (!raw) return; // ->    \n    // avoid changing state before checking if word is empty \n    if (isEmpty) {\n      $containerMessage.style.display = \"none\";\n      isEmpty = false;\n    };\n    \n    if (($chips.children.length - 1) >= total) return pulse($input);\n\n    // const exists = [...$chips.children].some(ch => ch.dataset.value?.toLowerCase() === raw.toLowerCase());\n    const exists = Array.from($chips.children as HTMLCollectionOf<HTMLElement>)\n      .some(ch => ch.dataset.value?.toLowerCase() === raw.toLowerCase());\n      \n    if (exists) return pulse($input);\n\n    const chip = document.createElement('label');\n    chip.className = 'chip';\n    chip.dataset.value = raw;\n    chip.style.color = palette[Math.floor(Math.random()*palette.length)];\n    chip.innerHTML = `<span class=\"chip-span\">${escapeHtml(raw)}</span><button data-x aria-label=\"Remove\">\u2715</button>`;\n    $chips.appendChild(chip);\n    $input.value = '';\n    updateCounter();\n    chip.scrollIntoView({behavior:'smooth', inline:'end', block:'nearest'});\n  }\n\n  /* Fire animation utilility     \n   * I should try to create a more broad helper in the utils instead\n   */\n  function pulse(el) {\n    el.style.transition = 'box-shadow .15s ease';\n    el.style.boxShadow = '0 0 0 6px rgba(239,68,68,.25)';\n    setTimeout(() => el.style.boxShadow = 'none', 160);\n  }\n\n  // CHECK FUNCTION \n  // --------------\n  function check(): void {\n\n      const amount = $chips.children.length - 1;\n      \n      if (amount < total) {\n        $counter.textContent = `You are still missing ${total - amount} words`; \n        $counter.style.color = \"rgb(var(--edu-error))\";\n\n        root.classList.remove(\"shake-animation\");\n        void root.offsetWidth;\n        root.classList.add(\"shake-animation\");\n        \n        return;      \n      }\n    \n      [...$chips.children].forEach((child: HTMLElement, idx) => {\n        if (idx === 0) return; \n        const answer = child.textContent.slice(0, -1).toLowerCase();\n        const isCorrect = [...data.words.map(w => w.toLowerCase())].includes(answer);\n        child.dataset.state = isCorrect ? \"correct\" : \"wrong\";\n        if (isCorrect) correct++;\n        else wrong.push(answer);\n      });\n\n      const allCorrect = correct === total;\n      $counter.textContent = allCorrect ? \"Well done!\" : `Oops... ${correct}/${total}`;\n      $counter.style.color = allCorrect ? \"rgb(var(--edu-success))\" : \"rgb(var(--edu-error))\";\n    \n      root.setAttribute(\"inert\", \"\");\n      finish();\n  }  \n\n  // RESULT HANDLER BRIDGE\n  // ---------------------\n  function finish() {     \n      const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n      const score = (correct / total) * 100;\n                \n      const result: Result = { \n        detail: { correct: correct, total: total, score: score }, \n        timestamp: timestamp,\n        winningEl: getResultEl(score, correct, total, timestamp, wrong)\n      };\n      \n      if (resultHandler) { resultHandler(result); }\n  }\n\n  // Initialize and Mount \n  // --------------------\n  init();\n  mount.appendChild(root);  \n\n  return {\n    destroy(): void { mount.removeChild(root); },\n    check \n  }\n}\n\n// ===================================================================// \n//                           PARSER                        \n// ===================================================================//\n\nfunction parseManual(code: string) {  \n\n  const lines = code.split(\"\\n\").map(l => l.trim()).filter(Boolean);\n  let instruction = \"\";\n  const words: string[] = [];\n  for (const line of lines) {\n    if (line.startsWith(\"#\")) {\n      instruction = line.replace(/^#\\s*/, \"\");\n    } else {      \n      line.split(\";\")\n        .map(w => w.trim())\n        .filter(Boolean)\n        .forEach(w => words.push(w));\n    }\n  }  \n\n  return {ok: true, content: { instruction, words } };\n}\n\nfunction validateManual(data: ManualData): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT                         \n// ===================================================================//\n\nconst exs = [`\n# Enter the 7 days of the week\nMonday; Tuesday; Wednesday; Thursday; Friday; Saturday; Sunday;\n`];\n\nexport const ManualContract: ContractType = {\n    name: \"Manual\",\n    description: \"...\",        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"open\",\n    tags: [\"Manual Work\", \"...\", \"No help\"],\n\n    usage: [\"...\", \"...\"],\n    wrong: [\"...\", \"...\"],\n\n    grammarExample: [exs[0]],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Manual Input Exercise\" },\n    implementation: { renderer: manualExerciseRenderer, parser: parseManual, validator: validateManual },\n\n    styleTag: styleTag,  \n    html: baseHTML,\n    css: baseCSS\n}; \n", "<div class=\"blanks-single-card\">\n\n  <header class=\"top\">      \n    <div class=\"progress\" id=\"blanks-single-progress\">1 / 1</div>\n    <div style=\"display: flex; gap: 10px;\">\n      <label><i class=\"far fa-lightbulb\"></i>Hint </label>\n      <div class=\"instruction\" id=\"blanks-single-instruction\">Instruction</div>      \n    </div>\n  </header>\n\n  <main class=\"word\" id=\"blanks-single-word\"></main>\n\n  <footer>\t\n    <div class=\"blanks-single-nav\">          \n      <button id=\"blanks-single-prev\"><i class=\"far fa-hand-point-left\"></i></button>      \n      <button id=\"blanks-single-next\"><i class=\"far fa-hand-point-right\"></i></button>\n    </div>      \n\n    <div id=\"bls-check-container\">\n      <!-- Wasn't able to make it full-width in css for some reason -->\n      <hr>\n      <button id=\"bls-single-check\">Check <i class=\"fa-solid fa-check\"></i></button>\n    </div>\n  </footer>\n</div>\n\n", ".blanks-single {\n  background-image:url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSdGMmkyax8_nzanbfOGadHC03Nu_DqzJAQxQ&s');\n  font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;\n  color: rgb(var(--edu-ink));\n}\n\n.blanks-single-card {\n  border: 2px solid rgb(var(--edu-border));\n  background-color: rgb(var(--edu-card) / 0.98);\n  padding-top: 40%;\n  padding-bottom: 40%;  \n}\n\n/* Grid centers safely at all sizes */\n.blanks-single-card .top {\n  display: grid;\n  place-items: center;\n  gap: clamp(6px, 1.6vw, 12px);\n}\n\n.blanks-single-card .top label {\n  font-weight: 600;\n  align-content: center;\n  border: 2px dashed rgb(var(--edu-first-accent));\n  padding: 4px;\n  transform: rotate(-3deg);\n}\n\n/* Fluid type scales */\n.blanks-single-card .instruction { \n  font-weight: 600; \n  font-size: clamp(1.1rem, 3.6vw, 2rem); \n  line-height: 1.2;\n}\n.blanks-single-card .progress{ \n  opacity: .75; \n  font-size: clamp(1rem, 3.2vw, 1.8rem); \n}\n\n/* Word row */\n.blanks-single-card .word {\n  margin-block: clamp(20px, 8vw, 40px);\n  display: flex;\n  gap: clamp(.35rem, 1.5vw, .7rem);\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: center;\n}\n\n/* Letters scale and wrap nicely */\n.blanks-single-card .letter {\n  min-width: 2ch;\n  text-align: center;\n  font-weight: 800;\n  letter-spacing: .02em;\n  font-size: clamp(1.2rem, 4.2vw, 1.8rem);\n  color: rgb(var(--edu-ink));\n  border-bottom: 2px solid rgb(var(--edu-ink));\n}\n\n/* Component accent inheritance */\nletter-picker{ --accent-color: rgb(var(--edu-first-accent)); }\n\n/* Visual feedback using the component's ::part(display) */\nletter-picker[data-state=\"correct\"]::part(display) {\n  border-color: rgb(var(--edu-success)) !important;\n  box-shadow: 0 0 0 2px rgb(var(--edu-muted) / 0.50);\n}\nletter-picker[data-state=\"wrong\"]::part(display) {\n  border-color: rgb(var(--edu-error)) !important;\n  box-shadow: 0 0 0 2px rgb(var(--edu-muted));\n}\n\n/* Footer actions */\n.blanks-single-card footer {\n  margin-top: clamp(12px, 3vw, 20px);\n  display: grid;  \n  gap: clamp(6px, 2vw, 12px);  \n  justify-content: center;  \n}\n\n.blanks-single-card footer hr {\n  width: 100%;\n}\n\n#bls-check-container {\n  display: grid;\n  width: 100%;\n  align-items: center;\n}\n\n.blanks-single-card footer button {\n  border:1px solid rgb(var(--edu-border));\n  background: rgb(var(--edu-bg));\n  color: rgb(var(--edu-ink));\n  padding: clamp(8px, 1.8vw, 12px) clamp(10px, 2.5vw, 16px);\n  border-radius: 10px;\n  cursor: pointer;\n  font-weight: 600;\n  font-size: clamp(.9rem, 2.6vw, 1rem);\n}\n.blanks-single-card footer button:disabled { opacity:.45; cursor:not-allowed }\n\n/* ========== Medium screens ========== */\n@media (min-width: 520px) {\n  .blanks-single-card .top label { transform: rotate(-4deg); }\n}\n\n/* ========== Large screens ========== */\n@media (min-width: 900px) {\n  .blanks-single-wrap { padding: clamp(24px, 3vw, 36px); }\n  .blanks-single-card { padding: clamp(20px, 2.5vw, 32px); }\n}\n\n/* ========== Very narrow tweaks ========== */\n@media (max-width: 420px) {\n  .blanks-single-card .letter { min-width: 1.7ch; }\n}\n\n/* ========== Motion & contrast considerations ========== */\n@media (prefers-reduced-motion: reduce) {\n  .blanks-single-card .top label { transform: none; }\n}\n@media (prefers-contrast: more) {\n  .blanks-single-card .letter { border-bottom-width: 3px; }\n  .blanks-single-card footer button { border-width: 2px; }\n}\n\n", "// BLANKS SINGLE \n\nimport { injectStyle, createSection, getResultEl } from \"./../../../utils/utils\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';  \n\ntype BlanksSingleData = {\n  hint: string;\n  word: string;\n  blanks: number[];\n};\n\n// ===================================================================// \n//                           RENDERER                       \n// ===================================================================//\n\nfunction blanksSingleRenderer(\n  mount: HTMLElement,\n  data: BlanksSingleData[],\n  options: RendererOptions\n): RendererHandle {\n  \n  // BASE COMPONENT UTILITIES \n  // -------------------\n  \n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = 'Blanks Single Exercise',\n    checkBtn = false \n  } = options; \n\n  const root = createSection('blanks-single', ariaLabel);\n  injectStyle('edu-blanks-single-style', baseCSS);    \n  \n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n    r.querySelector<T>(sel);\n\n  // CONSTANTS \n  // ---------\n  \n  const total: number = data.length; \n  const startTime = Date.now();  \n\n  // HTML ELEMENTS \n  // -------------\n  \n  let $word: HTMLElement;\n  let $instruction: HTMLElement;\n  let $progress: HTMLElement;\n  let $prev: HTMLButtonElement;\n  let $next: HTMLButtonElement;\n  let $checkBtn: HTMLButtonElement;   \n\n  // VARIABLES\n  // ---------\n  \n  let state = {};    \n  let checked = new Set<number>();      \n  let idx = 0;\n  let slideMap = {};\n\n  let score = 0;\n  let correct = 0;  \n  let wrong: string[] = [];  \n\n  type SlideNode = HTMLElement;\n  const slideDom = new Map<number, SlideNode>();\n\n  // RENDERER FUNCTIONS \n  // ------------------\n  \n  function buildSlide(i: number): SlideNode {\n    const item: BlanksSingleData = data[i];\n    const answer = [...item.word];\n    const blanks = new Set(item.blanks || []);\n\n    const wrap = document.createElement('div'); // container for this slide\n    wrap.className = \"word\";\n\n    for (let pos = 1; pos <= answer.length; pos++) {\n      const ch = answer[pos - 1];\n\n      if (blanks.has(pos)) {\n        const lp = document.createElement('letter-picker') as HTMLElement;\n        lp.setAttribute('mode', 'box');\n        lp.setAttribute('placeholder', '\uD83D\uDCAC');\n        lp.dataset.pos = String(pos);\n        lp.id = `lp-${i}-${pos}`;\n\n        const saved = state[lp.id];\n        if (saved != null) lp.setAttribute('value', saved);\n\n        lp.addEventListener('change', () => {\n          updateState(lp.id); // persists the state map\n        });\n\n        wrap.append(lp);\n      } else {\n        const div = document.createElement('div');\n        div.className = 'letter';\n        div.textContent = ch;\n        wrap.append(div);\n      }\n    }\n\n    slideDom.set(i, wrap);\n    return wrap;\n  }\n\n  function renderSlide(i: number) {\n    const item: BlanksSingleData = data[i];\n\n    $instruction.textContent = item.hint;\n    $progress.innerHTML = `${i + 1} / <strong style=\"color: rgb(var(--edu-first-accent))\">${data.length}</strong>`;\n\n    const node = slideDom.get(i) ?? buildSlide(i);\n    $word.replaceChildren(node); // move the cached node; listeners preserved\n\n    $prev.disabled = (i === 0);\n    $next.disabled = (i === data.length - 1);\n    $checkBtn.disabled = !(i === data.length - 1);\n  }\n    \n  function updateState(id) {    \n    let val: string;    \n    const el = document.getElementById(id);    \n    val = el.getAttribute('value');\n    if (!val) return;\n\n    state[id] = val;           \n  }\n\n  // CHECK FUNCTION \n  // --------------\n\n  // still need to add logic to stop check in case there are non-completed blocks\n  function check() {    \n    // We could add a couple state variables to pass the word + wrong letters specifically\n    // in the result handler \n    data.forEach((item, i) => {             \n      \n      const word: string = item.word; \n      const blanks = new Set(item.blanks || []); // numbers\n      const r = slideDom.get(i) ?? null;           \n      if (!r) return;        \n\n      // for the scoring, we will divide for each word the amout of spot-on letters by the total of blanks.\n      // so for example, we get 4 good answers in 6 blanks, we do 4 / 6 which gives 0.66, which we then \n      // sum to the score. We always sum to the score a number between 0 to 1 for each word.\n      const all = blanks.size;          \n      let good = 0; \n      \n      let isCorrect = true;\n        \n      for (let pos of blanks) {                    \n      \n        const lp = r.querySelector<HTMLElement>(`#lp-${i}-${pos}`);          \n        if (!lp) continue;\n\n        const selected = lp.getAttribute('value')?.trim().toLowerCase();\n        if (!selected) { \n          alert('You still have blocks to fill up.'); \n          return; \n        } \n        \n        const expected = word[pos - 1].toLowerCase();\n        \n        lp.setAttribute(\"data-state\", selected === expected ? \"correct\" : \"wrong\");       \n\n        if (selected !== expected) isCorrect = false;          \n        else good++;\n        \n      }            \n      \n      if (!isCorrect) wrong.push(word);\n      else correct++;\n\n      score += good / all;      \n      \n      checked.add(i);\n    });               \n\n    finish();\n  }  \n\n  // INIT FUNCTION \n  // -------------\n\n  function init() {    \n      \n    root.innerHTML = baseHTML;    \n    \n    $word = $('#blanks-single-word');\n    $instruction = $('#blanks-single-instruction');\n    $progress = $('#blanks-single-progress');\n    $prev = $('#blanks-single-prev');\n    $next = $('#blanks-single-next');\n    $checkBtn = $('#bls-single-check');   \n    $checkBtn.disabled = true;        \n\n    // only add the event listener if we are going to use the button\n    if (!options.checkBtn) {\n      const $container = $(\"#bls-check-container\") as HTMLDivElement;\n      $container.style.display = \"none\";\n    } else $checkBtn.addEventListener('click', check);\n\n    $prev.addEventListener('click', () => { idx = Math.max(0, idx-1); renderSlide(idx); });\n    $next.addEventListener('click', () => { idx = Math.min(data.length-1, idx+1); renderSlide(idx); });    \n    \n    window.addEventListener('keydown', (e) => {\n      if (e.key === 'ArrowRight') { $next.click(); }\n      else if (e.key === 'ArrowLeft') { $prev.click(); }\n    });\n\n    renderSlide(idx);\n  }\n\n  // RESULT HANDLER BRIDGE\n  // ---------------------\n\n  function finish() {\n\n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n    // now, since the score is probably a number between 0 and the total number of \n    // blanks (let's say 4.7 from 6), we just divide 4.7 * 6 and multiply by 100.\n    score = (score / total) * 100;\n                  \n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n    \n    if (resultHandler) {\n        resultHandler(result);\n    }    \n\n   // allow only navigation, no correcting the exercise again \n   const container = $(\"#bls-check-container\");\n   container.setAttribute(\"inert\", \"\");\n  }\n\n  // Initialize and mount\n  // ---------------------\n\n  init();\n  mount.appendChild(root);\n\n  return {\n\n    destroy(): void { mount.removeChild(root); },\n\n    check\n  }\n\n}\n\n// ===================================================================// \n//                           PARSER and VALIDATOR                     \n// ===================================================================//\n\nfunction extractBlanks(raw: string): { word: string; blanks: number[] } {\n  const blanks: number[] = [];\n  let word = \"\";\n  let inBlank = false;\n  let outIdx = 0;\n\n  for (let i = 0; i < raw.length; i++) {\n    const ch = raw[i];\n    if (ch === \"[\") { inBlank = true; continue; }\n    if (ch === \"]\") { inBlank = false; continue; }    \n    word += ch;\n    if (inBlank) blanks.push(outIdx+1);\n    outIdx++;\n  }\n  return { word, blanks };\n}\n\n\nfunction blanksSingleParser(code: string) {\n  const data: BlanksSingleData[] = [];\n  // Matches: `# ...\\n...;` (semicolon optional)\n  const re = /#\\s*([^\\n]+?)\\s*\\n\\s*([^\\n;]+);?/g;\n  let m: RegExpExecArray | null;\n\n  while ((m = re.exec(code)) !== null) {\n    const hint = m[1].trim();\n    const rawWord = m[2].trim();\n    const { word, blanks } = extractBlanks(rawWord);\n    data.push({ hint, word, blanks });\n  }\n  return { ok: true, content: data };\n}\n\nfunction BlanksSingleValidator(data: BlanksSingleData): boolean { return true; }\n\n\n// ===================================================================// \n//                           CONTRACT                        \n// ===================================================================//\n\nconst exs = `\n# A day of the week... \nM[on]da[y];\n\n# A month of the year... \n[De]cem[ber];\n\n# A part of the day\n[Mor]n[ing];\n\n# Saturday and Sunday?\nWe[eken]d\n\n# 100% Frequency\n[Al]wa[ys];\n\n# The Cold Season \n[Winter]; \n`;\n\nexport const BlanksSingleContract: ContractType = {\n    name: \"Blanks Single\",\n    description: \"...\",        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"input\",\n    tags: [\"Complete\", \"...\", \"Missing Information\"],\n\n    usage: [ \"Vocabulary Practice\", \"Guessing Games\", \"Spelling Practice\", \"Single-Answer questions\"],\n    wrong: [ \"Multiple possible answers questions\"],\n\n    grammarExample: [exs],\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Blanks Single Exercise\" },\n    implementation: { renderer: blanksSingleRenderer, parser: blanksSingleParser, validator: BlanksSingleValidator },\n\n    styleTag: 'edu-blanks-single-style',\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "// parser.ts\n\nexport type ParseError = { pos: number; msg: string };\nexport type ParseResult = {\n  ok: boolean;\n  content?: { html: string; answerMap: Map<string, any> };\n  errors: ParseError[];\n};\n\nexport function createDSLParser() {\n\n  type Ctx = { elsCounter: number; answerMap: Map<string, any> };\n\n  // helpers (pure)\n  const splitPipes = (s: string) =>\n    s.split(\"|\").map(t => t.trim()).filter(Boolean);\n  const dedupe = <T,>(arr: T[]) => [...new Set(arr)];\n  function shuffle<T>(array: T[]): T[] {\n    let currentIndex = array.length, randomIndex: number;\n    while (currentIndex !== 0) {\n      randomIndex = Math.floor(Math.random() * currentIndex);\n      currentIndex--;\n      [array[currentIndex], array[randomIndex]] = [array[randomIndex], array[currentIndex]];\n    }\n    return array;\n  }\n\n  // grammar builders (close over ctx)\n  const buildGrammar = (ctx: Ctx) => {\n    function parseTX(content: string, pos: number): string {\n      const tokens = splitPipes(content);\n      if (tokens.length === 0 || tokens.some(t => !t)) {\n        throw new Error(`@tx: provide at least one non-empty answer. Pos ${pos}.`);\n      }\n      const answers = dedupe(tokens);\n      const id = `id-${ctx.elsCounter++}`;\n      ctx.answerMap.set(id, answers);\n      return `<input type=\"text\" id=\"${id}\" autocomplete=\"off\">`;\n    }\n\n    function parseNM(content: string, pos: number): string {\n      const tokens = splitPipes(content);\n      if (tokens.length === 0) throw new Error(`@nm: empty content. Pos ${pos}.`);\n\n      const values: number[] = [];\n      const ranges: Array<{ min: number; max: number }> = [];\n\n      for (const t of tokens) {\n        const m = t.match(/^\\s*(-?\\d+)\\s*(\\.\\.)\\s*(-?\\d+)\\s*$/);\n        if (m) {\n          const min = parseInt(m[1], 10);\n          const max = parseInt(m[3], 10);\n          if (Number.isNaN(min) || Number.isNaN(max)) {\n            throw new Error(`@nm: invalid range '${t}'. Pos ${pos}.`);\n          }\n          if (min > max) throw new Error(`@nm: range min > max in '${t}'. Pos ${pos}.`);\n          ranges.push({ min, max });\n        } else {\n          const n = Number(t.trim());\n          if (!Number.isInteger(n)) throw new Error(`@nm: '${t}' is not an integer. Pos ${pos}.`);\n          values.push(n);\n        }\n      }\n\n      const id = `id-${ctx.elsCounter++}`;\n      ctx.answerMap.set(id, { single: dedupe(values), ranges });\n      return `<input type=\"number\" id=\"${id}\">`;\n    }\n\n    function parseSL(content: string, pos: number): string {\n      const bracketMatches = [...content.matchAll(/\\[([^\\]]+)\\]/g)];\n      const correct = bracketMatches.flatMap(m => splitPipes(m[1]));\n      const cleaned = content.replace(/\\[|\\]/g, \"\");\n      const options = [\" \", ...shuffle(dedupe(splitPipes(cleaned)))];\n\n      if (options.length === 0) throw new Error(`@sl: provide at least one option. Pos ${pos}.`);\n      if (correct.length === 0) throw new Error(`@sl: mark correct option(s) in [brackets]. Pos ${pos}.`);\n      for (const c of correct) {\n        if (!options.includes(c)) throw new Error(`@sl: correct '${c}' not present among options. Pos ${pos}.`);\n      }\n\n      const id = `id-${ctx.elsCounter++}`;\n      ctx.answerMap.set(id, { correct, options: options.filter(o => !correct.includes(o)) });\n      const optsHTML = options.map(o => `<option>${o}</option>`).join(\"\");\n      return `<select id=\"${id}\">${optsHTML}</select>`;\n    }\n\n    function parseIMG(content: string, pos: number): string {\n      const [rawUrl, rawAlt] = splitPipes(content);\n      const url = (rawUrl ?? \"\").trim().replace(/^[\"']|[\"']$/g, \"\");\n      const altRaw = (rawAlt ?? \"image\").trim();\n      if (!url) throw new Error(`@img: missing URL. Pos ${pos}.`);\n      const ok = /^(https?:\\/\\/|data:image\\/[a-zA-Z]+;base64,)/.test(url);\n      if (!ok) throw new Error(`@img: invalid or unsupported URL '${url}'. Pos ${pos}.`);\n      const alt = altRaw.replace(/\"/g, \"&quot;\");\n      return `<img src=\"${url}\" alt=\"${alt}\">`;\n    }\n\n    return {\n      tx: parseTX,\n      nm: parseNM,\n      sl: parseSL,\n      img: parseIMG,\n    } as const;\n  };\n\n  // public parse\n  function parse(code: string): ParseResult {\n    const ctx: Ctx = { elsCounter: 0, answerMap: new Map<string, any>() };\n    const grammar = buildGrammar(ctx);\n\n    const errors: ParseError[] = [];\n    let i = 0;\n    let textBuf = \"\";\n\n    while (i < code.length) {\n      const ch = code[i];\n\n      if (ch === \"@\" && code[i + 1] === \"@\") { textBuf += \"@\"; i += 2; continue; }\n      if (ch !== \"@\") { textBuf += ch; i++; continue; }\n\n      const currentPos = i;\n      i++; // skip '@'\n\n      let fn = \"\";\n      while (i < code.length && /[a-z]/i.test(code[i])) fn += code[i++];\n      if (!fn) {\n        errors.push({ pos: currentPos, msg: \"Expected a function id after '@' (e.g., @tx, @nm, @sl).\" });\n        textBuf += \"@\";\n        continue;\n      }\n      if (code[i] !== \"(\") {\n        errors.push({ pos: currentPos, msg: `Expected '(' after @${fn.substring(0, 2)}.` });\n        textBuf += `@${fn}`;\n        continue;\n      }\n      i++; // skip '('\n\n      // read until ')'\n      let content = \"\";\n      let closed = false;\n      while (i < code.length) {\n        if (code[i] === \")\") { closed = true; i++; break; }\n        content += code[i++];\n      }\n      if (!closed) {\n        errors.push({ pos: currentPos, msg: `Unclosed parentheses for @${fn}(...).` });\n        textBuf += `@${fn}({$content})`;\n        continue;\n      }\n\n      const parser = (grammar as any)[fn];\n      if (!parser) {\n        errors.push({ pos: currentPos, msg: `Unknown input type '@${fn}'. Allowed: ${Object.keys(grammar).join(\", \")}.` });\n        textBuf += `@${fn}(${content})`;\n        continue;\n      }\n\n      try {\n        textBuf += parser(content.trim(), currentPos);\n      } catch (e: any) {\n        errors.push({ pos: currentPos, msg: String(e?.message ?? e) });\n        textBuf += `@${fn}(${content})`;\n      }\n    }\n\n    if (errors.length > 0) return { ok: false, errors };\n    return {\n      ok: true,\n      content: { html: textBuf.replace(/\\n/g, \"<br>\"), answerMap: ctx.answerMap },\n      errors,\n    };\n  }\n  \n  const validateData = (_data: any) => true;\n  \n  function checkAnswers(\n    answerMap: Map<string, any>,\n    parent: Document | HTMLElement = document\n  ) {\n    const details: Record<string, any> = {};\n    let total = 0, correct = 0;\n    const getEl = (id: string) => parent.querySelector<HTMLElement>(`#${id}`);\n\n    answerMap.forEach((spec, id) => {\n      total++;\n      const el = getEl(id);\n      if (!el) { details[id] = { ok: false, error: \"Element not found\" }; return; }\n\n      let ok = false, got: any;\n\n      if (Array.isArray(spec)) {\n        const v = (el as HTMLInputElement).value.trim();\n        got = v;\n        ok = spec.some(a => a.toLowerCase() === v.toLowerCase());\n        details[id] = { type: \"tx\", ok, expectedAnyOf: spec, got };\n      } else if (\"single\" in spec && \"ranges\" in spec) {\n        const v = Number((el as HTMLInputElement).value);\n        got = v;\n        const isInt = Number.isInteger(v);\n        const inSingles = isInt && spec.single.includes(v);\n        const inRanges = isInt && spec.ranges.some((r: any) => v >= r.min && v <= r.max);\n        ok = inSingles || inRanges;\n        details[id] = { type: \"nm\", ok, expected: spec, got };\n      } else if (\"correct\" in spec) {\n        const v = (el as HTMLSelectElement).value;\n        got = v;\n        ok = spec.correct.includes(v);\n        details[id] = { type: \"sl\", ok, expectedAnyOf: spec.correct, got };\n      } else {\n        details[id] = { ok: false, error: \"Unknown spec shape\" };\n      }\n\n      el.style.borderBottom = ok\n        ? \"2px solid color-mix(in oklab, rgb(var(--edu-success)) 45%, transparent)\"\n        : \"2px solid color-mix(in oklab, rgb(var(--edu-error)) 45%, transparent)\";\n\n      if (ok) correct++;\n    });\n\n    return { total, correct, details };\n  }\n\n  // optional test (isolated)\n  function test() {\n    const code = `\n      @img(https://picsum.photos/seed/market/640/360 | A bustling city market)\n\n      Saturday Morning at the Market\n\n      On a @tx(sunny | rainy) morning, Lina and Joel arrived at the old city market around @nm(7..9) AM.\n      They planned to buy @nm(2..4) kinds of produce and a small gift for their friend\u2019s birthday.\n\n      First, they stopped at a booth selling @sl([fresh fruits] | electronics | winter coats | phone cases).\n      Lina pointed at oranges and asked, \u201CAre these @tx(sweet | sour | fresh) today?\u201D\n      The vendor smiled and said, \u201CTry one!\u201D\n\n      After tasting, Joel decided to get @nm(3 | 5 | 7) oranges and @nm(1..2) pineapple(s).\n      They also compared two jars of jam:\n      - Label A: \u201CHarvest Blend \u2014 @tx(homemade | organic | imported)\u201D\n      - Label B: \u201CCity Classic \u2014 @tx(homemade | organic | imported)\u201D\n\n      @img(https://picsum.photos/seed/jam-stand/640/360 | Jam stand with glass jars)\n\n      Next, they browsed the craft aisle to pick a present.\n      They considered a bracelet, a notebook, and a mug. The notebook caught their eye because its cover read:\n      \u201C@@Make it happen.\u201D \n\n      At checkout, the clerk asked: \u201CPaper or @sl([reusable bag] | plastic bag | no bag)?\u201D\n      They paid exactly @nm(10 | 12 | 15..18) dollars (including a small discount) and left before @nm(10..11) o\u2019clock.\n\n      Back home, Joel typed a quick review:\n      \u201CThe market was @tx(clean | lively | crowded), prices were @tx(fair | high), and the vendors were @tx(kind | helpful).\u201D\n      They promised to return next @sl(Monday | [Saturday] | Thursday) to try new fruits and jam flavors.     \n    `;\n    return parse(code);\n  }\n\n  return {\n    parse,              // dslParser\n    checkAnswers,       // checkAnswers\n    validateData,       // validator\n    test                // testSystem\n  };\n}\n\n// ---------- usage ----------\n/*\nimport { createDSLParser } from \"./dsl-parser\";\n\nconst dsl = createDSLParser();\nconst result = dsl.parse(codeString);\nif (result.ok) {\n  const { html, answerMap } = result.content!;\n  // render html ...\n  const score = dsl.checkAnswers(answerMap, document);\n}\n*/\n\n", "<div id=\"blanks-reading-wrapper\">\n  <head>\n    <h2 id=\"blanks-reading-label\">Complete the reading</h2>\n  </head>\n\n  <main id=\"blanks-reading-container\"></main>\n  \n  <footer id=\"\">\n    <button id=\"blanks-reading-check\">Finish</button>\n  </footer>\n</div>\n", "/* =============== Notebook Card =============== */\n#blanks-reading-wrapper {\n\n  font-family: system-ui, Segoe UI, Roboto, sans-serif;\n  color: rgb(var(--edu-ink));\n  \n  background-color: rgb(var(--edu-bg));\n  background-size:\n    100% 100%, /* holes 1 */\n    100% 100%, /* holes 2 */\n    100% 100%, /* holes 3 */\n    100% 100%; /* rules */\n    \n  border: 1px solid rgb(var(--edu-border));\n \n  max-width: 760px;\n  margin: 24px auto;\n  padding: 20px 20px 16px 52px; /* left pad for gutter */\n  box-shadow: 0 10px 30px rgb(var(--edu-muted) / 0.25);\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n/* left gutter line */\n#blanks-reading-wrapper::before {\n  content: \"\";\n  position: absolute;\n  inset: 0 auto 0 40px;\n  width: 2px;\n  background: linear-gradient(\n    to bottom,\n    color-mix(in oklab, rgb(var(--edu-first-accent)) 65%, transparent),\n    color-mix(in oklab, rgb(var(--edu-first-accent)) 50%, transparent)\n  );\n  border-radius: 2px;\n}\n\n/* Header: notebook label tab */\n#blanks-reading-wrapper header {\n  padding-bottom: 8px;\n  border-bottom: 1px dashed color-mix(in oklab, rgb(var(--edu-ink)) 35%, transparent);\n}\n\n#blanks-reading-wrapper h2 {\n  margin: 0;\n  font-weight: 700;\n  font-size: 1.1rem;\n  letter-spacing: 0.2px;\n  display: inline-block;\n  padding: 6px 10px;\n\n  background: color-mix(in oklab, rgb(var(--edu-first-accent)) 16%, transparent);\n  box-shadow: inset 0 -2px 0 color-mix(in oklab, rgb(var(--edu-first-accent)) 28%, transparent);\n}\n\n/* Main content */\n#blanks-reading-container {\n  line-height: 1.9;\n  padding: 6px 0;\n}\n\n/* Footer */\n#blanks-reading-wrapper footer {\n  padding-top: 10px;\n  display: flex;\n  gap: 10px;\n  justify-content: flex-end;\n  border-top: 1px dashed color-mix(in oklab, rgb(var(--edu-ink)) 28%, transparent);\n}\n\n/* Button with accent */\n#blanks-reading-wrapper button {\n  background: color-mix(in oklab, rgb(var(--edu-first-accent)) 22%, rgb(var(--edu-bg)));\n  color: rgb(var(--edu-ink));\n  border: 1px solid color-mix(in oklab, rgb(var(--edu-first-accent)) 50%, rgb(var(--edu-border)));\n  border-radius: 10px;\n  padding: 8px 16px;\n  font-weight: 600;\n  cursor: pointer;\n  transition: transform .06s ease, filter .15s ease, box-shadow .15s ease;\n  box-shadow: 0 2px 0 color-mix(in oklab, rgb(var(--edu-first-accent)) 40%, transparent);\n}\n#blanks-reading-wrapper button:hover {\n  filter: brightness(1.03);\n}\n#blanks-reading-wrapper button:active {\n  transform: translateY(1px);\n}\n\n/* =============== Inline Exercise Paragraph =============== */\n.exercise-paragraph {\n  line-height: 2.1;                 /* airy like lines on paper */\n  font-size: 1.06rem;\n  color: rgb(var(--edu-ink));\n  background: rgb(var(--edu-card));          /* let ruled bg show through */    \n  padding: 14px 16px;\n  max-width: 720px;\n  position: relative;\n}\n\n/* Inputs blend like blanks on ruled paper */\n.exercise-paragraph input[type=\"text\"],\n.exercise-paragraph input[type=\"number\"],\n.exercise-paragraph select {\n  display: inline-block;\n  min-width: 7ch;\n  max-width: 22ch;\n  margin: 0 4px;\n  padding: 2px 4px 3px;\n  font: inherit;\n  color: rgb(var(--edu-ink));\n  background: transparent;\n  border: none;\n  border-bottom: 2px solid color-mix(in oklab, rgb(var(--edu-first-accent)) 45%, transparent);\n  outline: none;\n  vertical-align: baseline;\n  transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;\n}\n\n/* Focus = highlighted line */\n.exercise-paragraph input:focus,\n.exercise-paragraph select:focus {\n  border-bottom-color: rgb(var(--edu-first-accent));\n  box-shadow: 0 2px 0 -1px rgb(var(--edu-first-accent));\n  background: color-mix(in oklab, rgb(var(--edu-first-accent)) 10%, transparent);\n}\n\n/* Select arrow, notebooky */\n.exercise-paragraph select {\n  appearance: none;\n  padding-right: 1.5rem;\n  background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='18' height='18' viewBox='0 0 20 20' fill='%236b7280'><path d='M5 7l5 5 5-5'/></svg>\");\n  background-repeat: no-repeat;\n  background-position: right 0.15rem center;\n  background-size: 1rem;\n}\n\n/* Placeholder tone */\n.exercise-paragraph input::placeholder {\n  color: color-mix(in oklab, rgb(var(--edu-ink)) 40%, transparent);\n  font-style: italic;\n}\n\n.exercise-paragraph img {\n  display: block;\n  max-width: 100%;\n  margin: 14px auto;\n  border-radius: 10px;\n  border: 3px solid color-mix(in oklab, rgb(var(--edu-first-accent)) 45%, transparent);\n  box-shadow: 0 4px 12px rgba(0,0,0,0.18);\n  background: #fff;\n  transition: transform 0.2s ease, box-shadow 0.2s ease;\n}\n\n/* Hover pop effect */\n.exercise-paragraph img:hover {\n  transform: scale(1.015) rotate(-0.4deg);\n  box-shadow: 0 6px 18px rgba(0,0,0,0.25);\n}\n\n/* Small screens */\n@media (max-width: 520px) {\n  #blanks-reading-wrapper { padding-left: 46px; }\n  .exercise-paragraph { font-size: 1rem; }\n}\n\n", "// BLANKS READING \n\nimport { injectStyle, createSection, getResultEl } from \"./../../../utils/utils\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\n\nimport { createDSLParser } from \"../parser\";\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';\n\ntype BlanksReadingData = {\n  instruction?: string; \n  html: string;\n  answerMap: Map<string, any>;\n};\n\nconst dsl = createDSLParser();\n\nfunction blanksReadingRenderer(\n  mount: HTMLElement,\n  data: BlanksReadingData,\n  options: RendererOptions\n): RendererHandle {\n\n  // BASE COMPONENT UTILITIES \n  // -------------------\n   \n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = 'Blanks Reading Exercise'\n  } = options; \n\n  const root = createSection('blanks-reading', ariaLabel);\n  injectStyle('blanks-reading-style', baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n  r.querySelector<T>(sel);\n\n  // HTML ELEMENTS \n  // -------------------\n  \n  let $instruction: HTMLElement;\n  let $container: HTMLElement;  \n  let $finish: HTMLButtonElement;  \n\n  let $p: HTMLParagraphElement | null = document.createElement('p');;\n\n  // CONSTANTS \n  // -------------------\n  \n  const startTime = Date.now();  \n\n  // VARIABLES \n  // -------------------\n  \n  let total = 0;\n  let correct = 0;\n  let wrong: string[] = [];\n  let score = 0;\n\n  // INITIALIZER FUNCTION  \n  // -------------------\n    \n  function init() {    \n    root.innerHTML = baseHTML;\n            \n    $instruction = $(\"#blanks-reading-label\");\n    $container = $(\"#blanks-reading-container\");\n    $finish = $(\"#blanks-reading-check\");\n    \n    $p.className = 'exercise-paragraph';\n    $p.ariaLabel = ariaLabel;    \n    $p.innerHTML = data.html;           \n\n    $instruction.textContent = data.instruction ?? 'Complete the reading';\n    $finish.addEventListener('click', check);\n    $container.appendChild($p);    \n\n    console.log(total);\n    console.log(correct);\n  }\n\n  // CHECK FUNCTION  \n  // -------------------\n\n  function check() {\n    const r = dsl.checkAnswers(data.answerMap, root);\n\n    console.log(r.total);\n    console.log(r.correct);\n\n    total = r.total;\n    correct = r.correct;\n    const correctVal = 100 / total; \n\n    score += correctVal * correct;\n\n    Object.values(r.details).forEach(val => {            \n      if (!val.ok) wrong.push(val.got);      \n    });    \n\n    finish();\n  }\n\n  // RESULT HANDLER BRIDGE  \n  // -------------------\n\n  function finish() {        \n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);    \n              \n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n    \n    if (resultHandler) {\n        resultHandler(result);\n    }    \n\n    root.setAttribute(\"inert\", \"\");\n  }\n\n  // Initialize and mount\n  // ---------------------\n  \n  init();\n  mount.appendChild(root);\n\n  return {\n    destroy(): void { \n      mount.removeChild(root);                 \n    },\n    \n    check\n  }\n\n}\n\nfunction BlanksReadingValidator(data: BlanksReadingData): boolean { return true; }\n\nexport const BlanksReadingContract: ContractType = {\n    name: \"Blanks Reading\",\n    description: \"...\",\n        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"input\",\n    tags: [\"Complete\", \"...\", \"Missing Information\"],\n\n    usage: [\n        \"...\",\n        \"...\",\n        \"...\"\n    ],\n    wrong: [\n        \"...\",\n        \"...\",\n        \"...\"\n    ],\n\n    grammarExample: [\n      `\n@img(https://picsum.photos/seed/city/640/360 | A morning street)\n\nIt was a @tx(sunny | cloudy) morning when Anna left her apartment.  \nShe walked exactly @nm(200 | 250 | 300) meters to the caf\u00E9.\n\n@img(https://picsum.photos/seed/cafe/640/360 | Coffee shop)\n\nInside, she ordered a @sl([coffee] | tea | juice)  \nand sat by the window with her @tx(book).\n\nShe spent @nm(1..2) hours there,  \nfeeling @tx(relaxed | inspired | tired).\n                \n     `\n    ],\n\n    defaultOptions: {\n        shuffle: true,\n        allowRetry: false,\n        ariaLabel: \"Blanks Reading Exercise\"\n    },\n\n    implementation: {\n        renderer: blanksReadingRenderer,\n        parser: dsl.parse,\n        validator: dsl.validateData\n    },\n\n    styleTag: 'blanks-reading-style',\n\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "<div class=\"bm-wrap\">\n  <header class=\"bm-header\">\n    <h2 class=\"bm-title\" id=\"bm-title-id\">Title</h2>\n    <p class=\"bm-instruction\" id=\"bm-instruction\">Fill the blanks carefully and check your answers.</p>\n  </header>\n\n  <main class=\"bm-main\" id=\"bm-main-id\"></main>\n\n  <footer class=\"bm-footer\">\n    <button class=\"bm-btn\" id=\"bm-check-id\">Check</button>    \n  </footer>\n</div>\n\n\n", ".bm-wrap{max-width: 900px; margin: 24px auto; padding: 16px; display:grid; gap:16px}\n.bm-header{display:grid; gap:6px}\n.bm-title{margin:0; font-weight:800; letter-spacing:.2px}\n.bm-instruction{margin:0; opacity:.9; color: rgb(var(--edu-ink)); display:flex; align-items:center; gap:8px;}\n\n.bm-main {\n    display:grid; \n    gap:30px; \n    counter-reset: bm; \n    border: 10px dashed rgb(var(--edu-first-accent) / 0.20);\n    padding: 5%;\n}\n\n.bm-block{\n  margin-top: 5px;\n  position: relative;\n  border: 1px solid rgb(var(--edu-border));\n  padding: 18px 18px 20px 56px;\n  border-radius: 16px;\n  line-height: 1.95;\n  word-spacing: 10px;\n  transition: box-shadow .2s ease, transform .06s ease;\n}\n.bm-block:hover{ transform: translateY(-1px) }\n.bm-block:focus-within{ box-shadow: 0 0 0 2px rgb(var(--edu-border)/.30), 0 8px 28px rgba(0 0 0 / .14) }\n\n/* Number bubble */\n.bm-block::before{\n  counter-increment: bm;\n  content: counter(bm);\n  position:absolute; \n  left:14px; \n  top:50%; \n  translate:0 -50%;\n  width:28px; height:28px; display:grid; place-items:center;\n  font-weight:700; font-size:.9rem;\n  color: rgb(var(--edu-ink));\n  background: rgb(var(--edu-first-accent) / 0.40);\n  border-radius: 999px;\n  box-shadow: 0 2px 8px rgba(0 0 0 / .25);\n}\n\n/* Corner label (badge ribbon) */\n.bm-badge{\n  position: absolute; \n  top:-25px;\n  left:10px;\n  padding:6px 10px; \n  font-size:.72rem; \n  font-weight:700; \n  color: rgb(var(--edu-ink));\n  background: rgb(var(--edu-first-accent) / 0.20);\n  border: none;\n  box-shadow: 0 4px 16px rgba(0 0 0 / .25);\n  backdrop-filter: blur(6px);\n}\n\n/* Hint chip (glass) */\n.bm-hint{\n  display:inline-flex; align-items:center; gap:6px; margin-left:8px;\n  font-size:.78rem; color: rgb(var(--edu-ink));\n  padding:2px 8px; border-radius: 999px;\n  border: 1px solid rgb(var(--edu-border));\n  background: linear-gradient(180deg, rgb(var(--edu-card) / .3), rgb(var(--edu-card) / .05));\n  backdrop-filter: blur(6px);\n  vertical-align: middle;\n}\n.bm-hint::before{ content:\"#\"; opacity:.7 }\n\n/* Inputs */\n.bm-block input[type=\"text\"],\n.bm-block input[type=\"number\"]{\n  appearance:none; background: transparent; border: none; outline: none;\n  padding: 0 4px 2px; min-width: 5ch; font: inherit; color: rgb(var(--edu-ink));\n  border-bottom: 1.75px solid rgb(var(--edu-ink));\n  transition: border-color .15s ease;\n}\n\n/* Select (custom-ish but accessible) */\n.bm-block select{\n  appearance:none;\n  font:inherit; \n  color:rgb(var(--edu-ink));\n  padding:4px 28px 4px 10px; border-radius:10px;\n  border:none;\n  border-bottom: 3px solid rgb(var(--edu-border));\n  background:\n    linear-gradient(180deg, rgb(var(--edu-card) / .9), rgb(var(--edu-card) / .7));\n  position:relative;\n}\n.bm-block select:focus-visible{\n  outline: none;\n}\n.bm-block select{\n  background-image:\n    linear-gradient(45deg, transparent 50%, rgb(var(--edu-ink)) 50%),\n    linear-gradient(135deg, rgb(var(--edu-muted)) 50%, transparent 50%);\n  background-position:\n    calc(100% - 18px) 55%, calc(100% - 12px) 55%;\n  background-size:6px 6px, 6px 6px;\n  background-repeat:no-repeat;\n}\n\n.bm-footer{display:flex; gap:8px; justify-content:end}\n.bm-btn{\n  border:1px solid rgb(var(--edu-border));\n  background:\n    linear-gradient(180deg, rgb(var(--edu-card) / .95), rgb(var(--edu-card) / .85));\n  padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700;\n  transition: transform .06s ease, box-shadow .2s ease;\n}\n.bm-btn:hover{ transform: translateY(-1px) }\n.bm-btn:active{ transform: translateY(0) }\n.bm-btn[aria-busy=\"true\"]{opacity:.7; pointer-events:none}\n\n#bm-check-id{ color: rgb(var(--edu-ink)); background: linear-gradient(135deg, rgb(var(--edu-first-accent) /.16), rgb(var(--edu-second-accent)/.16)) }\n\n.is-correct{ box-shadow: inset 0 0 0 2px rgb(var(--edu-success)) }\n.is-wrong{ box-shadow: inset 0 0 0 2px rgb(var(--edu-error)) }\n", "// Blanks Multiple \n\nimport {\n  injectStyle, \n  createSection, \n  extractTitleAndStrip, \n  takeOptionalLabel, \n  splitBlocksOutsideParens, \n  getResultEl\n} from \"./../../../utils/utils\";\n\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\nimport { createDSLParser } from \"../parser\";\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';\n\ntype BlanksMultipleData = {\n  instruction?: string; \n  blocks: Array<{\n    label: string; \n    html: string;\n    answerMap: Map<string, any>;\n  }>  \n};\n\nconst dsl = createDSLParser();\n\n// ===================================================================// \n//                           RENDERER                       \n// ===================================================================//\n\nfunction blanksMultipleRenderer(\n\n  mount: HTMLElement,\n  data: BlanksMultipleData,\n  options: RendererOptions\n  \n): RendererHandle {\n\n  // BASE COMPONENT UTILITIES \n  // ---------------------  \n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = 'Blanks Multiple Exercise'\n  } = options; \n\n  const root = createSection('blanks-multiple', ariaLabel);\n  injectStyle('blanks-multiple-style', baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n  r.querySelector<T>(sel);\n\n  // HTML ELEMENTS \n  // ---------------------\n  \n  let $title: HTMLHeadingElement;\n  let $instruction: HTMLParagraphElement;    \n  let $container: HTMLElement;    \n  let $finish: HTMLButtonElement;  \n\n  // CONSTANTS \n  // ---------------------\n  const startTime = Date.now();\n  const total = data.blocks.length;\n\n  // VARIABLES  \n  // ---------------------\n  let correct = 0;\n  let score = 0;\n  let wrong: string[] = [];\n\n  // INITIALIZER FUNCTION \n  // ---------------------\n\n  function init() {    \n\n    root.innerHTML = baseHTML;\n\n    $title = $(\"#bm-title-id\");\n    $instruction = $(\"#bm-instruction-id\");        \n    $container = $(\"#bm-main-id\");\n    $finish = $(\"#bm-check-id\");\n\n    $title.textContent = data.instruction ?? 'Fill Blanks Exercise';        \n    createBlocks();\n\n    $finish.addEventListener('click', check);\n    \n  }\n    \n  function createBlocks() {    \n  \n    const blocks = data.blocks; \n\n    blocks.forEach(block => {\n    \n      const p = document.createElement(\"p\");\n      p.className = \"bm-block\";      \n      \n      const html = block.label ? block.html + `<span class=\"bm-badge\">${block.label}</span>` : block.html;                 \n      p.innerHTML = html;      \n      \n      $container.appendChild(p);\n      \n    });    \n    \n  }\n\n  // CHECK FUNCTION \n  // ---------------------\n\n  function check() {        \n  \n    data.blocks.forEach(block => {\n    \n      const r = dsl.checkAnswers(block.answerMap);             \n\n      if (r.correct === r.total) correct++;\n\n      console.log(`\n        THE AMOUNT FOR BLOCK ${block.label} is:\n\n        CORRECT: ${r.correct}\n        TOTAL: ${r.total}\n\n        CORRECT ANSWER VALUE (100 / total): ${100 / r.total}\n        POINTS FOR THIS BLOCK: ${((100 / r.total) * r.correct) / 100}\n        \n      `);                  \n\n      // convert to decimal \n      score += r.correct / r.total * 100;\n\n      Object.values(r.details).forEach(val => {            \n        if (!val.ok) wrong.push(val.got);      \n      });\n\n    });    \n    \n    finish();\n  }\n\n  // RESULT HANDLER BRIDGE\n  // ---------------------\n  \n  function finish() {\n\n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n    score = score / total;    \n                  \n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n    \n    if (resultHandler) {\n        resultHandler(result);\n    }    \n\n   // remove interactivity     \n  }\n\n  // Initialize and mount\n  // ---------------------\n  \n  init();\n  mount.appendChild(root);\n\n  return {\n\n    destroy(): void { mount.removeChild(root); },\n\n    check\n  }\n\n}\n\n// ===================================================================// \n//                           PARSER                        \n// ===================================================================//\n\nfunction blanksMultipleParser(code: string, parse = dsl.parse): {\n  ok: boolean,\n  content?: BlanksMultipleData,\n  errors?: []\n} {\n  const { title, rest } = extractTitleAndStrip(code);\n  const rawBlocks = splitBlocksOutsideParens(rest);\n\n  const blocks: BlanksMultipleData[\"blocks\"] = [];\n\n  for (const raw of rawBlocks) {\n    const trimmed = raw.trim();\n    if (!trimmed) continue;\n\n    const { label, cleaned } = takeOptionalLabel(trimmed);\n\n    const r = parse(cleaned);\n    if (!r || !r.ok) continue;\n\n    blocks.push({\n      label,\n      html: r.content.html,\n      answerMap: r.content.answerMap\n    });\n  }\n\n  return { ok: true, content: { instruction: title, blocks: blocks } }\n}\n\nfunction blanksMultipleValidator(data: BlanksMultipleData): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT                        \n// ===================================================================//\n\nconst example = `\n@TITLE = Fill the blanks;\n\n# gerund\nI am @tx(going) to school tomorrow, I come back at 04:00 @sl([pm]|am);\n\nThe days of the week are @nm(7), but you know we live as if they were 10!;\n\n# Look at the answer first\nA: What is @tx(her) name?\nB: Her name is Maria; \n`;\n\nexport const BlanksMultipleContract: ContractType = {\n    name: \"Blanks Multiple\",\n    description: \"...\",\n        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"input\",\n    tags: [\"Complete\", \"...\", \"Missing Information\"],\n\n    usage: [ \"...\", \"...\"],\n    wrong: [\"...\", \"...\"],\n\n    grammarExample: [example],\n\n    defaultOptions: {\n        shuffle: true,\n        allowRetry: false,\n        ariaLabel: \"Blanks Multiple Exercise\"\n    },\n\n    implementation: {\n        renderer: blanksMultipleRenderer,\n        parser: blanksMultipleParser,\n        validator: blanksMultipleValidator\n    },\n\n    styleTag: 'blanks-Multiple-style',\n\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "import { removeDistractors } from \"./../../utils/utils\";\n\nexport type CategorizeData = {\n  instruction?: string; \n  items: Array<{\n    category: string;\n    words: string[];\n  }>;\n  distractors?: string[];\n};\n\nexport function categorizeParser(code: string): { ok: boolean, content?: CategorizeData, errors?: string } {\n\n  try {\n    // First, extract distractors\n    const distractorResult = removeDistractors(code);\n    if (!distractorResult.ok) {\n      return { ok: false, errors: distractorResult.errors };\n    }\n    \n    const distractors = distractorResult.distractors || [];\n    const cleanCode = distractorResult.resultString || code;\n    \n    // Extract instruction (comments starting with #)\n    const instructionMatch = cleanCode.match(/^\\s*#\\s*(.+)$/m);\n    const instruction = instructionMatch ? instructionMatch[1].trim() : undefined;\n    \n    // Parse category definitions\n    // Pattern: CategoryName = item1 | item2 | item3;\n    const categoryPattern = /(\\w+)\\s*=\\s*([^;]+);/g;\n    const categories: Array<{ category: string; words: string[] }> = [];\n    \n    let match;\n    while ((match = categoryPattern.exec(cleanCode)) !== null) {\n      const categoryName = match[1].trim();\n      const itemsString = match[2].trim();\n      \n      // Split by | and clean up each item\n      const words = itemsString\n        .split('|')\n        .map(item => item.trim())\n        .filter(item => item.length > 0);\n      \n      categories.push({\n        category: categoryName,\n        words: words\n      });\n    }\n    \n    if (categories.length === 0) {\n      return { ok: false, errors: \"No valid category definitions found\" };\n    }\n    \n    const result: CategorizeData = {\n      instruction,\n      items: categories,\n      distractors\n    };\n    \n    return { ok: true, content: result };\n    \n  } catch (error) {\n    return { ok: false, errors: `Parse error: ${error instanceof Error ? error.message : String(error)}` };\n  }\n}\n\n// function validateCategorize(data: CategorizeContent): boolean { return true; }\n", "<div class=\"edu-categorize\" id=\"cca\">\n  <header class=\"cca-header\">    \n    <p class=\"edu-categorize-instruction\" id=\"cca-instruction\"></p>\n\n    <div class=\"edu-categorize-palette\" id=\"cca-palette\">\n      <button type=\"button\" class=\"edu-categorize-chip\" id=\"cca-none\" aria-pressed=\"true\" data-active=\"true\">\n        <span class=\"edu-categorize-swatch\" style=\"background:rgb(var(--edu-bg))\"></span>\n        <span>None</span>\n      </button>\n      \n      <!-- Category painters injected here -->\n    </div>\n\n    <div class=\"edu-categorize-current\" aria-live=\"polite\">\n      <strong>Current:</strong>\n      <span class=\"edu-categorize-swatch\" id=\"cca-current-swatch\"></span>\n      <span id=\"cca-current-label\">None</span>\n    </div>\n  </header>\n\n  <main class=\"edu-categorize-grid\" id=\"cca-grid\"></main>\n\n  <hr>\n\n  <footer class=\"edu-categorize-footer\">\n    <button class=\"edu-categorize-btn\" id=\"cca-check\">Check</button>\n    <button class=\"edu-categorize-btn secondary\" id=\"cca-reset\">Reset</button>\n  </footer>\n</div>\n", ".colors-categorize {\n\n  margin:0;\n  padding: 0;\n  background-image: url(\"data:image/jpeg;base64,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\");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n}\n\n.edu-categorize {  \n  font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif;\n  color: rgb(var(--edu-ink));\n  display: grid;  \n  gap: min(5vh, 40px);\n  \n  margin: 0;\n  padding: 16px;\n  background: rgb(var(--edu-bg) / 0.92);\n}\n\n.edu-categorize-header { display: grid; gap: 10px; color: rgb(var(--edu-ink));}\n.edu-categorize-instruction {\n  margin: 10px;\n  font-size: clamp(.95rem, .8rem + .5vw, 1.1rem);\n  font-weight: 700;\n  letter-spacing: .2px;\n}\n\n.edu-categorize-palette {\n  display: flex; flex-wrap: wrap; gap: 8px; \n  justify-content: space-between;\n  border: 1px solid rgb(var(--edu-border));\n  padding: 8px;   \n  background: rgb(var(--edu-bg));  \n  margin: 5%;\n}\n\n.edu-categorize-chip {\n  display: inline-flex; \n  align-items: center; \n  gap: 8px;\n  border: 1px solid rgb(var(--edu-border));  \n  padding: 8px 12px;\n  background: rgb(var(--edu-card)); \n  cursor: pointer; \n  user-select: none;\n  font-size: .95rem; \n  font-weight: 600;\n  color: rgb(var(--edu-ink));\n  transition: transform .06s ease-in-out, box-shadow .1s ease-in-out;\n}\n/* .edu-categorize-chip:focus-visible { outline: 2px solid var(--cca-ring); outline-offset: 2px; } */\n\n.edu-categorize-chip:hover { transform: translateY(-1px); background: rgb(var(--edu-first-accent) / 0.50)}\n.edu-categorize-swatch {\n  width: 28px; \n  height: 18px; \n  border-radius: 999px; \n  border: 1px solid rgb(var(--edu-border));\n  background: rgb(var(--edu-bg)); flex: 0 0 18px;\n}\n.edu-categorize-chip[data-active=\"true\"] { background: rgb(var(--edu-first-accentr)) }\n\n.edu-categorize-current {\n  display: flex; \n  justify-content: center;   \n  font-size: 1.1rem; \n  margin: 10px;\n  gap: 5px;\n  color: rgb(var(--edu-ink));\n}\n.edu-categorize-current strong { color: rgb(var(--edu-ink)); }\n.edu-categorize-current .edu-categorize-swatch { width: 22px; height: 22px; border-width: 1px; }\n\n.edu-categorize-grid {\n  display: grid; \n  gap: 8px;\n  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));\n}\n\n.edu-categorize-item {\n  display: inline-flex; \n  align-items: center; \n  justify-content: center;\n  padding: 12px 14px;\n  min-height: 46px;\n  border: 1px solid rgb(var(--edu-border)); \n  cursor: pointer;\n  background: rgb(var(--edu-card)); \n  transition: transform .05s ease-in-out, background .1s ease;\n  font-weight: 700; \n  letter-spacing: .4px; \n  text-align: center;\n  user-select: none; \n  color: rgb(var(--edu-ink));\n}\n.edu-categorize-item:hover { transform: translateY(-1px); background: var(--current-color); }\n.edu-categorize-item:focus-visible { outline: 2px solid rgb(var(--edu-border)); outline-offset: 2px; }\n.edu-categorize-item[data-result=\"ok\"]    { outline: 2px solid rgb(var(--edu-success)); }\n.edu-categorize-item[data-result=\"wrong\"] { outline: 2px solid rgb(var(--edu-error)); }\n\n.edu-categorize-footer { display: flex; gap: 8px; justify-content: center; }\n.edu-categorize-btn {\n  padding: 10px 14px;   \n  border: none;\n  background: rgb(var(--edu-card)); \n  color: rgb(var(--edu-ink)); \n  cursor: pointer; \n  font-weight: 700;  \n}\n.edu-categorize-btn:hover { background: rgb(var(--edu-first-accent) / 0.50) }\n.edu-categorize-btn.secondary { background: transparent; color: rgb(var(--edu-ink)); border-color: rgb(var(--edu-border)); }\n/* .edu-categorize-btn:focus-visible { outline: 2px solid var(--cca-ring); outline-offset: 2px; } */\n\n.edu-categorize hr {\n    width: 100%;\n    border: 1px solid rgb(var(--edu-first-accent));\n}\n", "// COLORS CATEGORIZE\n\nimport { injectStyle, createSection, shuffle, getResultEl } from \"./../../../utils/utils\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\nimport { CategorizeData, categorizeParser } from \"../utils\";\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';\n\n// ===================================================================// \n//                           RENDERER                       \n// ===================================================================//\nfunction colorsCategorizeRenderer(\n\n  mount: HTMLElement,\n  data: CategorizeData,\n  options: RendererOptions\n  \n): RendererHandle {\n\n  // BASE COMPONENT UTILITIES \n  // ------------------------\n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = 'Color Categorizer Exercise',\n    checkBtn = false \n  } = options; \n\n  const root = createSection('colors-categorize', ariaLabel);\n  injectStyle('colors-categorize-style', baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n    r.querySelector<T>(sel);\n\n  // CONSTANTS \n  // ---------------------\n  const palette = [ \"#ef4444\",\"#22c55e\",\"#3b82f6\",\"#f59e0b\",\"#8b5cf6\", \"#ec4899\",\"#a16207\",\"#16a34a\",\"#0ea5e9\",\"#f97316\", \"#f5f5dc\",\"#9ca3af\"];\n  const distractorSet = new Set(data.distractors || []); \n  // map the object list of category<->items to later use in the check function \n  const itemToCategory = new Map();  \n\n  // VARIABLES \n  // ---------\n  let assigned: Record<string, string[]> = {};   \n  const categoryColors = new Map();  // track of category | assigned color   \n  let activeColor = \"rgb(var(--edu-card))\"; // live-updating color/label categories \n  let activeCategory = \"None\";\n\n  let total = 0;\n  let correct = 0;\n  let score = 0;\n  let wrong: string[] = [];\n  let startTime = Date.now();\n\n  // HTML ELEMENTS  \n  // -------------\n  let $instructions: HTMLParagraphElement;\n  let $colorsContainer: HTMLElement;\n  let $container: HTMLElement;\n  let $noneBtn: HTMLButtonElement;\n  let $currentSwatch: HTMLElement;\n  let $currentLabel: HTMLElement;    \n  let $checkBtn: HTMLButtonElement;\n  let $resetBtn: HTMLButtonElement;\n\n  // INITIALIZER FUNCTION  \n  // --------------------\n  function init() {  \n\n    root.innerHTML = baseHTML; \n\n    $instructions = $(\"#cca-instruction\");\n    $instructions.textContent = data.instruction; \n    \n    $currentLabel = $(\"#cca-current-label\");\n    $currentLabel.textContent = \"None\";\n    \n    $currentSwatch = $(\"#cca-current-swatch\");\n    $currentSwatch.style.background = \"rgb(var(--edu-card))\";\n    \n    $noneBtn = $(\"#cca-none\");\n    $noneBtn.addEventListener(\"click\", () => setActivePainter(\"rgb(var(--edu-card))\", \"None\", $noneBtn));\n    \n    $container = $(\"#cca-grid\");  \n    $colorsContainer = $(\"#cca-palette\");     \n\n    $checkBtn = $(\"#cca-check\");\n    $checkBtn.addEventListener(\"click\", () => check());\n    if (!options.checkBtn) $checkBtn.style.display = \"none\";\n    \n    $resetBtn = $(\"#cca-reset\");\n    $resetBtn.addEventListener(\"click\", () => reset());\n\n    for (const block of data.items) {\n      assigned[block.category] = [];\n      for (const w of block.words) itemToCategory.set(w, block.category);      \n    }\n\n    // populating painters \n    data.items.forEach((block, idx: number) => {\n      const color = palette[idx % palette.length];\n      categoryColors.set(block.category, color);\n\n      const btn = document.createElement('button');\n      btn.type = \"button\";\n      btn.className = \"edu-categorize-chip\";\n      btn.setAttribute(\"aria-pressed\", \"false\");\n      btn.setAttribute(\"aria-label\", `Paint: ${block.category}`);\n      btn.innerHTML = `\n        <span class=\"edu-categorize-swatch\" style=\"background:${color}\"></span>\n        <span>${block.category}</span>\n        <span id=\"chip-counter-${block.category}\">0</span>\n      `;\n      btn.addEventListener(\"click\", () => setActivePainter(color, block.category, btn));\n      $colorsContainer.appendChild(btn);      \n    });            \n\n    renderItems();\n  \n  }\n\n  function setActivePainter(color: string, label: string, btn: HTMLButtonElement): void {\n  \n    $colorsContainer.querySelectorAll(\".edu-categorize-chip\").forEach((b: HTMLButtonElement) => {\n      b.setAttribute(\"aria-pressed\", \"false\");\n      b.dataset.active = \"false\";\n    });\n\n    btn.setAttribute(\"aria-pressed\", \"true\");\n    btn.dataset.active = \"true\";\n\n    activeColor = color;\n    activeCategory = label;\n    $currentSwatch.style.background = color || \"rgb(var(--edu-card))\";\n    $currentLabel.textContent = label || \"None\";    \n        \n    document.documentElement.style.setProperty('--current-color', color, 'important');    \n\n  }\n\n  function updateCounters(word: string, el) {       \n    if (activeCategory === \"None\") return;    \n\n    const counter = root.querySelector(`#chip-counter-${activeCategory}`);\n\n    // toggle color\n    if (assigned[activeCategory].includes(word)) {          \n      const idx = assigned[activeCategory].indexOf(word);               \n      if (idx !== -1) {\n        assigned[activeCategory].splice(idx, 1);\n      }            \n      \n      el.style.background = \"rgb(var(--edu-card))\";\n      counter.textContent = String(assigned[activeCategory].length);            \n      return; \n    };         \n\n    // reassign color if necessary\n    for (const [k, v] of Object.entries(assigned)) {                    \n      if (v.includes(word)) {                        \n        // clean old fam\n        const idx = assigned[k].indexOf(word);                       \n        if (idx !== -1) {\n          assigned[k].splice(idx, 1);\n        }         \n        const catCounter = root.querySelector(`#chip-counter-${k}`);\n        catCounter.textContent = String(assigned[k].length);           \n      }      \n    }\n                  \n    assigned[activeCategory].push(word);        \n    counter.textContent = String(assigned[activeCategory].length);         \n  }\n  \n  function renderItems() {\n    const allWords = shuffle([ ...data.items.flatMap(b => b.words), ...(data.distractors || []) ]);\n\n    $container.innerHTML = \"\";\n\n    for (const word of allWords) {\n      const el = document.createElement(\"button\");\n      el.type = \"button\";\n      el.className = \"edu-categorize-item\";\n      el.textContent = word;\n      el.dataset.color = \"\";\n      el.dataset.result = \"\";\n      el.addEventListener(\"click\", () => {\n        el.style.background = activeColor || \"rgb(var(--edu-card));\";\n\n        updateCounters(word, el);\n        \n        el.dataset.color = activeColor;\n        el.dataset.result = \"\";        \n      });\n      $container.appendChild(el);\n    }\n    \n  }\n  \n  function reset() {\n    $container.querySelectorAll('.edu-categorize-item').forEach((el: HTMLButtonElement) => {\n      el.style.background = \"rgb(var(--edu-card))\";\n      el.dataset.color = \"\";\n      el.dataset.result = \"\";\n    });\n\n    Object.keys(assigned).forEach(k => {\n      const counter = root.querySelector(`#chip-counter-${k}`);\n      counter.textContent = \"0\";\n      assigned[k] = [];\n    });\n    \n    setActivePainter(\"\", \"None\", $noneBtn);\n  }\n  \n  // CHECK FUNCTION \n  // --------------\n  function check() {\n    $container.querySelectorAll('.edu-categorize-item').forEach((el: HTMLButtonElement) => {\n      total++;\n      \n      const word = el.textContent || \"\";      \n      const chosen = el.dataset.color || \"\";\n\n      let isCorrect = false;\n      if (distractorSet.has(word)) {\n        isCorrect = chosen === \"\" || chosen === \"var(rgb(--edu-var))\";        \n      } else {\n        const expectedCat = itemToCategory.get(word);        \n        const expectedColor = expectedCat ? categoryColors.get(expectedCat) : \"\";        \n        isCorrect = chosen && chosen === expectedColor;\n      }\n      \n      el.dataset.result = isCorrect ? \"ok\" : \"wrong\";\n      \n      if (isCorrect) correct++;\n      else wrong.push(word);      \n    });\n\n    finish();\n  }\n\n  // RESULT HANDLER BRIDGE \n  // ---------------------\n  function finish() {\n  \n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n    score = (correct / total) * 100;\n\n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n\n    root.setAttribute(\"inert\", \"\");\n\n    if (resultHandler) {\n      resultHandler(result);\n    }\n  }\n\n  // Initialize and mount to parent  \n  // --------------\n  init();\n  mount.appendChild(root);\n  return { destroy(): void { mount.removeChild(root); }, check}\n}\n\n// ===================================================================// \n//                           PARSER                       \n// ===================================================================//\n\n// parser -> categorizeParser (imported)\n\nfunction colorsCategorizeValidator(data: CategorizeData): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT                        \n// ===================================================================//\n\nconst exs = `\n# Categorize the countries with their continent\n\nAsia = Thailand | Japan | Vietnam;\nEurope = France | The Netherlands | Ukraine;\nAmerica = Colombia | Jamaica | Brazil;\n\n@EXTRA = [Egypt | Madagascar];\n`;\n\nexport const ColorCategorizeContract: ContractType = {\n    name: \"Colors Categorize\",\n    description: \"...\",        \n    version: 1.0,\n    parserVersion: 1.0,\n    category: \"input\",\n    tags: [\"Complete\", \"...\", \"Missing Information\"],\n\n    usage: [ \"...\", \"...\" ],\n    wrong: [\"...\", \"...\" ],\n\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Colors Categorize Exercise\" },\n    implementation: { renderer: colorsCategorizeRenderer, parser: categorizeParser, validator: colorsCategorizeValidator },\n\n    styleTag: 'colors-categorize-style',\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "<div class=\"categorize-single\" id=\"cats-app\">\n  <header class=\"categorize-single-head\">\n    <p class=\"categorize-single-instruction\" id=\"cats-instruction\">Instruction</p>\n        \n    <div class=\"categorize-single-qmeta\">      \n      <span id=\"cats-progress\">0 / 0</span>\n    </div>\n  </header>\n\n  <main class=\"categorize-single-main\">\n    \n    <div class=\"categorize-single-qwrap\" aria-live=\"polite\">\n      <p class=\"categorize-single-question\" id=\"cats-question\">Loading\u2026</p>\n    </div>\n    \n    <div class=\"categorize-single-qnav\">\n      <button class=\"categorize-single-btn\" id=\"cats-prev\">Prev</button>\n      <button class=\"categorize-single-btn\" id=\"cats-next\">Next</button>\n    </div>\n\n    <section class=\"categorize-single-grid\" id=\"cats-grid\" aria-label=\"Categories\"></section>\n  </main>    \n\n  <footer id=\"ccs-footer\" class=\"categorize-single-foot\">\n    <hr>\n    <button class=\"categorize-single-btn\" id=\"cats-check\">Check</button>\n  </footer>\n</div>\n\n<!-- Per-category modal -->\n<dialog class=\"categorize-single-dialog\" id=\"cats-dialog\">\n  <div class=\"categorize-single-dhead\">\n    <div class=\"categorize-single-dtitle\" id=\"cats-dialog-title\">Category</div>\n    <button class=\"categorize-single-btn\" id=\"cats-dialog-close\">Close</button>\n  </div>\n  <div class=\"categorize-single-dbody\" id=\"cats-dialog-body\"></div>\n</dialog>\n\n\n", ".categorize-single-root {\n  background-image: url(\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcReJJGdJqQVoB3WIpCK8rCwCUm88juBFtiQgQ&s\");\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n}\n\n.categorize-single { \n  display:grid; \n  gap:20px; \n\n  padding: 16px; \n  background-color: rgb(var(--edu-bg) / 0.95);\n  padding: 5%;\n}\n\n.categorize-single-head { display:grid; gap:8px; text-align:start; }\n.categorize-single-instruction { margin:0; font-size:1.1rem; color:rgb(var(--edu-ink)); letter-spacing: 2px;}\n\n.categorize-single-main { display:grid; gap:18px; min-height: 70vh}\n\n.categorize-single-qwrap {\n  border-top:1px solid rgb(var(--edu-border));\n  border-bottom:1px solid rgb(var(--edu-border));\n  padding: 18px;\n  display:grid;\n  gap:12px; \n  align-items:center; \n  justify-items:center;\n}\n\n.categorize-single-question {\n  font-size:2.15rem; \n  line-height:1.6; \n  letter-spacing:.5px; \n  text-wrap:balance;\n  text-align:center; margin:0;\n}\n.categorize-single-qmeta { display:flex; gap:12px; align-items:center; font-size:.9rem; color:rgb(var(--edu-ink)); }\n\n.categorize-single-qnav { display:flex; gap:10px; justify-content:space-between; width: 100%; }\n\n.categorize-single-btn {\n  border:1px solid rgb(var(--edu-border));\n  background: rgb(var(--edu-card));\n  color: rgb(var(--edu-ink));\n  padding: 5px 8px;\n  width: 20%;\n  border-radius: 10px;\n  font-weight: 700; \n  letter-spacing:.3px;\n  cursor: pointer;\n  transition: transform .12s ease, background .15s ease, border-color .15s ease, opacity .15s ease;\n}\n.categorize-single-btn:hover { transform: translateY(-1px); background-color: rgb(var(--edu-card));}\n.categorize-single-btn[disabled] { opacity:.6; pointer-events:none; }\n\n.categorize-single-grid {\n  display:grid; gap:14px;\n  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));\n}\n\n.categorize-single-card {\n  margin: 10px;\n  display:grid;\n  grid-template-rows: auto 1fr auto;\n  gap:10px; \n  align-content:start;\n  background:linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));\n  padding: 12px;\n  position:relative;\n  outline:2px solid transparent;\n  transition: transform .12s ease, outline-color .15s ease, background .15s ease, border-color .15s ease;\n  cursor: pointer;\n}\n.categorize-single-card:hover { transform:translateY(-2px); }\n.categorize-single-card.bad    { outline-color: color-mix(in srgb, rgb(var(--edu-wrong)) 60%, transparent); }\n.categorize-single-card.good   { outline-color: color-mix(in srgb, rgb(var(--edu-success)) 60%, transparent); }\n.categorize-single-card.neutral{ outline-color: color-mix(in srgb, rgb(var(--edu-muted)) 40%, transparent); }\n\nhr {\n  width: 80%;\n}\n\n.categorize-single-label {\n  font-weight: 800; \n  letter-spacing: 3px; \n  text-transform: uppercase; \n  font-size:.9rem;\n  padding:6px 8px;\n  border:1px solid rgb(var(--edu-border));\n  justify-self:start;\n}\n.categorize-single-count {\n  font-size: 2.4rem; \n  font-weight: 900;\n  display:flex; \n  align-items:center; \n  justify-content:center;\n  border:1px dashed rgb(var(--edu-border));\n  border-radius: 12px; \n  padding: 8px; \n  min-height:64px;\n  background: color-mix(in srgb, rgb(var(--edu-card)) 85%, rgb(var(--edu-ink)) 6%);\n}\n.categorize-single-open {\n  border:1px solid rgb(var(--edu-border));\n  padding:8px 10px; border-radius:10px; font-weight:700; background:transparent; \n  color: rgb(var(--edu-ink));\n  margin-top: auto;\n}\n.categorize-single-open:hover { background: color-mix(in srgb, rgb(var(--edu-card)) 80%, rgb(var(--edu-ink)) 6%); }\n\n.categorize-single-foot {\n  display:flex; gap:10px; justify-content:center; align-items:center;\n  padding-top: 6px;\n}\n\n.categorize-single-check.good { color: rgb(var(--edu-success)); }\n.categorize-single-check.bad  { color: rgb(var(--edu-error)); }\n\n/* ==== Modal (per-category) ===== */\n.categorize-single-dialog::backdrop { background: rgb(var(--edu-bg) / 0.80);}\n\n.categorize-single-dialog {\n  border:1px solid rgb(var(--edu-border));\n  background: rgb(var(--edu-card)); color: rgb(var(--edu-ink));\n  padding: 14px; width: min(720px, 96vw);\n}\n\n.categorize-single-dhead { display:flex; justify-content:space-between; align-items:center; gap:8px; padding-bottom:8px; border-bottom:1px dashed rgb(var(--edu-border)); }\n.categorize-single-dtitle { font-weight:900; letter-spacing:.4px; }\n.categorize-single-dbody { display:grid; gap:10px; padding-top:10px; max-height: 56vh; overflow:auto; }\n.categorize-single-drow {\n  border:1px solid rgb(var(--edu-border)); b\n  order-radius: 12px; \n  padding: 10px;\n  display:grid; grid-template-columns: 1fr auto; \n  gap:10px; \n  align-items:center;\n  background: linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0));\n  margin: 10px;\n}\n\n.categorize-single-drow.good { outline:2px solid color-mix(in srgb, rgb(var(--edu-success)) 50%, transparent); }\n.categorize-single-drow.bad  { outline:2px solid color-mix(in srgb, rgb(var(--edu-error)) 50%, transparent); }\n.categorize-single-remove {\n  border:1px solid rgb(var(--edu-border)); border-radius:10px; padding:8px 10px; background:transparent; color:rgb(var(--edu-ink)); font-weight:800;\n}\n.categorize-single-remove:hover { background: color-mix(in srgb, rgb(var(--edu-card)) 80%, rgb(var(--edu-ink)) 6%); }\n\n@media (max-width: 520px) {\n  .categorize-single-question { font-size:1.05rem; }\n  .categorize-single-count { font-size:2rem; }\n}\n", "// CATEGORIZE SINGLE \n\nimport { injectStyle, createSection, removeDistractors, shuffle, getResultEl } from \"./../../../utils/utils\";\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../../types';\nimport { CategorizeData, categorizeParser } from \"../utils\";\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';\n\n// ===================================================================// \n//                           RENDERER                       \n// ===================================================================//\nfunction singleCategorizeRenderer(\n\n  mount: HTMLElement,\n  data: CategorizeData,\n  options: RendererOptions\n  \n): RendererHandle {\n\n  // BASE COMPONENT UTILITIES \n  // ------------------------\n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = 'Single Categorize Exercise',\n    checkBtn = false \n  } = options; \n\n  const root = createSection('categorize-single-root', ariaLabel);\n  injectStyle('colors-categorize-style', baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n    r.querySelector<T>(sel);\n\n  const $$ = (sel, r=mount) => [...r.querySelectorAll(sel)];\n    \n  // HTML ELEMENTS \n  // -------------\n  let $instruction: HTMLParagraphElement;\n  let $question: HTMLParagraphElement;\n  let $progress: HTMLSpanElement; \n  let $grid: HTMLElement;\n  let $prev: HTMLButtonElement; \n  let $next: HTMLButtonElement; \n  let $check: HTMLButtonElement;   \n  let $dialog: HTMLDialogElement; \n  let $dialogTitle: HTMLDivElement; \n  let $dialogBody: HTMLDivElement; \n  let $dialogClose: HTMLButtonElement;   \n  \n  // VARIABLES  \n  // ------------- \n  let colorByCategory = new Map();  // map the color of each category -> useful for the check() function     \n  let categories: Array<{ \n    // KEEP state of the categories and the items added to them \n    name: string, \n    color: string, \n    items: number[], \n    _els?: { card: HTMLElement, count: HTMLDivElement, label: HTMLSpanElement } \n  }>;  \n\n  let order: number[];\n  let cursor = 0;  // nav\n  let assigned = new Set<number>(); // index of all questions that have already being assigned\n  let checked = false;  // to paint the border of good / bad\n\n  // for the score, let's first assign a value to each category based on 100 divided by the number of categories.\n  // (val = 100 / cats.length), then for each word assign a value dividing the amount of words by the value \n  // of the category (itemVal = items.length / val). Plus equal this itemVal each time  \n  let score = 0; \n  let total = 0;\n  let correct = 0; \n  let startTime = Date.now();\n  let wrong: string[] = [];    \n\n  // CONSTANTS \n  // ---------\n  const palette = [\"#ef4444\",\"#22c55e\",\"#3b82f6\",\"#f59e0b\",\"#8b5cf6\", \"#ec4899\",\"#a16207\",\"#16a34a\",\"#0ea5e9\",\"#f97316\", \"#f5f5dc\",\"#9ca3af\"];\n  const bank: Array<{text: string, trueCategory: string | null}> = [];    // simple mapping utility for each word in the exercise | not a real constant \n  const currentIndex = () => order[cursor] ?? null;\n  const goToNext = () => { if (cursor < order.length-1) { cursor++ } updateQuestion() };\n  const goToPrev = () => { if (cursor > 0) { cursor-- } updateQuestion() };\n\n  // INITIALIZER FUNCTION \n  // ---------\n  function init() {  \n\n    root.innerHTML = baseHTML; \n\n    // ...asign \n    $instruction = $('#cats-instruction');\n    $instruction.textContent = data.instruction || \"Categorize every sentence into a category\";    \n    $question = $('#cats-question');\n    $progress = $('#cats-progress');\n    $grid = $('#cats-grid');    \n    $next = $('#cats-next');      \n    $prev = $('#cats-prev');\n    $check = $('#cats-check');        \n        \n    $dialog = root.querySelector('#cats-dialog');\n    $dialogTitle = root.querySelector('#cats-dialog-title');\n    $dialogBody = root.querySelector('#cats-dialog-body');    \n    $dialogClose = root.querySelector('#cats-dialog-close');     \n        \n    if (!options.checkBtn) { \n      const $footer = $(\"#ccs-footer\") as HTMLElement; \n      $footer.style.display = \"none\"; \n    };\n\n    // ...bundle \n    data.items.forEach((cat, idx) => {\n      const color = palette[idx % palette.length];\n      colorByCategory.set(cat.category, color);       \n      cat.words.forEach(i => {  // check this out\n        bank.push({ text: i, trueCategory: cat.category }) \n      });\n    });\n\n    if (Array.isArray(data.distractors)) {\n      data.distractors.forEach(w => bank.push({ text: w, trueCategory: null }) );\n    }\n    \n    categories = data.items.map(c => { \n      return { name: c.category, color: colorByCategory.get(c.category), items: [] } \n    });\n    order = shuffle(bank.map((_, i) => i))\n\n    // event listeners \n    $next.addEventListener('click', goToNext);\n    $prev.addEventListener('click', goToPrev);\n    $check.addEventListener('click', check);\n\n    renderGrid();\n    updateQuestion();            \n  }\n\n  // RENDERER-SPECIFIC LOGIC \n  // ---------\n  function updateQuestion() {\n    const idx = currentIndex();\n\n    const total = order.length; \n    $progress.textContent = `${Math.min(cursor+1, total)} / ${total}`;    \n    \n    if (idx === null || idx === undefined) {\n      $question.textContent = 'Done!';\n      $next.disabled = true;\n      $prev.disabled = (cursor <= 0);\n      return;\n    }    \n\n    $question.textContent = bank[idx].text;\n    $next.disabled = (cursor >= order.length-1);\n    $prev.disabled = (cursor <= 0);\n  }\n\n  function renderGrid() {\n    $grid.innerHTML = '';\n    \n    /**      \n      <article \n        class=\"categorize-single-card neutral\" \n        style=\"\n          border-color: ${cat.color}; \n          background: linear-gradient(180deg, color-mix(in srgb, ${cat.color} 8%, transparent), transparent)\"\n      >\n        <span class=\"categorize-single-label\" style=\"border-color: ${cat.color}; background: color-mix(in srgb, ${cat.color} 25%, transparent)\">\n          ${cat.name}\n        </span>\n\n        <div class=\"categorize-single-open\" type=\"button\">\n          See \uD83D\uDC41\n        </div>\n      </article>\n    `\n    **/\n    \n    categories.forEach((cat, i) => {\n\n      const card = document.createElement('article');\n      card.className = 'categorize-single-card neutral';\n      card.style.setProperty('border-color', cat.color);\n      card.style.setProperty('background', `linear-gradient(180deg, color-mix(in srgb, ${cat.color} 8%, transparent), transparent)`);\n\n      const label = document.createElement('span');\n      label.className = 'categorize-single-label';\n      label.style.setProperty('border-color', cat.color);\n      label.style.setProperty('background', `color-mix(in srgb, ${cat.color} 25%, transparent)`);\n      label.textContent = cat.name;\n\n      const count = document.createElement('div');\n      count.className = 'categorize-single-count';\n      count.textContent = String(cat.items.length);\n\n      const open = document.createElement('button');\n      open.className = 'categorize-single-open';\n      open.type = 'button';\n      open.textContent = 'See \uD83D\uDC41';\n\n      card.addEventListener('click', (e) => {\n        if (e.target === open) return; \n        const idx = currentIndex();\n        if (idx === null) return;\n\n        if (assigned.has(idx)) { alert('Another category already has this item'); return; }; \n\n        cat.items.push(idx);\n        assigned.add(idx);\n        count.textContent = `${cat.items.length} ${cat.items.length === 1 ? 'item' : 'items'}`;\n\n        if (cursor < order.length -1) goToNext(); else updateQuestion();\n      });\n\n      open.addEventListener('click', () => { \n        openDialog(cat); \n      });\n\n      card.append(label, count, open);\n      $grid.append(card);\n\n      // Keep a back-ref for quick updates\n      cat._els = { card, count, label };\n      \n    });    \n  }\n\n  // : { name: string, color: string, items: string[] }\n  function openDialog(cat): void {\n  \n    $dialogTitle.textContent = cat.name;\n\n    if (cat.items.length === 0 ) $dialogBody.innerHTML = \"<p>No items in this category</p>\";\n    else $dialogBody.innerHTML = '';\n\n    cat.items.forEach((idx, pos) => {\n      const row = document.createElement('div');\n      row.className = 'categorize-single-drow';\n\n      const p = document.createElement('p');\n      p.textContent = bank[idx].text;\n\n      if (checked) {\n        const isOk = bank[idx].trueCategory === cat.name;\n        row.classList.add(isOk ? 'good' : 'bad');\n      }\n\n      const btn = document.createElement('button');\n      btn.className = 'categorize-single-remove';\n      btn.textContent = 'Remove';\n\n      btn.addEventListener('click', () => {\n        cat.items.splice(pos, 1);\n        assigned.delete(idx);\n        if (!order.includes(idx)) order.push(idx);\n\n        cat._els.count.textContent = String(cat.items.length);\n        updateQuestion();\n\n        row.remove();\n      });\n\n      row.appendChild(p);\n      row.appendChild(btn);\n      $dialogBody.appendChild(row);\n      \n    });\n\n    if (typeof $dialog.showModal === 'function') $dialog.showModal();\n    else $dialog.setAttribute('open', '');\n    \n    if ($dialogClose) $dialogClose.addEventListener('click', () => $dialog?.close?.());\n  \n  }  \n\n  // CHECK FUNCTION \n  // --------------\n  function check() {\n\n    checked = true;       \n    \n    const categoryValue = 100 / categories.length;             \n\n    categories.forEach(cat => {      \n      const itemValue = categoryValue / cat.items.length; \n      \n      let good = 0, bad = 0;\n      cat.items.forEach(idx => {  // idx is not a number! \n        total++;\n        const item = bank[idx];\n        const ok = item.trueCategory === cat.name;\n        \n        if (ok) { \n          correct++; \n          good++;\n          score += itemValue;\n        } else { \n          bad++;\n          wrong.push(item.text);\n        };\n      });\n\n      cat._els.card.classList.remove('good', 'bad', 'neutral');\n      if (bad === 0 && good > 0) {\n        cat._els.card.classList.add('good');\n      } else if (bad > 0) {\n        cat._els.card.classList.add('bad');\n      } else {\n        cat._els.card.classList.add('neutral');        \n      }    \n    });             \n\n    finish();\n  }\n\n  // RESULT HANDLER BRIDGE  \n  // ---------------------\n  function finish() {\n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);    \n    \n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      // create a better showcase that takes an object (string, string[]) to detail\n      // wrong answers for each category instead \n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n\n    // only grab the body of the dialog this time \n    $dialogBody.setAttribute(\"inert\", \"\");\n\n    if (resultHandler) {\n      resultHandler(result);\n    }\n  }\n\n  // Initialize and mount  \n  // ------------------------\n  init();\n  mount.appendChild(root);\n\n  return {\n    destroy(): void { mount.removeChild(root); },\n    check\n  }\n\n}\n\n// ===================================================================// \n//                           CONTRACT                        \n// ===================================================================//\n\n// parser -> categorizeParser (imported )\n\nfunction singleCategorizeValidator(data: CategorizeData): boolean { return true; }\n\n// ===================================================================// \n//                           CONTRACT                        \n// ===================================================================//\n\nconst exs = `\n# Categorize the statements with their continents \n\nAsia = \"Has the largest country in the world in it\" | \n\"It's where the most ancient religions come from\";\n      \nEurope = \"Continent where the roman empire had most of its territory\" |\n\"You can find monuments like the eiffel tower in here\" |\n\"People in this continent usually like more classical music\";\n\nAmerica = \"People in this continent usually like rythmic music like Salsa\" |\n\"Has great beaches, specially in the caribbean |\n\"It's a continent that's usually divided in two or even 3 regions\";          \n`;\n\nexport const CategorizeSingleContract: ContractType = {\n    name: \"Single Categorize\",\n    description: \"...\",        \n    version: 1.2,\n    parserVersion: 1.0,\n    category: \"input\",\n    tags: [\"Complete\", \"...\", \"Missing Information\"],\n\n    usage: [\"...\", \"...\"],\n    wrong: [\"...\",\"...\"],\n\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"Single Categorize Exercise\" },\n    implementation: { renderer: singleCategorizeRenderer, parser: categorizeParser, validator: singleCategorizeValidator },\n    \n    styleTag: 'single-categorize-style',\n    html: baseHTML,\n    css: baseCSS\n}; \n\n", "<div class=\"edu-mcq-wrap\">\n  <header>\n    <h2 class=\"edu-mcq-title\" id=\"mcq-title\">\n  </header>\n\n  <!-- Dynamic <edu-mcq></edy-mcq> custom elements -->\n  <main class=\"edu-mcq-container\" id=\"mcq-container\"></main>\n\n  <footer>\n    <button class=\"edu-mcq-check\" id=\"mcq-check\">Check</button>\n  </footer>\n</div>\n", "/* ===== MCQ \u2014 Scoped styles ===== */\n.edu-mcq-wrap {\n  display:grid; gap:16px;\n  background: rgb(var(--edu-bg));\n  color: rgb(var(--edu-ink));\n  border: 1px solid rgb(var(--edu-border));\n  border-radius: var(--edu-radius);\n  box-shadow: 0 10px 30px rgb(var(--edu-shadow-color) / .25);  \n  padding: 16px;\n}\n\n/* Header */\n.edu-mcq-wrap > header {\n  display:flex; align-items:center; justify-content:space-between;\n  padding: 8px 4px 12px;\n  border-bottom: 1px dashed rgb(var(--edu-border));\n}\n\n.edu-mcq-wrap .edu-mcq-title {\n  margin:0;\n  font-weight:800;\n  letter-spacing:.3px;\n  color: rgb(var(--edu-ink));\n}\n\n/* Grid container for dynamic <edu-mcq> blocks */\n.edu-mcq-wrap .edu-mcq-container {\n  display:flex; \n  gap: 50px;\n  flex-direction: column;\n  justify-content: center;\n  counter-reset: mcq;\n  padding-block: 4px;\n}\n\n/* Card shell for each custom element (outer host only) */\n.edu-mcq-wrap .edu-mcq-container edu-mcq {\n  position: relative;\n  display:block;\n  background: rgb(var(--edu-card));\n  color: rgb(var(--edu-ink));\n  border: 1px solid rgb(var(--edu-border));\n  border-radius: calc(var(--edu-radius) + 2px);\n  padding: 14px;\n  box-shadow: 0 4px 16px rgb(var(--edu-shadow-color) / .18);\n  transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease;  \n  outline: none;\n}\n\n.edu-mcq-wrap .edu-mcq-container edu-mcq::before {\n  counter-increment: mcq; \n  content: counter(mcq);\n  position:absolute; \n  left:10px; top:15px; \n  translate: 0 -10px;\n  width:28px; \n  height:28px; display:grid; place-items:center;\n  font-weight:700; font-size:.9rem;\n  color:white;\n  background: rgb(var(--edu-first-accent) / 0.80);  \n  border-radius: 10px;\n\n}\n\n.edu-mcq-wrap .edu-mcq-container edu-mcq:hover {\n  transform: translateY(-1px);\n\n  border-color: rgb(var(--edu-first-accent));\n}\n\n.edu-mcq-wrap .edu-mcq-container edu-mcq:focus-visible,\n.edu-mcq-wrap .edu-mcq-container edu-mcq:focus-within{\n  box-shadow: 0 0 0 3px rgb(var(--edu-first-accent) / .35),\n              0 8px 22px rgb(var(--edu-shadow-color) / .22);\n  border-color: rgb(var(--edu-first-accent));\n}\n\n/* Footer / Check button */\n.edu-mcq-wrap > footer {\n  display:flex; \n  justify-content:center;  \n  width: 100%; \n  align-items:center; \n  gap:8px;\n  padding-top: 8px;\n  border-top: 1px dashed rgb(var(--edu-border));\n}\n\n.edu-mcq-wrap .edu-mcq-check{\n  appearance:none; -webkit-appearance:none;\n  border: 1px solid rgb(var(--edu-first-accent));\n  background: linear-gradient(\n    0deg,\n    rgb(var(--edu-first-accent) / .18),\n    rgb(var(--edu-first-accent) / .28)\n  );\n  color: rgb(var(--edu--ink));\n  font-weight:700;\n  padding: 10px 14px;    \n  cursor:pointer;\n  width: 40%;\n  transition: transform .12s ease, filter .12s ease, box-shadow .15s ease;\n}\n\n.edu-mcq-wrap .edu-mcq-check:hover{\n  filter: brightness(1.05);\n  transform: translateY(-1px);\n}\n\n.edu-mcq-wrap .edu-mcq-check:active{\n  transform: translateY(0);\n  box-shadow: 0 3px 12px rgb(var(--edu-shadow-color) / .18) inset;\n}\n\n.edu-mcq-wrap .edu-mcq-check:disabled{\n  opacity:.6; cursor:not-allowed;\n  filter: grayscale(.2);\n}\n\n\n", "// MCQ\n\nimport {\n  injectStyle,\n  createSection,\n  extractTitleAndStrip,\n  takeOptionalLabel,\n  splitBlocksOutsideParens,\n  extractImage,\n  splitPipes,\n  dedupe, \n  shuffle,\n  EduMCQData,\n  getResultEl\n} from \"../../utils/utils\";\n\nimport { RendererOptions, RendererHandle, ContractType, Result } from '../types';\n\nimport baseHTML from './index.html';\nimport baseCSS from './styles.css';\n\ninterface McqFeedback {\n  total: number;\n  correct: number;\n  wrong: string[];\n  missed: string[];\n}\n\ninterface EduMcqElement extends HTMLElement {\n  data: EduMCQData;\n  showFeedback(): McqFeedback;\n}\n\ninterface MCQRendererData {\n  instruction: string;\n  blocks: Array<EduMCQData>;  \n};\n\n// ===================================================================// \n//                           MCQ RENDERER                        \n// ===================================================================//\nfunction mcqRenderer(\n\n  mount: HTMLElement,\n  data: MCQRendererData,\n  options: RendererOptions\n  \n): RendererHandle {\n\n  // base component logic \n  const {    \n    allowRetry = true,\n    resultHandler,\n    ariaLabel = '',\n    checkBtn = true\n  } = options; \n\n  const root = createSection('edu-mcq-root', ariaLabel);\n  injectStyle('edu-mcq-style', baseCSS);    \n\n  const $ = <T extends Element>(sel: string, r: ParentNode=root): T | null => \n    r.querySelector<T>(sel);\n\n  // html elements \n  let $title: HTMLHeadingElement;\n  let $container: HTMLElement;  \n  let $check: HTMLButtonElement;\n\n  // constants \n  const blocks = shuffle(data.blocks);\n  const total = data.blocks.length;\n  const startTime = Date.now();\n\n  // variables   \n  let correct = 0;\n  let score: number = 0;\n  // let wrong: Record<string, string[]> = {}; \n  let wrong: string[] = [];\n  let ids: string[] = [];  \n    \n  function init() {    \n\n    root.innerHTML = baseHTML;\n\n    $title = $(\"#mcq-title\");\n    $container = $(\"#mcq-container\");\n    $check = $(\"#mcq-check\");\n\n    if (!options.checkBtn) $check.style.display = \"none\";\n\n    render();\n    $check.addEventListener('click', check);\n  }\n\n  function render() {      \n    $title.textContent = data.instruction ?? 'No instructions';  \n    \n    blocks.forEach((block, idx) => {\n      const el = document.createElement(\"edu-mcq\") as EduMcqElement;\n      el.id = `mcq-pos-${idx}`;      \n      el.data = {\n        img: block.img ?? '',\n        question: block.question ?? '',\n        hint: block.hint ?? '',\n        options: block.options ?? [],\n        correctOptions: block.correctOptions ?? [],        \n      }    \n      ids.push(el.id);\n      $container.append(el);\n    });   \n  }\n\n  // correct screen \n  function check() {          \n  \n    ids.forEach(id => {\n    \n      const el = root.querySelector(`#${id}`) as EduMcqElement;      \n      if (!el) return;       \n      const r = el.showFeedback();          \n\n      const points = r.correct / r.total;\n      score += points;\n      if (points === 1) correct++; \n\n      r.wrong.forEach(w => {\n        wrong.push(w); \n      });\n      \n    });  \n    \n    root.setAttribute('inert', '');\n    finish();\n  }\n\n  function finish() {\n\n    const timestamp = ((Date.now() - startTime) / 1000).toFixed(1);\n    score = (score / total) * 100;\n\n    const result: Result = { \n      detail: { \n        correct: correct, \n        total: total, \n        score: score          \n      }, \n      timestamp: timestamp,\n      // create a better showcase that takes an object (string, string[]) to detail\n      // wrong answers for each question instead \n      winningEl: getResultEl(score, correct, total, timestamp, wrong)\n    };\n    \n    if (resultHandler) {\n        resultHandler(result);\n    }\n  \n  }\n\n  // Initialize and mount to parent element \n  // --------------------------------------\n  init();\n  mount.appendChild(root);\n  \n  return {\n    destroy(): void { mount.removeChild(root); },    \n    check\n  }\n\n}\n\n// ===================================================================// \n//                           MCQ PARSER                       \n// ===================================================================//\n\nfunction mcqParser(code: string): { ok: boolean, content: MCQRendererData } {\n\n  const { title, rest } = extractTitleAndStrip(code);\n  const rawBlocks = splitBlocksOutsideParens(rest);\n  \n  let out: EduMCQData[] = [];\n  let carryImg: string | undefined; \n\n  for (let raw of rawBlocks) {\n\n    if (!raw) continue;\n\n    const { label, cleaned: noLabel } = takeOptionalLabel(raw);\n    const { img, cleaned: noImg } = extractImage(noLabel); \n    if (img  && !/[=?]/.test(noImg)) {\n      carryImg = img;\n      continue \n    }\n\n    const working = noImg.trim();\n\n    const eqIdx = working.indexOf(\"=\");\n    if (eqIdx === -1) {\n      continue;\n    }\n\n    const question = working.slice(0, eqIdx).trim().replace(/\\s+/g, \" \");\n    const afterEq = working.slice(eqIdx + 1).trim();\n\n    const bracketMatches = [...afterEq.matchAll(/\\[([^\\]]+)\\]/g)];\n    const correct = dedupe(\n      bracketMatches.flatMap(m => splitPipes(m[1]))\n    );\n\n    const cleaned = afterEq.replace(/\\[|\\]/g, \"\");\n    const allOptions = dedupe(splitPipes(cleaned));\n\n    const options = shuffle(allOptions);\n\n    out.push({\n      img: img ?? carryImg,\n      question,\n      hint: label,\n      options,\n      correctOptions: correct\n    });\n\n    carryImg = undefined;\n  \n  }\n  \n  return { ok: true, content: { instruction: title, blocks: out } }\n}\n\nfunction mcqValidator(data: MCQRendererData): boolean { return true; }\n\n// ===================================================================// \n//                           PARSER                      \n// ===================================================================//\n\nconst exs = `\n@TITLE = Complete the coding questions; \n\n# Think: compilers or interpreters exist for them\nWhich of this are programming languages? = \nCSS | HTML | QML | [Typescript | Python];\n\n<https://pixabay.com/get/gae95e5da62e6f8b77c076bf3df6264f18998a4338d56f97841208742e7cce419ab2ec250cd10471cd25d0a456e9f45ae3b5e7f4863781e1eeceed900de233af6_640.png>\nWhat language of the following is best for micro-controllers? =\nC# | Java | Lua | [C | C++]; \n\n# Well... The place you are on!\nWhat is Javascript best for? = \nOS development | Desktop Linux Applications | [Web Development];\n\n<https://pixabay.com/get/g85c11ca9c972371d19aa5dd5afe4165b11b16deef90b0cd002717873a5ecd9428e628dca988789b32b9aee9777c0166e_640.png>\nWhat is one markup language in the options? = \n[XAML] | CSS | Rust | React;  \n`;\n\nexport const MCQContract: ContractType = {\n    name: \"Multiple Choice\",\n    description: \"...\",\n        \n    version: 1.0,\n    parserVersion: 1.0,\n\n    category: \"\",\n    tags: [\"\", \"\", \"\"],\n\n    usage: [\"...\", \"...\"],\n    wrong: [\"...\", \"...\"],\n\n    grammarExample: [exs],\n\n    defaultOptions: { shuffle: true, allowRetry: false, ariaLabel: \"MCQ Exercise\" },\n    implementation: { renderer: mcqRenderer, parser: mcqParser, validator: mcqValidator   },\n\n    styleTag: 'edu-mcq-style',\n    html: baseHTML,\n    css: baseCSS\n}; \n\n/**\n *\nimport random \n\n# Welcome message\nprint(\"Hello to my guessing game\")\n\ndef game():\n  \n  guess = random.randint(1, 10)\n  print(guess)\n  user_guess = input(\"Introduce a number between 1 and 10: \")\n  \n  if (user_guess == str(guess)):\n    print(\"You are right! \")\n  else:\n    print(\"Sorry, you failed :(\")\n  \n  \ngame()\n\n\n *\n */\n", "<style>\n\n.letter-picker-wrapper { position: relative; }\n\n.letter-picker-wrapper .display {\n  cursor: pointer; \n  padding: 16px 20px; \n  color: rgb(var(--edu-first-accent)); \n  outline: none;\n  user-select: none; \n  font-size: 1.5rem;\n}\n\n.letter-picker-wrapper .display.placeholder { opacity: .6; }\n\n:host([mode=\"simple\"]) .display { border-bottom: 2px solid rgb(var(--edu-border)); }\n:host([mode=\"simple\"]:focus-within) .display { border-bottom-color: rgb(var(--edu-first-accent)); }\n\n:host([mode=\"box\"]) .letter-picker-wrapper .display {\n  border: 2px solid rgb(var(--edu-border)); border-radius: 8px; min-width: 60px;\n  text-align: center; \n  background: rgb(var(--edu-bg)); \n  box-shadow: 0 2px 6px rgb(var(--edu-muted));\n}\n\n:host([mode=\"box\"]:focus-within) .display { \n  border-color: rgb(var(--edu-first-accent)); \n}\n\n.letter-picker-wrapper .picker {\n  position: absolute; \n  top: calc(100% + 6px); \n  left: 0; \n  display: none;\n  grid-template-columns: repeat(7, 1fr); \n  gap: 4px; \n  padding: 8px;\n  background: rgb(var(--edu-bg)); \n  border: 1px solid rgb(var(--edu-border)); \n  border-radius: 8px;\n  box-shadow: 0 6px 14px rgb(var(--edu-muted));\n  z-index: 1000;\n}\n\n.letter-picker-wrapper .picker button {\n  border: none;   \n  background: rgb(var(--edu-card)); \n  color: rgb(var(--edu-ink));\n  padding: 6px; \n  border-radius: 4px;\n  cursor: pointer; \n  font-weight: 700;\n}\n\n.letter-picker-wrapper .picker button:hover, .letter-picker-wrapper .picker button:focus {   \n  background: rgb(var(--edu-first-accent)); \n  color: rgb(var(--edu-ink)); \n  outline: none; \n}\n</style>\n\n<div class=\"letter-picker-wrapper\" id=\"wrap\">\n  <div class=\"display\" id=\"display\" part=\"display\" role=\"button\" aria-haspopup=\"listbox\" aria-expanded=\"false\" tabIndex=\"0\"></div>\n  <div class=\"picker\" id=\"picker\" part=\"picker\" role=\"listbox\">\n</div>\n\n", "// letter-picker.ts\nimport innerHtml from \"./html/letter-picker.html\";\n\ntype Mode = \"simple\" | \"grid\";\n\nexport class LetterPicker extends HTMLElement {\n\n  static get observedAttributes() {\n    return [\"value\", \"mode\", \"placeholder\", \"disabled\"] as const;\n  }\n\n  private _open = false;\n  private _display!: HTMLElement;\n  private _picker!: HTMLElement;\n\n  // Bound handlers so add/removeEventListener use the same fn refs\n  private _onDocClick = (e: Event) => {\n    const path = (e.composedPath && e.composedPath()) || [];\n    if (!path.includes(this)) this.close();\n  };\n\n  private _onDocKey = (e: KeyboardEvent) => {\n    if (!this._open) return;\n    if (e.key === \"Escape\") {\n      e.stopPropagation();\n      this.close();\n      (this._display as HTMLElement).focus?.();\n      return;\n    }\n    // Quick type-to-select: A\u2013Z picks and closes\n    if (/^[a-z]$/i.test(e.key)) {\n      const letter = e.key.toUpperCase();\n      const btn = this._picker.querySelector<HTMLButtonElement>(`button[data-letter=\"${letter}\"]`);\n      if (btn) {\n        this.value = letter;\n        this.close();\n        this.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      }\n    }\n  };\n\n  constructor() {\n    super();\n    const root = this.attachShadow({ mode: \"open\" });\n    root.innerHTML = innerHtml;\n\n    this._display = root.getElementById(\"display\") as HTMLElement;\n    this._picker = root.getElementById(\"picker\") as HTMLElement;\n\n    // Build A\u2013Z once\n    for (let i = 65; i <= 90; i++) {\n      const letter = String.fromCharCode(i);\n      const b = document.createElement(\"button\");\n      b.type = \"button\";\n      b.textContent = letter;\n      b.dataset.letter = letter;\n      b.setAttribute(\"role\", \"option\");\n      b.addEventListener(\"click\", () => {\n        this.value = letter;\n        this.close();\n        this.dispatchEvent(new Event(\"change\", { bubbles: true }));\n      });\n      this._picker.appendChild(b);\n    }\n\n    // Toggle/open/close\n    this._display.addEventListener(\"click\", () => this.toggle());\n    this._syncDisplay();\n  }\n\n  // Attributes \u2194 properties\n  get placeholder(): string | null {\n    return this.getAttribute(\"placeholder\");\n  }\n  set placeholder(v: string | null) {\n    if (v == null) this.removeAttribute(\"placeholder\");\n    else this.setAttribute(\"placeholder\", v);\n  }\n\n  get mode(): Mode {\n    return (this.getAttribute(\"mode\") as Mode) ?? \"simple\";\n  }\n  set mode(v: Mode) {\n    this.setAttribute(\"mode\", v ?? \"simple\");\n  }\n\n  get value(): string {\n    return (this.getAttribute(\"value\") || \"\").toUpperCase();\n  }\n  set value(v: string) {\n    const clean = (v || \"\").toUpperCase().replace(/[^A-Z]/g, \"\");\n    this.setAttribute(\"value\", clean);\n  }\n\n  get disabled(): boolean {\n    return this.hasAttribute(\"disabled\");\n  }\n  set disabled(v: boolean) {\n    if (v) this.setAttribute(\"disabled\", \"\");\n    else this.removeAttribute(\"disabled\");\n    this._display.setAttribute(\"aria-disabled\", v ? \"true\" : \"false\");\n  }\n\n  connectedCallback() {\n    // Upgrade pre-defined properties\n    this._upgradeProperty(\"placeholder\");\n    this._upgradeProperty(\"mode\");\n    this._upgradeProperty(\"value\");\n    this._upgradeProperty(\"disabled\");\n\n    if (!this.hasAttribute(\"mode\")) this.mode = \"simple\";\n    this._syncDisplay();\n\n    // Keyboard support on the host\n    this.addEventListener(\"keydown\", (e) => {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        this.toggle();\n      }\n    });\n  }\n\n  disconnectedCallback() {\n    this.close();\n  }\n\n  attributeChangedCallback(name: string) {\n    if (name === \"value\" || name === \"placeholder\") this._syncDisplay();\n    if (name === \"disabled\" && this.disabled) this.close();\n  }\n\n  // Public API\n  open() {\n    if (this._open || this.disabled) return;\n    this._picker.style.display = \"grid\";\n    this._display.setAttribute(\"aria-expanded\", \"true\");\n    document.addEventListener(\"click\", this._onDocClick, true);\n    document.addEventListener(\"keydown\", this._onDocKey);\n    this._open = true;\n  }\n\n  close() {\n    if (!this._open) return;\n    this._picker.style.display = \"none\";\n    this._display.setAttribute(\"aria-expanded\", \"false\");\n    document.removeEventListener(\"click\", this._onDocClick, true);\n    document.removeEventListener(\"keydown\", this._onDocKey);\n    this._open = false;\n  }\n\n  toggle() {\n    this._open ? this.close() : this.open();\n  }\n\n  // Helpers\n  private _syncDisplay() {\n    const val = this.value;\n    const ph = this.placeholder || \"Pick a letter\";\n    this._display.textContent = val || ph;\n    this._display.classList.toggle(\"placeholder\", !val);\n  }\n\n  private _upgradeProperty(prop: keyof LetterPicker) {\n    \n    if (Object.prototype.hasOwnProperty.call(this, prop)) {\n      \n      const value = this[prop];\n      \n      delete this[prop];\n      // @ts-expect-error: restore via setter\n      this[prop] = value;\n    }\n  }\n}\n\nif (!customElements.get('letter-picker')) customElements.define('letter-picker', LetterPicker);\n", "<style>\n  :host {\n    --_radius: var(--edu-radius, .5rem);\n    --_shadow: 0 4px 14px rgb(var(--edu-shadow-color) / 0.15);\n    --_shadow-hover: 0 8px 24px rgb(var(--edu-shadow-color) / 0.25);\n\n    display: block;\n    color: rgb(var(--edu-ink));\n    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;\n    background: rgb(var(--edu-bg));\n  }\n  \n  .mcq {\n    background: linear-gradient(145deg, rgb(var(--edu-card)), rgb(var(--edu-first-accent) / 0.20));\n    border: 1px solid rgb(var(--edu-border, 51 65 85));\n    border-radius: var(--_radius);\n    box-shadow: var(--_shadow);\n    overflow: hidden;\n    transition: box-shadow .2s ease;\n  }\n  .mcq:hover {\n    box-shadow: var(--_shadow-hover);\n  }\n  \n  header {\n    display: grid;\n    gap: 16px;\n    padding: 20px;    \n    grid-template-columns: 1fr;\n    align-items: center;\n    background: rgb(var(--edu-muted, 30 41 59) / 0.2);\n    border-bottom: 1px solid rgb(var(--edu-border, 51 65 85));\n  }\n\n  .media {\n    position: relative;\n    width: 100%;    \n    max-height: 320px;\n    border-radius: calc(var(--_radius) - 2px);\n    background: rgb(var(--edu-bg) / 0.80);\n    overflow: hidden;\n    border: 1px solid rgb(var(--edu-border) / 0.5);\n  }\n  .media img, .media video {\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    display: block;\n  }\n  \n  .prompt-row {\n    display: grid;\n    gap: 10px;\n  }\n\n  .title {\n    display: flex;\n    justify-content: space-between;\n    align-items: flex-start;\n    gap: 16px;\n  }\n\n  h2 {\n    margin: 0;\n    font-size: 1.25rem; \n    line-height: 1.4;\n    font-weight: 600;\n    color: rgb(var(--edu-ink));\n  }\n\n  .hint-btn {\n    border: 1px solid rgb(var(--edu-border));\n    border-radius: 999px;\n    padding: 6px 14px;\n    font-size: .875rem;\n    cursor: pointer;\n    color: rgb(var(--edu-ink));\n    background: rgb(var(--edu-muted) / 0.6);\n    transition: all .2s ease;\n    flex-shrink: 0; \n  }\n  .hint-btn:hover {\n    box-shadow: var(--_shadow-hover);\n    transform: translateY(-2px);\n    border-color: rgb(var(--edu-border) / 0.5);\n    background: rgb(var(--edu-muted));\n  }\n\n  .hint {\n    display: none;\n    margin-top: 6px;\n    font-size: .95rem;\n    color: rgb(var(--edu-ink));\n    background: rgb(var(--edu-bg) / 0.4);\n    padding: 12px;\n    border-radius: calc(var(--_radius) - 4px);\n    border-left: 3px solid rgb(var(--edu-first-accent));\n  }\n  :host([hint-open]) .hint, .hint[open] {\n    display: block;\n  }\n  \n  main {\n    padding: 20px;\n  }\n\n  #options {\n    display: grid;\n    gap: 12px;\n    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));\n  }\n\n  .option {\n    display: grid;\n    grid-template-columns: 32px 1fr;\n    gap: 12px;\n    align-items: center;\n    background: rgb(var(--edu-muted) / 0.5);\n    border: 1px solid rgb(var(--edu-border));\n    border-radius: var(--_radius);\n    padding: 12px;\n    cursor: pointer;\n    user-select: none;\n    transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease, background-color .2s ease;\n    outline: none;\n  }\n\n  .option:hover {\n    box-shadow: var(--_shadow-hover);\n    transform: translateY(-2px);\n    border-color: rgb(var(--edu-first-accent));\n  }\n  .option:focus-visible {\n    outline: 2px solid rgb(var(--edu-first-accent));\n    outline-offset: 2px;\n  }\n\n  .badge {\n    width: 28px;\n    height: 28px;\n    display: grid;\n    place-items: center;\n    border-radius: 999px;\n    font-weight: 700;\n    font-size: .9rem;\n    color: rgb(var(--edu-inverted-ink));\n    background: rgb(var(--edu-first-accent));\n    border: 1px solid rgb(var(--edu-border));\n  }\n\n  .text {\n    margin: 0;\n    color: rgb(var(--edu-ink));\n  }\n\n  .option[data-state=\"selected\"] {\n    background: rgb(var(--edu-first-accent) / 0.12);\n    border-color: rgb(var(--edu-first-accent));\n  }\n  .option[data-state=\"correct\"] {\n    background: rgb(var(--edu-success) / 0.14);\n    border-color: rgb(var(--edu-success));\n  }\n  .option[data-state=\"wrong\"] {\n    background: rgb(var(--edu-error) / 0.16);\n    border-color: rgb(var(--edu-error));\n  }\n  .option[data-state=\"warning\"] {\n    background: rgb(var(--edu-warning) / 0.16);\n    border-color: rgb(var(--edu-warning));\n  }\n  \n  footer {\n    display: flex;\n    gap: 12px;\n    flex-wrap: wrap;\n    margin-top: 24px;\n    padding-top: 16px;\n    border-top: 1px solid rgb(var(--edu-border));\n  }\n  .btn {\n    border: 1px solid rgb(var(--edu-border));\n    border-radius: 8px;\n    background: rgb(var(--edu-muted) / 0.6);\n    color: rgb(var(--edu-ink));\n    padding: 10px 16px;\n    cursor: pointer;\n    font-size: 0.95rem;\n    font-weight: 500;\n    transition: all .2s ease;\n  }\n  .btn:hover {\n    box-shadow: var(--_shadow-hover);\n    transform: translateY(-2px);\n    border-color: rgb(var(--edu-border) / 0.7);\n  }\n  \n  /* Primary button style for \"Check\" */\n  #checkBtn {\n    background: rgb(var(--edu-first-accent));\n    color: #fff;\n    border-color: rgb(var(--edu-first-accent));\n  }\n  #checkBtn:hover {\n     background: rgb(110 121 235); /* A slightly darker accent for hover */\n  }\n  \n  :host([no-media]) header {\n    grid-template-columns: 1fr;\n  }\n  :host([no-media]) .media {\n    display: none;\n  }\n</style>\n\n<section class=\"mcq\" part=\"container\">\n  <header>\n    <div class=\"media\"><img id=\"media\" alt=\"\"></div>\n    <div class=\"prompt-row\">\n      <div class=\"title\">\n        <h2 id=\"prompt\"></h2>\n        <button class=\"hint-btn\" id=\"hintToggle\" type=\"button\" aria-expanded=\"false\">Hint</button>\n      </div>\n      <div class=\"hint\" id=\"hint\"></div>\n    </div>\n  </header>\n\n  <main>\n    <div id=\"options\" role=\"group\" aria-label=\"Options\"></div>\n    <footer style=\"display:none\">\n      <button class=\"btn\" id=\"clearBtn\" type=\"button\">Clear</button>\n      <button class=\"btn\" id=\"checkBtn\" type=\"button\">Check</button>\n    </footer>\n  </main>\n</section>\n", "import innerHTML from \"./html/edu-mcq.html\";\nimport { EduMCQData } from \"../utils/utils\";\nconst tpl = document.createElement(\"template\");\ntpl.innerHTML = innerHTML; \n\nconst ABC = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';  \n\nexport class EduMCQ extends HTMLElement {\n  static get observedAttributes() { return ['hint-open'] }\n\n  private _$prompt!: HTMLHeadingElement; \n  private _$hint!: HTMLDivElement;\n  private _$media!: HTMLImageElement;\n  private _$opts!: HTMLDivElement;\n  private _$hintBtn!: HTMLButtonElement;\n\n  private _data: EduMCQData = { \n    img: '', \n    question: '', \n    hint: '', \n    options: [], \n    correctOptions: [] \n  }; \n  \n  private _selected = new Set<string>(); // state   \n  private _isChecked = false;\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: 'open' }).appendChild(tpl.content.cloneNode(true));\n    \n    const $ = <T extends Element>(sel: string, r: ParentNode = this.shadowRoot!): T | null => \n      r.querySelector<T>(sel);\n\n    this._$prompt = $(\"#prompt\") as HTMLHeadingElement;\n    this._$hint = $(\"#hint\") as HTMLDivElement;\n    this._$media = $(\"#media\") as HTMLImageElement;\n    this._$opts = $(\"#options\") as HTMLDivElement;\n    this._$hintBtn = $(\"#hintToggle\") as HTMLButtonElement;    \n\n    this._$hintBtn.addEventListener(\"click\", this.toggleHint);\n\n    // would be good to add an internal keyboard event listener \n    // for inter-options navigation         \n  }\n\n  set data(v: EduMCQData) {\n    const opts = Array.from(new Set([...(v?.options ?? []), ...(v?.correctOptions ?? [])]));;\n    this._data = {\n      img: v?.img ?? '',\n      hint: v?.hint ?? '',\n      question: v?.question ?? '',\n      options: opts,\n      correctOptions: Array.isArray(v?.correctOptions) ? v.correctOptions : [],\n    };\n    this.render();\n  }\n\n  render() {\n    this._$prompt.textContent = this._data.question || 'No question';\n    this._$hint.textContent = this._data.hint || 'No hints bro :('; \n\n    const imgUrl = this._data.img;\n    if (imgUrl) {\n      this._$media.src = imgUrl; \n      this.removeAttribute('no-media');\n    } else {\n      this.setAttribute('no-media', '');\n    }        \n\n    // clean-up\n    this._$opts.innerHTML = '';\n    this._selected.clear();\n\n    this._data.options.forEach((text, i) => {\n      const btn = document.createElement(\"button\");\n      btn.type = 'button';\n      btn.className = 'option';\n      btn.setAttribute('role', 'checkbox');\n      btn.setAttribute('aria-checked', 'false');\n      btn.dataset.value = text; \n\n      btn.innerHTML = `\n        <span class=\"badge\">${ABC[i] ?? ''}</span>\n        <p class=\"text\">${text}</p>\n      `;\n\n      btn.addEventListener('click', () => {\n        const v = btn.dataset.value;\n        if (this._selected.has(v)) this._selected.delete(v);\n        else this._selected.add(v);        \n        this.syncSelectedUI();\n      });\n\n      this._$opts.appendChild(btn);\n    });\n  }\n\n  private toggleHint = () => {\n    const open: boolean = !this.hasAttribute('hint-open');\n    this.toggleAttribute('hint-open', open);\n    this._$hintBtn.setAttribute('aria-expanded', String(open));\n  }\n\n  // whenever we are not lazy enough to implement \n  clear() {}\n  \n  showFeedback(): {\n    total: number, \n    correct: number, \n    wrong: string[],\n    missed: string[] \n  } {    \n\n    let wrong: string[] = [];\n    let missed: string[] = [];\n    let correct: number = 0;\n    let total: number = this._data.correctOptions.length; \n    \n    if (this._isChecked) return;\n    const correctSet = new Set(this._data.correctOptions);\n    [...this._$opts.children].forEach((el: HTMLButtonElement) => {\n      const v = el.dataset.value;\n      const isSel = this._selected.has(v);\n      \n      if (!isSel && this._data.correctOptions.includes(v)) {                 \n        el.dataset.state = 'warning';\n        missed.push(v);\n        return;\n      };      \n\n      if (!this._data.correctOptions.includes(v) && isSel) wrong.push(v);      \n      \n      const isCorrect = correctSet.has(v);\n      el.dataset.state = isSel ? (isCorrect ? 'correct' : 'wrong') : '';      \n      if (isCorrect) correct++;\n      \n      if (!el.dataset.state) el.removeAttribute('data-state');\n    });\n    \n    this.setAttribute('inert', '');\n    this._isChecked = true; \n\n    return {\n      total: total, \n      correct: correct, \n      wrong: wrong,\n      missed: missed \n    }\n  }\n  \n  syncSelectedUI() {\n    [...this._$opts.children].forEach((el: HTMLButtonElement) => {\n\n      const v = el.dataset.value;\n      const sel = this._selected.has(v);\n      el.setAttribute('aria-checked', String(sel));\n      el.dataset.state = sel ? 'selected' : '';\n      if (!sel) el.removeAttribute('data-state');\n      \n    });\n  }\n\n  attributeChangedCallback(name: string) {\n    if (name === 'hint-open') this._$hintBtn?.setAttribute('aria-expanded', String(this.hasAttribute('hint-open')));\n  }\n}\n\nif (!customElements.get('edu-mcq')) customElements.define('edu-mcq', EduMCQ);\n", " <style>\n  :host { \n    /* Custom Props here, when you are not lazy enough to add them */\n    font-family: system-ui, sans-serif; \n  }\n  \n  .wrap { position: relative; display: inline-block; }\n  \n  button.swatch {\n    width: 38px; \n    height: 32px; \n    border-radius: 8px; \n    border: 1px solid #ccc;\n    box-shadow: 0 1px 2px rgba(0,0,0,.08); \n    cursor: pointer;\n  }\n  \n  .tooltip {\n    position: absolute; \n    z-index: 1000; \n    top: 110%; \n    left: 0;\n    min-width: 220px; \n    background: #fff; \n    border: 1px solid #e5e7eb;\n    border-radius: 10px; \n    box-shadow: 0 12px 30px rgba(0,0,0,.12);\n    padding: 10px; display: none;\n  }\n  \n  .tooltip.open { display: block; }\n  \n  header { \n    display: flex; \n    justify-content: space-between; \n    align-items: center; \n    gap: 8px; \n  }\n  \n  header .name { font-size: 0.9rem; font-weight: 600; }\n  \n  .grid {\n    display: grid; \n    grid-template-columns: repeat(6, 1fr); \n    gap: 8px; \n    padding: 10px 0;\n  }\n  .opt {\n    width: 28px; \n    height: 28px; \n    border-radius: 6px; \n    border: 1px solid #d1d5db;\n    cursor: pointer;\n  }\n  .opt[aria-selected=\"true\"] { outline: 2px solid #111827; outline-offset: 1px; }\n  \n  footer { display: flex; gap: 6px; flex-wrap: wrap; }\n  footer .tab {\n    padding: 6px 10px; \n    border-radius: 999px; \n    border: 1px solid #e5e7eb; \n    background: #f9fafb;\n    cursor: pointer; \n    font-size: .85rem;\n  }\n  footer .tab.active { \n    background: #111827; \n    color: white; \n    border-color: #111827; \n  } \n</style>\n    \n<div class=\"wrap\">\n  <button class=\"swatch\" title=\"Open color picker\"></button>\n  <div class=\"tooltip\" role=\"dialog\" aria-label=\"Choose a color\">\n    <header>\n      <div class=\"name\"></div>\n      <div class=\"chip\" style=\"width:18px;height:18px;border-radius:4px;border:1px solid #d1d5db;\"></div>\n    </header>\n    <div class=\"grid\"></div>\n    <footer class=\"tabs\"></footer>\n  </div>\n</div>\n", "import baseHTML from \"./html/color-picker.html\";\n\ntype ColorItem = { name: string; hex: string };\ntype PaletteMap = Record<string, ColorItem[]>;\n\nexport class ColorPicker extends HTMLElement {\n  static get observedAttributes() { return [\"value\"]; }\n\n  // Backing fields\n  private _palettes: PaletteMap = {\n    light: [\n      { name: \"Red\", hex: \"#ef4444\" }, { name: \"Orange\", hex: \"#f97316\" },\n      { name: \"Yellow\", hex: \"#f59e0b\" }, { name: \"Beige\", hex: \"#f5f5dc\" },\n      { name: \"Green\", hex: \"#22c55e\" }, { name: \"Blue\", hex: \"#3b82f6\" },\n      { name: \"Purple\", hex: \"#8b5cf6\" }, { name: \"Pink\", hex: \"#ec4899\" },\n      { name: \"Brown\", hex: \"#a16207\" }, { name: \"Gray\", hex: \"#9ca3af\" },\n      { name: \"Black\", hex: \"#000000\" }, { name: \"White\", hex: \"#ffffff\" }\n    ],\n    dark: [\n      { name: \"Dark Red\", hex: \"#991b1b\" }, { name: \"Dark Orange\", hex: \"#9a3412\" },\n      { name: \"Gold\", hex: \"#b45309\" }, { name: \"Khaki\", hex: \"#bdb76b\" },\n      { name: \"Dark Green\", hex: \"#166534\" }, { name: \"Dark Blue\", hex: \"#1e3a8a\" },\n      { name: \"Indigo\", hex: \"#4338ca\" }, { name: \"Magenta\", hex: \"#9d174d\" },\n      { name: \"Dark Brown\", hex: \"#78350f\" }, { name: \"Dark Gray\", hex: \"#4b5563\" },\n      { name: \"Near Black\", hex: \"#111827\" }, { name: \"Ivory\", hex: \"#fffff0\" }\n    ],\n  };\n  private _activePaletteKey: string = Object.keys(this._palettes)[0];\n  private _value: ColorItem = this._palettes[this._activePaletteKey][0];\n\n  // Refs\n  private $wrap!: HTMLDivElement;\n  private $swatch!: HTMLButtonElement;\n  private $tooltip!: HTMLDivElement;\n  private $name!: HTMLSpanElement;\n  private $chip!: HTMLSpanElement;\n  private $grid!: HTMLDivElement;\n  private $tabs!: HTMLDivElement;\n\n  constructor() {\n    super();\n    this.attachShadow({ mode: \"open\" });\n\n    const root = document.createElement(\"div\");\n    root.innerHTML = baseHTML;\n    this.shadowRoot!.append(root);\n\n    // refs\n    this.$wrap = this.shadowRoot!.querySelector(\".wrap\") as HTMLDivElement;\n    this.$swatch = this.shadowRoot!.querySelector(\".swatch\") as HTMLButtonElement;\n    this.$tooltip = this.shadowRoot!.querySelector(\".tooltip\") as HTMLDivElement;\n    this.$name = this.shadowRoot!.querySelector(\".name\") as HTMLSpanElement;\n    this.$chip = this.shadowRoot!.querySelector(\".chip\") as HTMLSpanElement;\n    this.$grid = this.shadowRoot!.querySelector(\".grid\") as HTMLDivElement;\n    this.$tabs = this.shadowRoot!.querySelector(\".tabs\") as HTMLDivElement;\n\n    // events\n    this.$swatch.addEventListener(\"click\", () => this.toggle());\n    document.addEventListener(\"click\", (e: MouseEvent) => {\n      const tgt = e.target as (Node | null);\n      if (tgt && !this.contains(tgt) && !this.shadowRoot?.contains(tgt)) this.close();\n    });\n  }\n\n  // Public API\n  get palettes(): PaletteMap { return this._palettes; }\n  set palettes(obj: PaletteMap) {\n    if (obj && typeof obj === \"object\" && Object.keys(obj).length) {\n      this._palettes = obj;\n      this._activePaletteKey = Object.keys(obj)[0];\n      this._value = obj[this._activePaletteKey][0];\n      this.render();\n    }\n  }\n\n  get activePaletteKey(): string { return this._activePaletteKey; }\n  set activePaletteKey(k: string) {\n    if (k in this._palettes) this._activePaletteKey = k;\n  }\n\n  get value(): ColorItem { return this._value; }\n  set value(v: ColorItem) {\n    if (v && v.hex) {\n      this._value = v;\n      this.updateHeader();\n      this.updateSwatch();\n      this.markSelected();\n      this.dispatch();\n    }\n  }\n\n  attributeChangedCallback(name: string, _old: string | null, val: string | null) {\n    if (name === \"value\" && val) {\n      try {\n        const v = JSON.parse(val) as ColorItem;\n        if (v && v.hex) this.value = v;\n      } catch { /* ignore bad JSON */ }\n    }\n  }\n\n  connectedCallback() { this.render(); }\n\n  // UI\n  private render() {\n    this.renderTabs();\n    this.renderGrid();\n    this.updateHeader();\n    this.updateSwatch();\n    this.markSelected();\n  }\n\n  private renderTabs() {\n    this.$tabs.innerHTML = \"\";\n    Object.keys(this._palettes).forEach((key) => {\n      const b = document.createElement(\"button\");\n      b.className = \"tab\" + (key === this._activePaletteKey ? \" active\" : \"\");\n      b.textContent = key;\n      b.addEventListener(\"click\", () => {\n        this.activePaletteKey = key;\n        this.renderGrid();\n        this.updateHeader();\n        this.markSelected();\n        this.$tabs.querySelectorAll(\".tab\").forEach((t) => t.classList.remove(\"active\"));\n        b.classList.add(\"active\");\n      });\n      this.$tabs.appendChild(b);\n    });\n  }\n\n  private renderGrid() {\n    this.$grid.innerHTML = \"\";\n    const list = this._palettes[this._activePaletteKey] || [];\n    list.forEach((item) => {\n      const btn = document.createElement(\"button\");\n      btn.className = \"opt\";\n      btn.style.background = item.hex;\n      btn.title = `${item.name} (${item.hex})`;\n      btn.setAttribute(\"role\", \"button\");\n      btn.addEventListener(\"click\", () => { this.value = item; });\n      this.$grid.appendChild(btn);\n    });\n  }\n\n  private updateHeader() {\n    const v = this._value || { name: \"\", hex: \"#ffffff\" };\n    this.$name.textContent = v.name;\n    this.$chip.style.background = v.hex;\n  }\n\n  private updateSwatch() {\n    const v = this._value || { hex: \"#ffffff\" } as ColorItem;\n    this.$swatch.style.background = v.hex;\n  }\n\n  private markSelected() {\n    const v = this._value;\n    this.$grid.querySelectorAll<HTMLButtonElement>(\".opt\").forEach((btn) => {\n      btn.setAttribute(\n        \"aria-selected\",\n        btn.style.background.replace(/\\s/g, \"\").toLowerCase() === (v?.hex || \"\").toLowerCase()\n          ? \"true\"\n          : \"false\"\n      );\n    });\n  }\n\n  private toggle() { this.$tooltip.classList.toggle(\"open\"); }\n  private close() { this.$tooltip.classList.remove(\"open\"); }\n\n  private dispatch() {\n    this.dispatchEvent(new CustomEvent(\"colorchange\", {\n      bubbles: true,\n      detail: { name: this._value.name, hex: this._value.hex, palette: this._activePaletteKey }\n    }));\n  }\n}\n\nif (!customElements.get('color-picker')) customElements.define(\"color-picker\", ColorPicker);\n\n"],
  "mappings": "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",
  "names": ["injectStyle", "id", "css", "element", "shuffle", "arr", "shuffled", "i", "j", "createSection", "cn", "ariaLabel", "root", "removeDistractors", "s", "reSingle", "reGlobal", "distractors", "replaced", "m", "x", "resultString", "extractTitleAndStrip", "source", "re", "title", "rest", "takeOptionalLabel", "block", "firstLine", "arrow", "hash", "label", "cleaned", "splitBlocksOutsideParens", "out", "buf", "depth", "ch", "piece", "tail", "extractImage", "splitPipes", "dedupe", "getResultEl", "score", "correct", "total", "timestamp", "wrong", "ul", "upload", "li", "winningContainer", "parseMatching", "exs", "r", "removeDistractors", "distractors", "exercise", "pairs", "chunks", "c", "hasEq", "hasColon", "eqCount", "colonCount", "sep", "left", "right", "p", "s", "reSingle", "reGlobal", "replaced", "m", "x", "resultString", "items", "data", "column", "i", "answerKey", "data", "i", "SOUND_FILES", "ctx", "getCtx", "bufferCache", "fileUrl", "file", "loadBuffer", "name", "ac", "resp", "data", "playSound", "opts", "buf", "src", "gain", "preloadSounds", "names", "all", "unlockAudio", "original_default", "styles_default", "matchingPageRenderer", "mount", "data", "options", "doShuffle", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "answers", "answerKey", "right", "shuffle", "items", "left", "rightWithDistractors", "state", "colors", "total", "startTime", "pairColors", "wrong", "createMatchItem", "text", "type", "id", "item", "handleItemClick", "playSound", "e", "leftId", "rightId", "oldLeft", "oldRight", "updateDisplay", "replayAnim", "el", "disableAll", "check", "correctMatches", "leftEl", "rightEl", "finish", "leftItems", "rightItems", "scoreEl", "init", "original_default", "$checkBtn", "leftContainer", "rightContainer", "timestamp", "score", "result", "getResultEl", "event", "matchingValidator", "exs", "MatchingContract", "parseMatching", "wheels_default", "styles_default", "matchingWheelsRenderer", "mount", "data", "options", "doShuffle", "allowRetry", "resultHandler", "ariaLabel", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "answers", "answerKey", "startTime", "$topLabel", "$bottomLabel", "$lives", "$solvedList", "$barFill", "topPool", "shuffle", "items", "bottomPool", "iT", "iB", "solved", "update", "pushSolved", "top", "bottom", "li", "correctState", "isCorrect", "btn", "disableAll", "check", "x", "finish", "init", "tpl", "wheels_default", "timestamp", "el", "matchingWheelsValidator", "exs", "MatchingWheelsContract", "parseMatching", "trueFalse_default", "styles_default", "trueFalseRenderer", "mount", "data", "options", "doShuffle", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "questions", "shuffle", "answerMap", "picks", "activeIndex", "correct", "score", "wrong", "total", "startTime", "$list", "$picker", "$checkAll", "$dialogLabel", "label", "v", "conversion", "disableAll", "init", "trueFalse_default", "val", "chip", "item", "check", "renderQuestions", "row", "i", "el", "prompt", "e", "correctValue", "child", "question", "pick", "finish", "timestamp", "result", "getResultEl", "parseTrueFalse", "code", "errors", "matches", "m", "match", "sep", "left", "rightRaw", "p", "right", "normalize", "validateTrueFalse", "validRightValues", "exs", "TrueFalseContract", "single_default", "styles_default", "matchingSingleRenderer", "mount", "data", "options", "doShuffle", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "resultMap", "answerKey", "questions", "shuffle", "items", "answers", "startTime", "$dots", "$hintBtn", "$hintText", "$questionText", "$bank", "$holder", "$dropzone", "$prev", "$next", "$checkBtn", "els", "picks", "q", "idx", "left", "item", "state", "init", "single_default", "$", "cn", "check", "staggerAnimation", "updateDisplay", "updateHolder", "child", "getColumnNames", "code", "leftRe", "rightRe", "mLeft", "m", "mRight", "el", "createAnswer", "text", "b", "renderNavigation", "_", "i", "isLast", "btn", "t", "ans", "correctVal", "a", "finish", "timestamp", "result", "getResultEl", "validateMatchingSingle", "exs", "MatchingSingleContract", "parseMatching", "concepts_default", "styles_default", "conceptsExerciseRenderer", "mount", "data", "options", "doShuffle", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "$btn", "$main", "$title", "answers", "answerKey", "left", "shuffle", "items", "right", "total", "startTime", "correct", "score", "wrong", "init", "concepts_default", "i", "createConceptSection", "createSelect", "check", "select", "defaultEl", "opt", "optEl", "idx", "labText", "selectEl", "container", "conceptIdx", "lab", "correctVal", "child", "q", "sel", "finish", "timestamp", "result", "getResultEl", "event", "validateConceptsDefinition", "ConceptsDefinitionContract", "parseMatching", "manual_default", "style_default", "styleTag", "manualExerciseRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "style_default", "$", "sel", "r", "$chips", "$input", "$addBtn", "$checkBtn", "$counter", "$instruction", "$containerMessage", "total", "startTime", "palette", "answers", "escapeHtml", "s", "m", "correct", "wrong", "isEmpty", "init", "manual_default", "$btnContainer", "e", "addChip", "check", "t", "updateCounter", "raw", "ch", "pulse", "chip", "el", "amount", "child", "idx", "answer", "isCorrect", "w", "allCorrect", "finish", "timestamp", "score", "result", "getResultEl", "parseManual", "code", "lines", "l", "instruction", "words", "line", "validateManual", "exs", "ManualContract", "single_default", "styles_default", "blanksSingleRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "total", "startTime", "$word", "$instruction", "$progress", "$prev", "$next", "$checkBtn", "state", "checked", "idx", "slideMap", "score", "correct", "wrong", "slideDom", "buildSlide", "i", "item", "answer", "blanks", "wrap", "pos", "ch", "lp", "saved", "updateState", "div", "renderSlide", "node", "id", "val", "check", "word", "all", "good", "isCorrect", "selected", "expected", "finish", "init", "single_default", "$container", "e", "timestamp", "result", "getResultEl", "extractBlanks", "raw", "inBlank", "outIdx", "blanksSingleParser", "code", "re", "m", "hint", "rawWord", "BlanksSingleValidator", "exs", "BlanksSingleContract", "createDSLParser", "splitPipes", "s", "t", "dedupe", "arr", "shuffle", "array", "currentIndex", "randomIndex", "buildGrammar", "ctx", "parseTX", "content", "pos", "tokens", "answers", "id", "parseNM", "values", "ranges", "m", "min", "max", "n", "parseSL", "correct", "cleaned", "options", "c", "o", "optsHTML", "parseIMG", "rawUrl", "rawAlt", "url", "altRaw", "alt", "parse", "code", "grammar", "errors", "i", "textBuf", "ch", "currentPos", "fn", "closed", "parser", "e", "validateData", "_data", "checkAnswers", "answerMap", "parent", "details", "total", "getEl", "spec", "el", "ok", "got", "v", "a", "isInt", "inSingles", "inRanges", "r", "test", "reading_default", "styles_default", "dsl", "createDSLParser", "blanksReadingRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "$instruction", "$container", "$finish", "$p", "startTime", "total", "correct", "wrong", "score", "init", "reading_default", "check", "correctVal", "val", "finish", "timestamp", "result", "getResultEl", "BlanksReadingContract", "blanksReadingRenderer", "dsl", "reading_default", "styles_default", "multiple_default", "styles_default", "dsl", "createDSLParser", "blanksMultipleRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "$title", "$instruction", "$container", "$finish", "startTime", "total", "correct", "score", "wrong", "init", "multiple_default", "createBlocks", "check", "block", "p", "html", "val", "finish", "timestamp", "result", "getResultEl", "blanksMultipleParser", "code", "parse", "title", "rest", "extractTitleAndStrip", "rawBlocks", "splitBlocksOutsideParens", "blocks", "raw", "trimmed", "label", "cleaned", "takeOptionalLabel", "blanksMultipleValidator", "example", "BlanksMultipleContract", "categorizeParser", "code", "distractorResult", "removeDistractors", "distractors", "cleanCode", "instructionMatch", "instruction", "categoryPattern", "categories", "match", "categoryName", "words", "item", "error", "colors_default", "styles_default", "colorsCategorizeRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "palette", "distractorSet", "itemToCategory", "assigned", "categoryColors", "activeColor", "activeCategory", "total", "correct", "score", "wrong", "startTime", "$instructions", "$colorsContainer", "$container", "$noneBtn", "$currentSwatch", "$currentLabel", "$checkBtn", "$resetBtn", "init", "colors_default", "setActivePainter", "check", "reset", "block", "w", "idx", "color", "btn", "renderItems", "label", "b", "updateCounters", "word", "el", "counter", "k", "v", "catCounter", "allWords", "shuffle", "chosen", "isCorrect", "expectedCat", "expectedColor", "finish", "timestamp", "result", "getResultEl", "colorsCategorizeValidator", "exs", "ColorCategorizeContract", "categorizeParser", "single_default", "styles_default", "singleCategorizeRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "$$", "$instruction", "$question", "$progress", "$grid", "$prev", "$next", "$check", "$dialog", "$dialogTitle", "$dialogBody", "$dialogClose", "colorByCategory", "categories", "order", "cursor", "assigned", "checked", "score", "total", "correct", "startTime", "wrong", "palette", "bank", "currentIndex", "goToNext", "updateQuestion", "goToPrev", "init", "single_default", "$footer", "cat", "idx", "color", "i", "w", "c", "shuffle", "_", "check", "renderGrid", "card", "label", "count", "open", "e", "openDialog", "pos", "row", "p", "isOk", "btn", "categoryValue", "itemValue", "good", "bad", "item", "finish", "timestamp", "result", "getResultEl", "singleCategorizeValidator", "exs", "CategorizeSingleContract", "categorizeParser", "mcq_default", "styles_default", "mcqRenderer", "mount", "data", "options", "allowRetry", "resultHandler", "ariaLabel", "checkBtn", "root", "createSection", "injectStyle", "styles_default", "$", "sel", "r", "$title", "$container", "$check", "blocks", "shuffle", "total", "startTime", "correct", "score", "wrong", "ids", "init", "mcq_default", "render", "check", "block", "idx", "el", "id", "points", "w", "finish", "timestamp", "result", "getResultEl", "mcqParser", "code", "title", "rest", "extractTitleAndStrip", "rawBlocks", "splitBlocksOutsideParens", "out", "carryImg", "raw", "label", "noLabel", "takeOptionalLabel", "img", "noImg", "extractImage", "working", "eqIdx", "question", "afterEq", "bracketMatches", "dedupe", "m", "splitPipes", "cleaned", "allOptions", "mcqValidator", "exs", "MCQContract", "letter_picker_default", "LetterPicker", "letter", "root", "letter_picker_default", "b", "v", "clean", "name", "val", "ph", "prop", "value", "edu_mcq_default", "tpl", "edu_mcq_default", "ABC", "EduMCQ", "open", "$", "sel", "r", "v", "opts", "imgUrl", "text", "i", "btn", "wrong", "missed", "correct", "total", "correctSet", "el", "isSel", "isCorrect", "name", "color_picker_default", "ColorPicker", "root", "color_picker_default", "e", "tgt", "obj", "k", "v", "name", "_old", "val", "key", "b", "t", "item", "btn"]
}
